var dg=Object.defineProperty;var fg=(t,e,n)=>e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pg=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var na=(t,e,n)=>fg(t,typeof e!="symbol"?e+"":e,n);var HA=pg((he,de)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function mt(){}function hr(t,e){for(const n in e)t[n]=e[n];return t}function Ch(t){return t()}function Cl(){return Object.create(null)}function pe(t){t.forEach(Ch)}function $h(t){return typeof t=="function"}function He(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function gg(t){return Object.keys(t).length===0}function Dh(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Zi(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function C(t,e){t.appendChild(e)}function J(t,e,n){t.insertBefore(e,n||null)}function Q(t){t.parentNode&&t.parentNode.removeChild(t)}function P(t){return document.createElement(t)}function ht(t){return document.createTextNode(t)}function at(){return ht(" ")}function Ss(){return ht("")}function bt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function mg(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ki(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function U(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const vg=["width","height"];function $l(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set&&vg.indexOf(r)===-1?t[r]=e[r]:U(t,r,e[r])}function yg(t,e,n){const r=new Set;for(let i=0;i<t.length;i+=1)t[i].checked&&r.add(t[i].__value);return n||r.delete(e),Array.from(r)}function _g(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Lh(t){return t===""?null:+t}function bg(t){return Array.from(t.childNodes)}function Ot(t,e){e=""+e,t.data!==e&&(t.data=e)}function Gt(t,e){t.value=e??""}function Qi(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ih(t){const e=t.querySelector(":checked");return e&&e.__value}function un(t,e,n){t.classList.toggle(e,!!n)}function wg(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Zr;function Gr(t){Zr=t}function Os(){if(!Zr)throw new Error("Function called outside component initialization");return Zr}function xs(t){Os().$$.on_mount.push(t)}function Tg(t){Os().$$.after_update.push(t)}function Eg(t){Os().$$.on_destroy.push(t)}function Ms(){const t=Os();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=wg(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,s)}),!s.defaultPrevented}return!0}}function xn(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Kn=[],dn=[];let ir=[];const Ra=[],Sg=Promise.resolve();let Pa=!1;function Og(){Pa||(Pa=!0,Sg.then(Rh))}function Kr(t){ir.push(t)}function Dl(t){Ra.push(t)}const ra=new Set;let jn=0;function Rh(){if(jn!==0)return;const t=Zr;do{try{for(;jn<Kn.length;){const e=Kn[jn];jn++,Gr(e),xg(e.$$)}}catch(e){throw Kn.length=0,jn=0,e}for(Gr(null),Kn.length=0,jn=0;dn.length;)dn.pop()();for(let e=0;e<ir.length;e+=1){const n=ir[e];ra.has(n)||(ra.add(n),n())}ir.length=0}while(Kn.length);for(;Ra.length;)Ra.pop()();Pa=!1,ra.clear(),Gr(t)}function xg(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Kr)}}function Mg(t){const e=[],n=[];ir.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ir=e}const Ni=new Set;let Sn;function Qr(){Sn={r:0,c:[],p:Sn}}function Jr(){Sn.r||pe(Sn.c),Sn=Sn.p}function At(t,e){t&&t.i&&(Ni.delete(t),t.i(e))}function Nt(t,e,n,r){if(t&&t.o){if(Ni.has(t))return;Ni.add(t),Sn.c.push(()=>{Ni.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Kt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function pn(t,e){t.d(1),e.delete(t.key)}function gn(t,e,n,r,i,s,a,o,l,c,u,h){let d=t.length,f=s.length,p=d;const T={};for(;p--;)T[t[p].key]=p;const m=[],y=new Map,w=new Map,b=[];for(p=f;p--;){const E=h(i,s,p),x=n(E);let A=a.get(x);A?b.push(()=>A.p(E,e)):(A=c(x,E),A.c()),y.set(x,m[p]=A),x in T&&w.set(x,Math.abs(p-T[x]))}const v=new Set,g=new Set;function _(E){At(E,1),E.m(o,u),a.set(E.key,E),u=E.first,f--}for(;d&&f;){const E=m[f-1],x=t[d-1],A=E.key,k=x.key;E===x?(u=E.first,d--,f--):y.has(k)?!a.has(A)||v.has(A)?_(E):g.has(k)?d--:w.get(A)>w.get(k)?(g.add(A),_(E)):(v.add(k),d--):(l(x,a),d--)}for(;d--;){const E=t[d];y.has(E.key)||l(E,a)}for(;f;)_(m[f-1]);return pe(b),m}function Ph(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const a=t[s],o=e[s];if(o){for(const l in a)l in o||(r[l]=1);for(const l in o)i[l]||(n[l]=o[l],i[l]=1);t[s]=o}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}function kg(t){return typeof t=="object"&&t!==null?t:{}}function Ll(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Je(t){t&&t.c()}function Ne(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Kr(()=>{const s=t.$$.on_mount.map(Ch).filter($h);t.$$.on_destroy?t.$$.on_destroy.push(...s):pe(s),t.$$.on_mount=[]}),i.forEach(Kr)}function Be(t,e){const n=t.$$;n.fragment!==null&&(Mg(n.after_update),pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ag(t,e){t.$$.dirty[0]===-1&&(Kn.push(t),Og(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Fe(t,e,n,r,i,s,a=null,o=[-1]){const l=Zr;Gr(t);const c=t.$$={fragment:null,ctx:[],props:s,update:mt,not_equal:i,bound:Cl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Cl(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(h,d,...f)=>{const p=f.length?f[0]:d;return c.ctx&&i(c.ctx[h],c.ctx[h]=p)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](p),u&&Ag(t,h)),d}):[],c.update(),u=!0,pe(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const h=bg(e.target);c.fragment&&c.fragment.l(h),h.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&At(t.$$.fragment),Ne(t,e.target,e.anchor),Rh()}Gr(l)}class Ve{constructor(){na(this,"$$");na(this,"$$set")}$destroy(){Be(this,1),this.$destroy=mt}$on(e,n){if(!$h(n))return mt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!gg(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Cg="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Cg);function Il(t){let e;return{c(){e=P("nav"),e.innerHTML='<a href="/" class="svelte-1yx3ff8">Home</a> <a href="/other" class="svelte-1yx3ff8">Other</a>',U(e,"class","mobile-menu svelte-1yx3ff8")},m(n,r){J(n,e,r)},d(n){n&&Q(e)}}}function $g(t){let e,n,r,i,s,a,o,l,c=t[0]&&Il();return{c(){e=P("div"),n=P("h1"),n.innerHTML="<em>PAYBACK</em>",r=at(),i=P("button"),i.innerHTML="<b>≡</b>",s=at(),c&&c.c(),a=Ss(),U(n,"class","svelte-1yx3ff8"),U(i,"class","svelte-1yx3ff8"),U(e,"class","menu-box svelte-1yx3ff8")},m(u,h){J(u,e,h),C(e,n),C(e,r),C(e,i),J(u,s,h),c&&c.m(u,h),J(u,a,h),o||(l=bt(i,"click",t[1]),o=!0)},p(u,[h]){u[0]?c||(c=Il(),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},i:mt,o:mt,d(u){u&&(Q(e),Q(s),Q(a)),c&&c.d(u),o=!1,l()}}}function Dg(t,e,n){let r=!1;function i(){n(0,r=!r),console.log("Toggle menu:",r)}return[r,i]}class Lg extends Ve{constructor(e){super(),Fe(this,e,Dg,$g,He,{})}}function Rl(t,e,n){const r=t.slice();return r[19]=e[n],r}function Ig(t){let e;return{c(){e=P("p"),e.textContent="No participants available to assign. Create participants first."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Rg(t){let e,n,r=t[1]?`${t[1]} Participants`:"x",i,s,a,o,l,c,u,h=t[8]?"Adding...":"Add",d,f,p,T,m,y=[],w=new Map,b,v;function g(M,F){if(M[5])return Ug;if(M[6])return Bg}let _=g(t),E=_&&_(t),x=t[9]&&Pl(t),A=Kt(t[2]);const k=M=>M[19].id;for(let M=0;M<A.length;M+=1){let F=Rl(t,A,M),N=k(F);w.set(N,y[M]=Nl(N,F))}return{c(){e=P("div"),n=P("h2"),i=ht(r),s=at(),E&&E.c(),a=at(),o=P("div"),l=P("input"),c=at(),u=P("button"),d=ht(h),p=at(),x&&x.c(),T=at(),m=P("ul");for(let M=0;M<y.length;M+=1)y[M].c();U(l,"type","text"),U(l,"placeholder","New participant name"),l.disabled=t[8],U(l,"class","svelte-9folbh"),u.disabled=f=t[8]||!t[7].trim(),U(o,"class","add-participant-form svelte-9folbh"),U(m,"class","participant-checkbox-list svelte-9folbh"),U(e,"class","assign-participants-container svelte-9folbh")},m(M,F){J(M,e,F),C(e,n),C(n,i),C(e,s),E&&E.m(e,null),C(e,a),C(e,o),C(o,l),Gt(l,t[7]),C(o,c),C(o,u),C(u,d),C(o,p),x&&x.m(o,null),C(e,T),C(e,m);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(m,null);b||(v=[bt(l,"input",t[13]),bt(u,"click",t[11])],b=!0)},p(M,F){F&2&&r!==(r=M[1]?`${M[1]} Participants`:"x")&&Ot(i,r),_===(_=g(M))&&E?E.p(M,F):(E&&E.d(1),E=_&&_(M),E&&(E.c(),E.m(e,a))),F&256&&(l.disabled=M[8]),F&128&&l.value!==M[7]&&Gt(l,M[7]),F&256&&h!==(h=M[8]?"Adding...":"Add")&&Ot(d,h),F&384&&f!==(f=M[8]||!M[7].trim())&&(u.disabled=f),M[9]?x?x.p(M,F):(x=Pl(M),x.c(),x.m(o,null)):x&&(x.d(1),x=null),F&5157&&(A=Kt(M[2]),y=gn(y,F,k,1,M,A,w,m,pn,Nl,null,Rl))},d(M){M&&Q(e),E&&E.d(),x&&x.d();for(let F=0;F<y.length;F+=1)y[F].d();b=!1,pe(v)}}}function Pg(t){let e,n,r;return{c(){e=P("p"),n=ht("Could not load all participants: "),r=ht(t[4]),U(e,"class","error-message svelte-9folbh")},m(i,s){J(i,e,s),C(e,n),C(e,r)},p(i,s){s&16&&Ot(r,i[4])},d(i){i&&Q(e)}}}function Ng(t){let e;return{c(){e=P("p"),e.textContent="Loading all participants..."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Bg(t){let e,n,r;return{c(){e=P("p"),n=ht("Assignment failed: "),r=ht(t[6]),U(e,"class","error-message svelte-9folbh")},m(i,s){J(i,e,s),C(e,n),C(e,r)},p(i,s){s&64&&Ot(r,i[6])},d(i){i&&Q(e)}}}function Ug(t){let e;return{c(){e=P("p"),e.textContent="Updating assignment..."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Pl(t){let e,n;return{c(){e=P("p"),n=ht(t[9]),U(e,"class","error-message small-error svelte-9folbh")},m(r,i){J(r,e,i),C(e,n)},p(r,i){i&512&&Ot(n,r[9])},d(r){r&&Q(e)}}}function Nl(t,e){let n,r,i,s,a,o,l=e[19].name+"",c,u,h=e[19].id+"",d,f,p,T,m;function y(){return e[14](e[19])}return{key:t,first:null,c(){n=P("li"),r=P("label"),i=P("input"),o=at(),c=ht(l),u=ht(" (ID: "),d=ht(h),f=ht(")"),p=at(),U(i,"type","checkbox"),i.checked=s=e[10](e[19].id),i.disabled=a=!e[0]||e[5],U(r,"class","svelte-9folbh"),U(n,"class","svelte-9folbh"),this.first=n},m(w,b){J(w,n,b),C(n,r),C(r,i),C(r,o),C(r,c),C(r,u),C(r,d),C(r,f),C(n,p),T||(m=bt(i,"change",y),T=!0)},p(w,b){e=w,b&4&&s!==(s=e[10](e[19].id))&&(i.checked=s),b&33&&a!==(a=!e[0]||e[5])&&(i.disabled=a),b&4&&l!==(l=e[19].name+"")&&Ot(c,l),b&4&&h!==(h=e[19].id+"")&&Ot(d,h)},d(w){w&&Q(n),T=!1,m()}}}function Hg(t){let e;function n(s,a){return s[3]?Ng:s[4]?Pg:s[2].length>0?Rg:Ig}let r=n(t),i=r(t);return{c(){i.c(),e=Ss()},m(s,a){i.m(s,a),J(s,e,a)},p(s,[a]){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:mt,o:mt,d(s){s&&Q(e),i.d(s)}}}function Fg(t,e,n){const r=Ms();let{tripId:i}=e,{tripName:s="Selected Trip"}=e,a=[],o=!0,l=null,c=[],u=!1,h=null,d="",f=!1,p=null;xs(async()=>{try{const _=await fetch("/api/v1/payback/participants");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);n(2,a=await _.json())}catch(_){console.error("Failed to fetch all participants:",_),n(4,l=_.message),n(2,a=[])}finally{n(3,o=!1)}});async function T(_){if(_){n(5,u=!0),n(6,h=null),c=[];try{const E=await fetch(`/api/v1/payback/trips/${_}/participants`);if(!E.ok){const x=await E.json().catch(()=>({detail:"Failed to parse error response"}));throw new Error(`HTTP error! status: ${E.status} - ${x.error||x.detail}`)}c=await E.json(),Array.isArray(c)||(console.warn("Assigned participants data is not an array:",c),c=[])}catch(E){console.error(`Failed to fetch assigned participants for trip ${_}:`,E),n(6,h=E.message)}finally{n(5,u=!1)}}}function m(_){return c.some(x=>x.id===_)}async function y(){if(!d.trim()){n(9,p="Participant name cannot be empty.");return}if(!i){n(9,p="No trip selected to add participant to.");return}n(8,f=!0),n(9,p=null);let _=null;try{const E=await fetch("/api/v1/payback/participants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.trim()})});if(!E.ok){const k=await E.json().catch(()=>({detail:"Failed to parse create error"}));throw new Error(`Create failed: ${E.status} - ${k.error||k.detail}`)}if(_=(await E.json()).id,!_)throw new Error("Failed to get ID of newly created participant.");const A=await fetch(`/api/v1/payback/trips/${i}/participants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participant_id:_})});if(!A.ok){const k=await A.json().catch(()=>({detail:"Failed to parse assign error"}));throw new Error(`Assign failed: ${A.status} - ${k.error||k.detail}`)}n(7,d=""),await b(),await T(i),r("participantAdded")}catch(E){console.error("Failed to add and assign new participant:",E),n(9,p=E.message)}finally{n(8,f=!1)}}async function w(_,E){if(!i)return;const x=[...c];if(E){c=c.filter(A=>A.id!==_);try{const A=await fetch(`/api/v1/payback/trips/${i}/participants/${_}`,{method:"DELETE"});if(!A.ok){c=x;const k=await A.json().catch(()=>({detail:"Failed to parse error response"}));throw new Error(`HTTP error! status: ${A.status} - ${k.error||k.detail}`)}}catch(A){console.error(`Failed to remove participant ${_} from trip ${i}:`,A),n(6,h=`Failed to remove participant: ${A.message}`),c=x}}else{const A=a.find(k=>k.id===_);A&&(c=[...c,A]);try{const k=await fetch(`/api/v1/payback/trips/${i}/participants`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participant_id:_})});if(!k.ok){c=x;const M=await k.json().catch(()=>({detail:"Failed to parse error response"}));throw new Error(`HTTP error! status: ${k.status} - ${M.error||M.detail}`)}}catch(k){console.error(`Failed to add participant ${_} to trip ${i}:`,k),n(6,h=`Failed to add participant: ${k.message}`),c=x}finally{n(5,u=!1)}}}async function b(){n(3,o=!0);try{const _=await fetch("/api/v1/payback/participants");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);n(2,a=await _.json()||[])}catch(_){console.error("Failed to re-fetch all participants:",_),n(4,l=_.message)}finally{n(3,o=!1)}}function v(){d=this.value,n(7,d)}const g=_=>w(_.id,m(_.id));return t.$$set=_=>{"tripId"in _&&n(0,i=_.tripId),"tripName"in _&&n(1,s=_.tripName)},t.$$.update=()=>{t.$$.dirty&1&&(i?T(i):(c=[],n(6,h=null),n(5,u=!1)))},[i,s,a,o,l,u,h,d,f,p,m,y,w,v,g]}class Vg extends Ve{constructor(e){super(),Fe(this,e,Fg,Hg,He,{tripId:0,tripName:1})}}function Bl(t){let e,n;return{c(){e=P("p"),n=ht(t[2]),U(e,"class","error-message svelte-16tjkk")},m(r,i){J(r,e,i),C(e,n)},p(r,i){i&4&&Ot(n,r[2])},d(r){r&&Q(e)}}}function zg(t){let e,n,r,i,s,a,o,l,c,u,h,d=t[1]?"Adding...":"Add Trip",f,p,T,m,y,w,b,v=t[2]&&Bl(t);return{c(){e=P("div"),n=P("h2"),n.textContent="Add New Trip",r=at(),i=P("div"),s=P("label"),s.textContent="Trip Name:",a=at(),o=P("input"),l=at(),v&&v.c(),c=at(),u=P("div"),h=P("button"),f=ht(d),T=at(),m=P("button"),y=ht("Cancel"),U(s,"for","trip-name-input"),U(s,"class","svelte-16tjkk"),U(o,"id","trip-name-input"),U(o,"type","text"),U(o,"placeholder","e.g., Summer Vacation 2024"),o.disabled=t[1],U(o,"class","svelte-16tjkk"),U(i,"class","form-group svelte-16tjkk"),h.disabled=p=t[1]||!t[0].trim(),U(m,"class","cancel-button svelte-16tjkk"),m.disabled=t[1],U(u,"class","actions svelte-16tjkk"),U(e,"class","add-trip-modal-content svelte-16tjkk")},m(g,_){J(g,e,_),C(e,n),C(e,r),C(e,i),C(i,s),C(i,a),C(i,o),Gt(o,t[0]),C(e,l),v&&v.m(e,null),C(e,c),C(e,u),C(u,h),C(h,f),C(u,T),C(u,m),C(m,y),w||(b=[bt(o,"input",t[5]),bt(h,"click",t[3]),bt(m,"click",t[4])],w=!0)},p(g,[_]){_&2&&(o.disabled=g[1]),_&1&&o.value!==g[0]&&Gt(o,g[0]),g[2]?v?v.p(g,_):(v=Bl(g),v.c(),v.m(e,c)):v&&(v.d(1),v=null),_&2&&d!==(d=g[1]?"Adding...":"Add Trip")&&Ot(f,d),_&3&&p!==(p=g[1]||!g[0].trim())&&(h.disabled=p),_&2&&(m.disabled=g[1])},i:mt,o:mt,d(g){g&&Q(e),v&&v.d(),w=!1,pe(b)}}}function jg(t,e,n){const r=Ms();let i="",s=!1,a=null;async function o(){if(!i.trim()){n(2,a="Trip name cannot be empty.");return}n(1,s=!0),n(2,a=null);try{const u=await fetch("/api/v1/payback/trips",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.trim()})});if(!u.ok){const h=await u.json().catch(()=>({detail:"Failed to parse error response"}));throw new Error(`HTTP error! status: ${u.status} - ${h.error||h.detail}`)}r("tripAdded"),n(0,i="")}catch(u){console.error("Failed to add trip:",u),n(2,a=u.message)}finally{n(1,s=!1)}}function l(){r("close")}function c(){i=this.value,n(0,i)}return[i,s,a,o,l,c]}class Gg extends Ve{constructor(e){super(),Fe(this,e,jg,zg,He,{})}}function Ul(t,e,n){const r=t.slice();return r[19]=e[n],r}function Hl(t,e,n){const r=t.slice();return r[19]=e[n],r}function Fl(t){let e,n,r;return{c(){e=P("button"),e.textContent="Add New Purchase"},m(i,s){J(i,e,s),n||(r=bt(e,"click",t[2]),n=!0)},p:mt,d(i){i&&Q(e),n=!1,r()}}}function Vl(t){let e,n,r,i,s,a,o,l,c,u,h,d=[],f=new Map,p,T,m,y,w,b,v,g,_,E,x,A,k,M,F,N,Y,nt,K,G,X,lt,rt,D,I,q=t[8]&&zl(t),dt=Kt(t[0]);const st=R=>R[19].id;for(let R=0;R<dt.length;R+=1){let V=Hl(t,dt,R),L=st(V);f.set(L,d[R]=jl(L,V))}let j=t[0].length===0&&Gl();function et(R,V){return R[0].length>0?Yg:Wg}let ct=et(t),B=ct(t);return{c(){e=P("div"),n=P("div"),r=P("h2"),r.textContent="Add New Purchase",i=at(),q&&q.c(),s=at(),a=P("form"),o=P("div"),l=P("label"),l.textContent="Purchaser:",c=at(),u=P("select"),h=P("option"),h.textContent="-- Select Purchaser --";for(let R=0;R<d.length;R+=1)d[R].c();T=at(),j&&j.c(),m=at(),y=P("div"),w=P("label"),w.textContent="Description:",b=at(),v=P("input"),g=at(),_=P("div"),E=P("label"),E.textContent="Cost:",x=at(),A=P("input"),k=at(),M=P("div"),F=P("label"),F.textContent="Recipient(s):",N=at(),B.c(),Y=at(),nt=P("div"),nt.innerHTML=`<strong>Note:</strong> Cost is split evenly among selected recipients. For uneven splits, please enter separate purchases.
            If you (the purchaser) also benefited from this purchase, remember to include yourself in the recipient list.`,K=at(),G=P("div"),X=P("button"),X.textContent="Save Purchase",lt=at(),rt=P("button"),rt.textContent="Cancel",U(r,"class","svelte-1ehjq8k"),U(l,"for","purchaser"),U(l,"class","svelte-1ehjq8k"),h.__value="",Gt(h,h.__value),h.disabled=!0,h.selected=!0,U(u,"id","purchaser"),u.required=!0,u.disabled=p=t[0].length===0,t[5]===void 0&&Kr(()=>t[13].call(u)),U(o,"class","svelte-1ehjq8k"),U(w,"for","description"),U(w,"class","svelte-1ehjq8k"),U(v,"type","text"),U(v,"id","description"),v.required=!0,U(v,"class","svelte-1ehjq8k"),U(y,"class","svelte-1ehjq8k"),U(E,"for","cost"),U(E,"class","svelte-1ehjq8k"),U(A,"type","number"),U(A,"id","cost"),U(A,"min","0"),U(A,"step","0.01"),U(A,"placeholder","e.g., 10.50"),A.required=!0,U(A,"class","svelte-1ehjq8k"),U(_,"class","svelte-1ehjq8k"),U(F,"class","svelte-1ehjq8k"),U(nt,"class","info-note svelte-1ehjq8k"),U(M,"class","svelte-1ehjq8k"),U(X,"type","submit"),U(X,"class","svelte-1ehjq8k"),U(rt,"type","button"),U(rt,"class","svelte-1ehjq8k"),U(G,"class","modal-actions svelte-1ehjq8k"),U(n,"class","modal-content svelte-1ehjq8k"),U(e,"class","modal-backdrop svelte-1ehjq8k")},m(R,V){J(R,e,V),C(e,n),C(n,r),C(n,i),q&&q.m(n,null),C(n,s),C(n,a),C(a,o),C(o,l),C(o,c),C(o,u),C(u,h);for(let L=0;L<d.length;L+=1)d[L]&&d[L].m(u,null);Qi(u,t[5],!0),C(o,T),j&&j.m(o,null),C(a,m),C(a,y),C(y,w),C(y,b),C(y,v),Gt(v,t[6]),C(a,g),C(a,_),C(_,E),C(_,x),C(_,A),Gt(A,t[7]),C(a,k),C(a,M),C(M,F),C(M,N),B.m(M,null),C(M,Y),C(M,nt),C(a,K),C(a,G),C(G,X),C(G,lt),C(G,rt),D||(I=[bt(u,"change",t[13]),bt(v,"input",t[14]),bt(A,"input",t[15]),bt(rt,"click",t[9]),bt(a,"submit",mg(t[10])),bt(n,"click",Ki(t[12])),bt(e,"click",t[9])],D=!0)},p(R,V){R[8]?q?q.p(R,V):(q=zl(R),q.c(),q.m(n,s)):q&&(q.d(1),q=null),V&1&&(dt=Kt(R[0]),d=gn(d,V,st,1,R,dt,f,u,pn,jl,null,Hl)),V&1&&p!==(p=R[0].length===0)&&(u.disabled=p),V&33&&Qi(u,R[5]),R[0].length===0?j||(j=Gl(),j.c(),j.m(o,null)):j&&(j.d(1),j=null),V&64&&v.value!==R[6]&&Gt(v,R[6]),V&128&&Lh(A.value)!==R[7]&&Gt(A,R[7]),ct===(ct=et(R))&&B?B.p(R,V):(B.d(1),B=ct(R),B&&(B.c(),B.m(M,Y)))},d(R){R&&Q(e),q&&q.d();for(let V=0;V<d.length;V+=1)d[V].d();j&&j.d(),B.d(),D=!1,pe(I)}}}function zl(t){let e,n;return{c(){e=P("p"),n=ht(t[8]),U(e,"class","error-message")},m(r,i){J(r,e,i),C(e,n)},p(r,i){i&256&&Ot(n,r[8])},d(r){r&&Q(e)}}}function jl(t,e){let n,r=e[19].name+"",i,s;return{key:t,first:null,c(){n=P("option"),i=ht(r),n.__value=s=e[19].id,Gt(n,n.__value),this.first=n},m(a,o){J(a,n,o),C(n,i)},p(a,o){e=a,o&1&&r!==(r=e[19].name+"")&&Ot(i,r),o&1&&s!==(s=e[19].id)&&(n.__value=s,Gt(n,n.__value))},d(a){a&&Q(n)}}}function Gl(t){let e;return{c(){e=P("p"),e.textContent="No participants assigned to this trip.",U(e,"class","small-note svelte-1ehjq8k")},m(n,r){J(n,e,r)},d(n){n&&Q(e)}}}function Wg(t){let e;return{c(){e=P("p"),e.textContent="No participants available to select as debtors. Add participants to the trip first.",U(e,"class","small-note svelte-1ehjq8k")},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Yg(t){let e,n=[],r=new Map,i=Kt(t[0]);const s=a=>a[19].id;for(let a=0;a<i.length;a+=1){let o=Ul(t,i,a),l=s(o);r.set(l,n[a]=Wl(l,o))}return{c(){e=P("div");for(let a=0;a<n.length;a+=1)n[a].c();U(e,"class","debtors-list svelte-1ehjq8k")},m(a,o){J(a,e,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(a,o){o&17&&(i=Kt(a[0]),n=gn(n,o,s,1,a,i,r,e,pn,Wl,null,Ul))},d(a){a&&Q(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Wl(t,e){let n,r,i,s=!1,a,o=e[19].name+"",l,c,u,h,d;return u=_g(e[17][0]),{key:t,first:null,c(){n=P("label"),r=P("input"),a=at(),l=ht(o),c=at(),U(r,"type","checkbox"),r.__value=i=e[19].id,Gt(r,r.__value),U(r,"class","svelte-1ehjq8k"),U(n,"class","checkbox-label svelte-1ehjq8k"),u.p(r),this.first=n},m(f,p){J(f,n,p),C(n,r),r.checked=~(e[4]||[]).indexOf(r.__value),C(n,a),C(n,l),C(n,c),h||(d=bt(r,"change",e[16]),h=!0)},p(f,p){e=f,p&1&&i!==(i=e[19].id)&&(r.__value=i,Gt(r,r.__value),s=!0),(s||p&17)&&(r.checked=~(e[4]||[]).indexOf(r.__value)),p&1&&o!==(o=e[19].name+"")&&Ot(l,o)},d(f){f&&Q(n),u.r(),h=!1,d()}}}function qg(t){let e,n,r=t[1]&&Fl(t),i=t[3]&&Vl(t);return{c(){r&&r.c(),e=at(),i&&i.c(),n=Ss()},m(s,a){r&&r.m(s,a),J(s,e,a),i&&i.m(s,a),J(s,n,a)},p(s,[a]){s[1]?r?r.p(s,a):(r=Fl(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),s[3]?i?i.p(s,a):(i=Vl(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:mt,o:mt,d(s){s&&(Q(e),Q(n)),r&&r.d(s),i&&i.d(s)}}}function Xg(t,e,n){let r=!1;const i=Ms();let{tripId:s}=e,{participants:a=[]}=e,{showTriggerButton:o=!0}=e,l=[],c="",u="",h=null,d=null;function f(){n(3,r=!0)}function p(){n(3,r=!1),n(5,c=""),n(6,u=""),n(7,h=null),n(4,l=[])}async function T(){if(!c||!u.trim()||h===null||h<=0){alert("Please fill in all fields with valid values.");return}const _={trip_id:s,payer_participant_id:parseInt(c,10),total_amount:Math.round(h*100),description:u.trim(),purchase_date:new Date().toISOString(),debtor_ids:l};console.log("Purchase Entry:",_);try{const E=await fetch("/api/v1/payback/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!E.ok){const x=await E.json().catch(()=>({message:"Unknown error"}));throw new Error(`HTTP error! status: ${E.status} - ${x.error||x.message}`)}p(),i("purchaseAdded")}catch(E){console.error("Error creating purchase:",E),n(8,d=`Failed to save purchase: ${E.message}`)}}const m=[[]];function y(_){xn.call(this,t,_)}function w(){c=Ih(this),n(5,c),n(0,a)}function b(){u=this.value,n(6,u)}function v(){h=Lh(this.value),n(7,h)}function g(){l=yg(m[0],this.__value,this.checked),n(4,l)}return t.$$set=_=>{"tripId"in _&&n(11,s=_.tripId),"participants"in _&&n(0,a=_.participants),"showTriggerButton"in _&&n(1,o=_.showTriggerButton)},[a,o,f,r,l,c,u,h,d,p,T,s,y,w,b,v,g,m]}class Zg extends Ve{constructor(e){super(),Fe(this,e,Xg,qg,He,{tripId:11,participants:0,showTriggerButton:1,openModal:2})}get openModal(){return this.$$.ctx[2]}}function Yl(t,e,n){const r=t.slice();return r[5]=e[n],r}function Kg(t){let e,n=[],r=new Map,i=Kt(t[0]);const s=a=>a[5].id;for(let a=0;a<i.length;a+=1){let o=Yl(t,i,a),l=s(o);r.set(l,n[a]=Xl(l,o))}return{c(){e=P("ul");for(let a=0;a<n.length;a+=1)n[a].c();U(e,"class","purchase-list svelte-rtjnz3")},m(a,o){J(a,e,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(a,o){o&1&&(i=Kt(a[0]),n=gn(n,o,s,1,a,i,r,e,pn,Xl,null,Yl))},d(a){a&&Q(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function Qg(t){let e;return{c(){e=P("p"),e.textContent="No purchases recorded for this trip yet."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Jg(t){let e,n;return{c(){e=P("p"),n=ht(t[2]),U(e,"class","error-message svelte-rtjnz3")},m(r,i){J(r,e,i),C(e,n)},p(r,i){i&4&&Ot(n,r[2])},d(r){r&&Q(e)}}}function tm(t){let e;return{c(){e=P("p"),e.textContent="Loading purchases..."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function ql(t){let e,n,r=t[5].recipient_names.join(", ")+"",i;return{c(){e=P("span"),n=ht("→ "),i=ht(r),U(e,"class","recipients-info")},m(s,a){J(s,e,a),C(e,n),C(e,i)},p(s,a){a&1&&r!==(r=s[5].recipient_names.join(", ")+"")&&Ot(i,r)},d(s){s&&Q(e)}}}function Xl(t,e){let n,r,i=(e[5].payer_name||"Unknown Payer")+"",s,a,o,l,c=(e[5].total_amount/100).toFixed(2)+"",u,h,d,f,p,T=e[5].description+"",m,y,w=e[5].recipient_names&&e[5].recipient_names.length>0&&ql(e);return{key:t,first:null,c(){n=P("li"),r=P("span"),s=ht(i),a=ht(` paid \r
            `),o=P("span"),l=ht("$"),u=ht(c),h=at(),w&&w.c(),d=at(),f=P("span"),p=ht(": "),m=ht(T),y=at(),U(r,"class","payer-name svelte-rtjnz3"),U(o,"class","amount svelte-rtjnz3"),U(f,"class","description svelte-rtjnz3"),U(n,"class","purchase-item svelte-rtjnz3"),this.first=n},m(b,v){J(b,n,v),C(n,r),C(r,s),C(n,a),C(n,o),C(o,l),C(o,u),C(n,h),w&&w.m(n,null),C(n,d),C(n,f),C(f,p),C(f,m),C(n,y)},p(b,v){e=b,v&1&&i!==(i=(e[5].payer_name||"Unknown Payer")+"")&&Ot(s,i),v&1&&c!==(c=(e[5].total_amount/100).toFixed(2)+"")&&Ot(u,c),e[5].recipient_names&&e[5].recipient_names.length>0?w?w.p(e,v):(w=ql(e),w.c(),w.m(n,d)):w&&(w.d(1),w=null),v&1&&T!==(T=e[5].description+"")&&Ot(m,T)},d(b){b&&Q(n),w&&w.d()}}}function em(t){let e;function n(s,a){return s[1]?tm:s[2]?Jg:s[0]?Kg:Qg}let r=n(t),i=r(t);return{c(){e=P("div"),i.c(),U(e,"class","purchase-log svelte-rtjnz3")},m(s,a){J(s,e,a),i.m(e,null)},p(s,[a]){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},i:mt,o:mt,d(s){s&&Q(e),i.d()}}}function nm(t,e,n){let{tripId:r}=e,i=[],s=!0,a=null;async function o(){n(1,s=!0),n(2,a=null),n(0,i=[]);try{const l=await fetch(`/api/v1/payback/trips/${r}/purchases`);if(!l.ok){const u=await l.json().catch(()=>({message:"Unknown error"}));throw new Error(`HTTP error! status: ${l.status} - ${u.error||u.message}`)}const c=await l.json();n(0,i=c)}catch(l){console.error("Error fetching purchases:",l),n(2,a=`Failed to load purchases: ${l.message}`)}finally{n(1,s=!1)}}return xs(()=>{o()}),t.$$set=l=>{"tripId"in l&&n(3,r=l.tripId)},t.$$.update=()=>{t.$$.dirty&8&&r&&o()},[i,s,a,r,o]}class rm extends Ve{constructor(e){super(),Fe(this,e,nm,em,He,{tripId:3,fetchPurchases:4})}get fetchPurchases(){return this.$$.ctx[4]}}var Nh=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(Nh||{}),Bh=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(Bh||{}),Uh=(t=>(t.UPDATE="model-update",t))(Uh||{}),Hh=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(Hh||{}),Fh=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(Fh||{}),Vh=(t=>(t.CHANGE="zoom-domain-change",t))(Vh||{}),zh=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(zh||{}),jh=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(jh||{}),Gh=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Gh||{}),Wh=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(Wh||{}),Yh=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(Yh||{}),qh=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(qh||{}),Xh=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(Xh||{}),Zh=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(Zh||{}),Kh=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(Kh||{}),Qh=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(Qh||{}),Jh=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(Jh||{}),td=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(td||{}),ed=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(ed||{}),nd=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(nd||{}),rd=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(rd||{}),id=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(id||{}),sd=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(sd||{}),ad=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(ad||{}),od=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(od||{}),ld=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(ld||{}),cd=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(cd||{});const im=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:ad,Area:Gh,Axis:jh,Bar:Xh,Boxplot:Zh,CanvasZoom:zh,Chart:Nh,Choropleth:cd,CirclePack:sd,Gauge:qh,Heatmap:ld,Legend:id,Line:Qh,Meter:od,Modal:Bh,Model:Uh,Pie:Yh,Radar:Jh,Scatter:Kh,Threshold:rd,Toolbar:Hh,Tooltip:nd,Tree:td,Treemap:ed,WordCloud:Wh,ZoomBar:Fh,ZoomDomain:Vh},Symbol.toStringTag,{value:"Module"})),$=im;var wt=(t=>(t.HTML="html",t.SVG="svg",t))(wt||{}),vo=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(vo||{}),Wt=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Wt||{}),H=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(H||{}),Ie=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(Ie||{}),Me=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(Me||{}),ee=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(ee||{}),ot=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(ot||{}),Wr=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Wr||{}),Ae=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(Ae||{}),ti=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(ti||{}),ud=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(ud||{}),Bt=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(Bt||{}),Mt=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(Mt||{}),ks=(t=>(t.CENTER="center",t))(ks||{}),Qn=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Qn||{}),hd=(t=>(t.SEMI="semi",t.FULL="full",t))(hd||{}),Bi=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(Bi||{}),cn=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(cn||{}),Et=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(Et||{}),Na=(t=>(t.LEFT="left",t.RIGHT="right",t))(Na||{}),Ft=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(Ft||{}),dd=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(dd||{}),yo=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(yo||{}),fd=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(fd||{}),pd=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(pd||{});function ia(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function xr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}function Mr(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?am(o,h=>h.test(a)):sm(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function sm(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function am(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function om(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const gd=6048e5,lm=864e5,md=6e4,vd=36e5,Zl=Symbol.for("constructDateFrom");function _e(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Zl in t?t[Zl](e):t instanceof Date?new t.constructor(e):new Date(e)}function In(t,...e){const n=_e.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}let cm={};function As(){return cm}function Lt(t,e){return _e(e||t,t)}function ei(t,e){var n,r,i,s;const a=As(),o=(e==null?void 0:e.weekStartsOn)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.weekStartsOn)??a.weekStartsOn??((s=(i=a.locale)==null?void 0:i.options)==null?void 0:s.weekStartsOn)??0,l=Lt(t,e==null?void 0:e.in),c=l.getDay(),u=(c<o?7:0)+c-o;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}const um={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hm=(t,e,n)=>{let r;const i=um[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},dm={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fm=(t,e,n,r)=>dm[t],pm={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gm={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mm={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vm={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ym={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_m={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bm=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wm={ordinalNumber:bm,era:xr({values:pm,defaultWidth:"wide"}),quarter:xr({values:gm,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xr({values:mm,defaultWidth:"wide"}),day:xr({values:vm,defaultWidth:"wide"}),dayPeriod:xr({values:ym,defaultWidth:"wide",formattingValues:_m,defaultFormattingWidth:"wide"})},Tm=/^(\d+)(th|st|nd|rd)?/i,Em=/\d+/i,Sm={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Om={any:[/^b/i,/^(a|c)/i]},xm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mm={any:[/1/i,/2/i,/3/i,/4/i]},km={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Am={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$m={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dm={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lm={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Im={ordinalNumber:om({matchPattern:Tm,parsePattern:Em,valueCallback:t=>parseInt(t,10)}),era:Mr({matchPatterns:Sm,defaultMatchWidth:"wide",parsePatterns:Om,defaultParseWidth:"any"}),quarter:Mr({matchPatterns:xm,defaultMatchWidth:"wide",parsePatterns:Mm,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mr({matchPatterns:km,defaultMatchWidth:"wide",parsePatterns:Am,defaultParseWidth:"any"}),day:Mr({matchPatterns:Cm,defaultMatchWidth:"wide",parsePatterns:$m,defaultParseWidth:"any"}),dayPeriod:Mr({matchPatterns:Dm,defaultMatchWidth:"any",parsePatterns:Lm,defaultParseWidth:"any"})},Rm={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pm={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nm={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bm={date:ia({formats:Rm,defaultWidth:"full"}),time:ia({formats:Pm,defaultWidth:"full"}),dateTime:ia({formats:Nm,defaultWidth:"full"})},yd={code:"en-US",formatDistance:hm,formatLong:Bm,formatRelative:fm,localize:wm,match:Im,options:{weekStartsOn:0,firstWeekContainsDate:1}};var _d=typeof global=="object"&&global&&global.Object===Object&&global,Um=typeof self=="object"&&self&&self.Object===Object&&self,Ce=_d||Um||Function("return this")(),be=Ce.Symbol,bd=Object.prototype,Hm=bd.hasOwnProperty,Fm=bd.toString,kr=be?be.toStringTag:void 0;function Vm(t){var e=Hm.call(t,kr),n=t[kr];try{t[kr]=void 0;var r=!0}catch{}var i=Fm.call(t);return r&&(e?t[kr]=n:delete t[kr]),i}var zm=Object.prototype,jm=zm.toString;function Gm(t){return jm.call(t)}var Wm="[object Null]",Ym="[object Undefined]",Kl=be?be.toStringTag:void 0;function Rn(t){return t==null?t===void 0?Ym:Wm:Kl&&Kl in Object(t)?Vm(t):Gm(t)}function Ue(t){return t!=null&&typeof t=="object"}var qm="[object Symbol]";function Cs(t){return typeof t=="symbol"||Ue(t)&&Rn(t)==qm}function wd(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Qt=Array.isArray,Ql=be?be.prototype:void 0,Jl=Ql?Ql.toString:void 0;function Td(t){if(typeof t=="string")return t;if(Qt(t))return wd(t,Td)+"";if(Cs(t))return Jl?Jl.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function we(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function _o(t){return t}var Xm="[object AsyncFunction]",Zm="[object Function]",Km="[object GeneratorFunction]",Qm="[object Proxy]";function bo(t){if(!we(t))return!1;var e=Rn(t);return e==Zm||e==Km||e==Xm||e==Qm}var sa=Ce["__core-js_shared__"],tc=function(){var t=/[^.]+$/.exec(sa&&sa.keys&&sa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Jm(t){return!!tc&&tc in t}var tv=Function.prototype,ev=tv.toString;function Pn(t){if(t!=null){try{return ev.call(t)}catch{}try{return t+""}catch{}}return""}var nv=/[\\^$.*+?()[\]{}|]/g,rv=/^\[object .+?Constructor\]$/,iv=Function.prototype,sv=Object.prototype,av=iv.toString,ov=sv.hasOwnProperty,lv=RegExp("^"+av.call(ov).replace(nv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cv(t){if(!we(t)||Jm(t))return!1;var e=bo(t)?lv:rv;return e.test(Pn(t))}function uv(t,e){return t==null?void 0:t[e]}function Nn(t,e){var n=uv(t,e);return cv(n)?n:void 0}var Ba=Nn(Ce,"WeakMap"),ec=Object.create,hv=function(){function t(){}return function(e){if(!we(e))return{};if(ec)return ec(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function dv(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function fv(){}function Ed(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var pv=800,gv=16,mv=Date.now;function vv(t){var e=0,n=0;return function(){var r=mv(),i=gv-(r-n);if(n=r,i>0){if(++e>=pv)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function yv(t){return function(){return t}}var Ji=function(){try{var t=Nn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),_v=Ji?function(t,e){return Ji(t,"toString",{configurable:!0,enumerable:!1,value:yv(e),writable:!0})}:_o,Sd=vv(_v);function bv(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function wv(t,e,n,r){for(var i=t.length,s=n+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function Tv(t){return t!==t}function Ev(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Sv(t,e,n){return e===e?Ev(t,e,n):wv(t,Tv,n)}function Ov(t,e){var n=t==null?0:t.length;return!!n&&Sv(t,e,0)>-1}var xv=9007199254740991,Mv=/^(?:0|[1-9]\d*)$/;function wo(t,e){var n=typeof t;return e=e??xv,!!e&&(n=="number"||n!="symbol"&&Mv.test(t))&&t>-1&&t%1==0&&t<e}function $s(t,e,n){e=="__proto__"&&Ji?Ji(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function pi(t,e){return t===e||t!==t&&e!==e}var kv=Object.prototype,Av=kv.hasOwnProperty;function Od(t,e,n){var r=t[e];(!(Av.call(t,e)&&pi(r,n))||n===void 0&&!(e in t))&&$s(t,e,n)}function wr(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=t[o]),i?$s(n,o,l):Od(n,o,l)}return n}var nc=Math.max;function xd(t,e,n){return e=nc(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=nc(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),dv(t,this,o)}}function To(t,e){return Sd(xd(t,e,_o),t+"")}var Cv=9007199254740991;function Eo(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Cv}function Tr(t){return t!=null&&Eo(t.length)&&!bo(t)}function $v(t,e,n){if(!we(n))return!1;var r=typeof e;return(r=="number"?Tr(n)&&wo(e,n.length):r=="string"&&e in n)?pi(n[e],t):!1}function Dv(t){return To(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&$v(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var Lv=Object.prototype;function Ds(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Lv;return t===n}function Iv(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Rv="[object Arguments]";function rc(t){return Ue(t)&&Rn(t)==Rv}var Md=Object.prototype,Pv=Md.hasOwnProperty,Nv=Md.propertyIsEnumerable,dr=rc(function(){return arguments}())?rc:function(t){return Ue(t)&&Pv.call(t,"callee")&&!Nv.call(t,"callee")};function Bv(){return!1}var kd=typeof he=="object"&&he&&!he.nodeType&&he,ic=kd&&typeof de=="object"&&de&&!de.nodeType&&de,Uv=ic&&ic.exports===kd,sc=Uv?Ce.Buffer:void 0,Hv=sc?sc.isBuffer:void 0,fr=Hv||Bv,Fv="[object Arguments]",Vv="[object Array]",zv="[object Boolean]",jv="[object Date]",Gv="[object Error]",Wv="[object Function]",Yv="[object Map]",qv="[object Number]",Xv="[object Object]",Zv="[object RegExp]",Kv="[object Set]",Qv="[object String]",Jv="[object WeakMap]",t1="[object ArrayBuffer]",e1="[object DataView]",n1="[object Float32Array]",r1="[object Float64Array]",i1="[object Int8Array]",s1="[object Int16Array]",a1="[object Int32Array]",o1="[object Uint8Array]",l1="[object Uint8ClampedArray]",c1="[object Uint16Array]",u1="[object Uint32Array]",kt={};kt[n1]=kt[r1]=kt[i1]=kt[s1]=kt[a1]=kt[o1]=kt[l1]=kt[c1]=kt[u1]=!0;kt[Fv]=kt[Vv]=kt[t1]=kt[zv]=kt[e1]=kt[jv]=kt[Gv]=kt[Wv]=kt[Yv]=kt[qv]=kt[Xv]=kt[Zv]=kt[Kv]=kt[Qv]=kt[Jv]=!1;function h1(t){return Ue(t)&&Eo(t.length)&&!!kt[Rn(t)]}function So(t){return function(e){return t(e)}}var Ad=typeof he=="object"&&he&&!he.nodeType&&he,Yr=Ad&&typeof de=="object"&&de&&!de.nodeType&&de,d1=Yr&&Yr.exports===Ad,aa=d1&&_d.process,pr=function(){try{var t=Yr&&Yr.require&&Yr.require("util").types;return t||aa&&aa.binding&&aa.binding("util")}catch{}}(),ac=pr&&pr.isTypedArray,Ls=ac?So(ac):h1,f1=Object.prototype,p1=f1.hasOwnProperty;function Cd(t,e){var n=Qt(t),r=!n&&dr(t),i=!n&&!r&&fr(t),s=!n&&!r&&!i&&Ls(t),a=n||r||i||s,o=a?Iv(t.length,String):[],l=o.length;for(var c in t)(e||p1.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||wo(c,l)))&&o.push(c);return o}function $d(t,e){return function(n){return t(e(n))}}var g1=$d(Object.keys,Object),m1=Object.prototype,v1=m1.hasOwnProperty;function Dd(t){if(!Ds(t))return g1(t);var e=[];for(var n in Object(t))v1.call(t,n)&&n!="constructor"&&e.push(n);return e}function gi(t){return Tr(t)?Cd(t):Dd(t)}function y1(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var _1=Object.prototype,b1=_1.hasOwnProperty;function w1(t){if(!we(t))return y1(t);var e=Ds(t),n=[];for(var r in t)r=="constructor"&&(e||!b1.call(t,r))||n.push(r);return n}function mi(t){return Tr(t)?Cd(t,!0):w1(t)}var T1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E1=/^\w*$/;function Oo(t,e){if(Qt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Cs(t)?!0:E1.test(t)||!T1.test(t)||e!=null&&t in Object(e)}var ni=Nn(Object,"create");function S1(){this.__data__=ni?ni(null):{},this.size=0}function O1(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var x1="__lodash_hash_undefined__",M1=Object.prototype,k1=M1.hasOwnProperty;function A1(t){var e=this.__data__;if(ni){var n=e[t];return n===x1?void 0:n}return k1.call(e,t)?e[t]:void 0}var C1=Object.prototype,$1=C1.hasOwnProperty;function D1(t){var e=this.__data__;return ni?e[t]!==void 0:$1.call(e,t)}var L1="__lodash_hash_undefined__";function I1(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ni&&e===void 0?L1:e,this}function kn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}kn.prototype.clear=S1;kn.prototype.delete=O1;kn.prototype.get=A1;kn.prototype.has=D1;kn.prototype.set=I1;function R1(){this.__data__=[],this.size=0}function Is(t,e){for(var n=t.length;n--;)if(pi(t[n][0],e))return n;return-1}var P1=Array.prototype,N1=P1.splice;function B1(t){var e=this.__data__,n=Is(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():N1.call(e,n,1),--this.size,!0}function U1(t){var e=this.__data__,n=Is(e,t);return n<0?void 0:e[n][1]}function H1(t){return Is(this.__data__,t)>-1}function F1(t,e){var n=this.__data__,r=Is(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function rn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rn.prototype.clear=R1;rn.prototype.delete=B1;rn.prototype.get=U1;rn.prototype.has=H1;rn.prototype.set=F1;var ri=Nn(Ce,"Map");function V1(){this.size=0,this.__data__={hash:new kn,map:new(ri||rn),string:new kn}}function z1(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Rs(t,e){var n=t.__data__;return z1(e)?n[typeof e=="string"?"string":"hash"]:n.map}function j1(t){var e=Rs(this,t).delete(t);return this.size-=e?1:0,e}function G1(t){return Rs(this,t).get(t)}function W1(t){return Rs(this,t).has(t)}function Y1(t,e){var n=Rs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function sn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sn.prototype.clear=V1;sn.prototype.delete=j1;sn.prototype.get=G1;sn.prototype.has=W1;sn.prototype.set=Y1;var q1="Expected a function";function xo(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(q1);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(xo.Cache||sn),n}xo.Cache=sn;var X1=500;function Z1(t){var e=xo(t,function(r){return n.size===X1&&n.clear(),r}),n=e.cache;return e}var K1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q1=/\\(\\)?/g,J1=Z1(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(K1,function(n,r,i,s){e.push(i?s.replace(Q1,"$1"):r||n)}),e});function ty(t){return t==null?"":Td(t)}function Ps(t,e){return Qt(t)?t:Oo(t,e)?[t]:J1(ty(t))}function vi(t){if(typeof t=="string"||Cs(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Mo(t,e){e=Ps(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[vi(e[n++])];return n&&n==r?t:void 0}function Jn(t,e,n){var r=t==null?void 0:Mo(t,e);return r===void 0?n:r}function ko(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var oc=be?be.isConcatSpreadable:void 0;function ey(t){return Qt(t)||dr(t)||!!(oc&&t&&t[oc])}function Ld(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=ey),i||(i=[]);++s<a;){var o=t[s];n(o)?ko(i,o):r||(i[i.length]=o)}return i}var Ao=$d(Object.getPrototypeOf,Object),ny="[object Object]",ry=Function.prototype,iy=Object.prototype,Id=ry.toString,sy=iy.hasOwnProperty,ay=Id.call(Object);function Rd(t){if(!Ue(t)||Rn(t)!=ny)return!1;var e=Ao(t);if(e===null)return!0;var n=sy.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Id.call(n)==ay}function oy(){this.__data__=new rn,this.size=0}function ly(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function cy(t){return this.__data__.get(t)}function uy(t){return this.__data__.has(t)}var hy=200;function dy(t,e){var n=this.__data__;if(n instanceof rn){var r=n.__data__;if(!ri||r.length<hy-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(t,e),this.size=n.size,this}function ke(t){var e=this.__data__=new rn(t);this.size=e.size}ke.prototype.clear=oy;ke.prototype.delete=ly;ke.prototype.get=cy;ke.prototype.has=uy;ke.prototype.set=dy;function fy(t,e){return t&&wr(e,gi(e),t)}function py(t,e){return t&&wr(e,mi(e),t)}var Pd=typeof he=="object"&&he&&!he.nodeType&&he,lc=Pd&&typeof de=="object"&&de&&!de.nodeType&&de,gy=lc&&lc.exports===Pd,cc=gy?Ce.Buffer:void 0,uc=cc?cc.allocUnsafe:void 0;function Nd(t,e){if(e)return t.slice();var n=t.length,r=uc?uc(n):new t.constructor(n);return t.copy(r),r}function my(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function Bd(){return[]}var vy=Object.prototype,yy=vy.propertyIsEnumerable,hc=Object.getOwnPropertySymbols,Co=hc?function(t){return t==null?[]:(t=Object(t),my(hc(t),function(e){return yy.call(t,e)}))}:Bd;function _y(t,e){return wr(t,Co(t),e)}var by=Object.getOwnPropertySymbols,Ud=by?function(t){for(var e=[];t;)ko(e,Co(t)),t=Ao(t);return e}:Bd;function wy(t,e){return wr(t,Ud(t),e)}function Hd(t,e,n){var r=e(t);return Qt(t)?r:ko(r,n(t))}function Ua(t){return Hd(t,gi,Co)}function Fd(t){return Hd(t,mi,Ud)}var Ha=Nn(Ce,"DataView"),Fa=Nn(Ce,"Promise"),sr=Nn(Ce,"Set"),dc="[object Map]",Ty="[object Object]",fc="[object Promise]",pc="[object Set]",gc="[object WeakMap]",mc="[object DataView]",Ey=Pn(Ha),Sy=Pn(ri),Oy=Pn(Fa),xy=Pn(sr),My=Pn(Ba),ve=Rn;(Ha&&ve(new Ha(new ArrayBuffer(1)))!=mc||ri&&ve(new ri)!=dc||Fa&&ve(Fa.resolve())!=fc||sr&&ve(new sr)!=pc||Ba&&ve(new Ba)!=gc)&&(ve=function(t){var e=Rn(t),n=e==Ty?t.constructor:void 0,r=n?Pn(n):"";if(r)switch(r){case Ey:return mc;case Sy:return dc;case Oy:return fc;case xy:return pc;case My:return gc}return e});var ky=Object.prototype,Ay=ky.hasOwnProperty;function Cy(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Ay.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var ts=Ce.Uint8Array;function $o(t){var e=new t.constructor(t.byteLength);return new ts(e).set(new ts(t)),e}function $y(t,e){var n=e?$o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Dy=/\w*$/;function Ly(t){var e=new t.constructor(t.source,Dy.exec(t));return e.lastIndex=t.lastIndex,e}var vc=be?be.prototype:void 0,yc=vc?vc.valueOf:void 0;function Iy(t){return yc?Object(yc.call(t)):{}}function Vd(t,e){var n=e?$o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Ry="[object Boolean]",Py="[object Date]",Ny="[object Map]",By="[object Number]",Uy="[object RegExp]",Hy="[object Set]",Fy="[object String]",Vy="[object Symbol]",zy="[object ArrayBuffer]",jy="[object DataView]",Gy="[object Float32Array]",Wy="[object Float64Array]",Yy="[object Int8Array]",qy="[object Int16Array]",Xy="[object Int32Array]",Zy="[object Uint8Array]",Ky="[object Uint8ClampedArray]",Qy="[object Uint16Array]",Jy="[object Uint32Array]";function t0(t,e,n){var r=t.constructor;switch(e){case zy:return $o(t);case Ry:case Py:return new r(+t);case jy:return $y(t,n);case Gy:case Wy:case Yy:case qy:case Xy:case Zy:case Ky:case Qy:case Jy:return Vd(t,n);case Ny:return new r;case By:case Fy:return new r(t);case Uy:return Ly(t);case Hy:return new r;case Vy:return Iy(t)}}function zd(t){return typeof t.constructor=="function"&&!Ds(t)?hv(Ao(t)):{}}var e0="[object Map]";function n0(t){return Ue(t)&&ve(t)==e0}var _c=pr&&pr.isMap,r0=_c?So(_c):n0,i0="[object Set]";function s0(t){return Ue(t)&&ve(t)==i0}var bc=pr&&pr.isSet,a0=bc?So(bc):s0,o0=1,l0=2,c0=4,jd="[object Arguments]",u0="[object Array]",h0="[object Boolean]",d0="[object Date]",f0="[object Error]",Gd="[object Function]",p0="[object GeneratorFunction]",g0="[object Map]",m0="[object Number]",Wd="[object Object]",v0="[object RegExp]",y0="[object Set]",_0="[object String]",b0="[object Symbol]",w0="[object WeakMap]",T0="[object ArrayBuffer]",E0="[object DataView]",S0="[object Float32Array]",O0="[object Float64Array]",x0="[object Int8Array]",M0="[object Int16Array]",k0="[object Int32Array]",A0="[object Uint8Array]",C0="[object Uint8ClampedArray]",$0="[object Uint16Array]",D0="[object Uint32Array]",xt={};xt[jd]=xt[u0]=xt[T0]=xt[E0]=xt[h0]=xt[d0]=xt[S0]=xt[O0]=xt[x0]=xt[M0]=xt[k0]=xt[g0]=xt[m0]=xt[Wd]=xt[v0]=xt[y0]=xt[_0]=xt[b0]=xt[A0]=xt[C0]=xt[$0]=xt[D0]=!0;xt[f0]=xt[Gd]=xt[w0]=!1;function qr(t,e,n,r,i,s){var a,o=e&o0,l=e&l0,c=e&c0;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!we(t))return t;var u=Qt(t);if(u){if(a=Cy(t),!o)return Ed(t,a)}else{var h=ve(t),d=h==Gd||h==p0;if(fr(t))return Nd(t,o);if(h==Wd||h==jd||d&&!i){if(a=l||d?{}:zd(t),!o)return l?wy(t,py(a,t)):_y(t,fy(a,t))}else{if(!xt[h])return i?t:{};a=t0(t,h,o)}}s||(s=new ke);var f=s.get(t);if(f)return f;s.set(t,a),a0(t)?t.forEach(function(m){a.add(qr(m,e,n,m,t,s))}):r0(t)&&t.forEach(function(m,y){a.set(y,qr(m,e,n,y,t,s))});var p=c?l?Fd:Ua:l?mi:gi,T=u?void 0:p(t);return bv(T||t,function(m,y){T&&(y=m,m=t[y]),Od(a,y,qr(m,e,n,y,t,s))}),a}var L0=1,I0=4;function Ns(t){return qr(t,L0|I0)}var R0="__lodash_hash_undefined__";function P0(t){return this.__data__.set(t,R0),this}function N0(t){return this.__data__.has(t)}function ii(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new sn;++e<n;)this.add(t[e])}ii.prototype.add=ii.prototype.push=P0;ii.prototype.has=N0;function Yd(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function qd(t,e){return t.has(e)}var B0=1,U0=2;function Xd(t,e,n,r,i,s){var a=n&B0,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,f=n&U0?new ii:void 0;for(s.set(t,e),s.set(e,t);++h<o;){var p=t[h],T=e[h];if(r)var m=a?r(T,p,h,e,t,s):r(p,T,h,t,e,s);if(m!==void 0){if(m)continue;d=!1;break}if(f){if(!Yd(e,function(y,w){if(!qd(f,w)&&(p===y||i(p,y,n,r,s)))return f.push(w)})){d=!1;break}}else if(!(p===T||i(p,T,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function H0(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Do(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var F0=1,V0=2,z0="[object Boolean]",j0="[object Date]",G0="[object Error]",W0="[object Map]",Y0="[object Number]",q0="[object RegExp]",X0="[object Set]",Z0="[object String]",K0="[object Symbol]",Q0="[object ArrayBuffer]",J0="[object DataView]",wc=be?be.prototype:void 0,oa=wc?wc.valueOf:void 0;function t_(t,e,n,r,i,s,a){switch(n){case J0:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Q0:return!(t.byteLength!=e.byteLength||!s(new ts(t),new ts(e)));case z0:case j0:case Y0:return pi(+t,+e);case G0:return t.name==e.name&&t.message==e.message;case q0:case Z0:return t==e+"";case W0:var o=H0;case X0:var l=r&F0;if(o||(o=Do),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=V0,a.set(t,e);var u=Xd(o(t),o(e),r,i,s,a);return a.delete(t),u;case K0:if(oa)return oa.call(t)==oa.call(e)}return!1}var e_=1,n_=Object.prototype,r_=n_.hasOwnProperty;function i_(t,e,n,r,i,s){var a=n&e_,o=Ua(t),l=o.length,c=Ua(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=o[h];if(!(a?d in e:r_.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var T=!0;s.set(t,e),s.set(e,t);for(var m=a;++h<l;){d=o[h];var y=t[d],w=e[d];if(r)var b=a?r(w,y,d,e,t,s):r(y,w,d,t,e,s);if(!(b===void 0?y===w||i(y,w,n,r,s):b)){T=!1;break}m||(m=d=="constructor")}if(T&&!m){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!(typeof v=="function"&&v instanceof v&&typeof g=="function"&&g instanceof g)&&(T=!1)}return s.delete(t),s.delete(e),T}var s_=1,Tc="[object Arguments]",Ec="[object Array]",Mi="[object Object]",a_=Object.prototype,Sc=a_.hasOwnProperty;function o_(t,e,n,r,i,s){var a=Qt(t),o=Qt(e),l=a?Ec:ve(t),c=o?Ec:ve(e);l=l==Tc?Mi:l,c=c==Tc?Mi:c;var u=l==Mi,h=c==Mi,d=l==c;if(d&&fr(t)){if(!fr(e))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new ke),a||Ls(t)?Xd(t,e,n,r,i,s):t_(t,e,l,n,r,i,s);if(!(n&s_)){var f=u&&Sc.call(t,"__wrapped__"),p=h&&Sc.call(e,"__wrapped__");if(f||p){var T=f?t.value():t,m=p?e.value():e;return s||(s=new ke),i(T,m,n,r,s)}}return d?(s||(s=new ke),i_(t,e,n,r,i,s)):!1}function Bs(t,e,n,r,i){return t===e?!0:t==null||e==null||!Ue(t)&&!Ue(e)?t!==t&&e!==e:o_(t,e,n,r,Bs,i)}var l_=1,c_=2;function u_(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var o=a[0],l=t[o],c=a[1];if(a[2]){if(l===void 0&&!(o in t))return!1}else{var u=new ke,h;if(!(h===void 0?Bs(c,l,l_|c_,r,u):h))return!1}}return!0}function Zd(t){return t===t&&!we(t)}function h_(t){for(var e=gi(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zd(i)]}return e}function Kd(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function d_(t){var e=h_(t);return e.length==1&&e[0][2]?Kd(e[0][0],e[0][1]):function(n){return n===t||u_(n,t,e)}}function f_(t,e){return t!=null&&e in Object(t)}function p_(t,e,n){e=Ps(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=vi(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Eo(i)&&wo(a,i)&&(Qt(t)||dr(t)))}function g_(t,e){return t!=null&&p_(t,e,f_)}var m_=1,v_=2;function y_(t,e){return Oo(t)&&Zd(e)?Kd(vi(t),e):function(n){var r=Jn(n,t);return r===void 0&&r===e?g_(n,t):Bs(e,r,m_|v_)}}function __(t){return function(e){return e==null?void 0:e[t]}}function b_(t){return function(e){return Mo(e,t)}}function w_(t){return Oo(t)?__(vi(t)):b_(t)}function Lo(t){return typeof t=="function"?t:t==null?_o:typeof t=="object"?Qt(t)?y_(t[0],t[1]):d_(t):w_(t)}function T_(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[++i];if(n(s[l],l,s)===!1)break}return e}}var Qd=T_();function Va(t,e,n){(n!==void 0&&!pi(t[e],n)||n===void 0&&!(e in t))&&$s(t,e,n)}function za(t){return Ue(t)&&Tr(t)}function ja(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function E_(t){return wr(t,mi(t))}function S_(t,e,n,r,i,s,a){var o=ja(t,n),l=ja(e,n),c=a.get(l);if(c){Va(t,n,c);return}var u=s?s(o,l,n+"",t,e,a):void 0,h=u===void 0;if(h){var d=Qt(l),f=!d&&fr(l),p=!d&&!f&&Ls(l);u=l,d||f||p?Qt(o)?u=o:za(o)?u=Ed(o):f?(h=!1,u=Nd(l,!0)):p?(h=!1,u=Vd(l,!0)):u=[]:Rd(l)||dr(l)?(u=o,dr(o)?u=E_(o):(!we(o)||bo(o))&&(u=zd(l))):h=!1}h&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),Va(t,n,u)}function Jd(t,e,n,r,i){t!==e&&Qd(e,function(s,a){if(i||(i=new ke),we(s))S_(t,e,a,n,Jd,r,i);else{var o=r?r(ja(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),Va(t,a,o)}},mi)}function tf(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var O_="[object Map]",x_="[object Set]",M_=Object.prototype,k_=M_.hasOwnProperty;function A_(t){if(t==null)return!0;if(Tr(t)&&(Qt(t)||typeof t=="string"||typeof t.splice=="function"||fr(t)||Ls(t)||dr(t)))return!t.length;var e=ve(t);if(e==O_||e==x_)return!t.size;if(Ds(t))return!Dd(t).length;for(var n in t)if(k_.call(t,n))return!1;return!0}var pt=Dv(function(t,e,n){Jd(t,e,n)}),C_=1/0,$_=sr&&1/Do(new sr([,-0]))[1]==C_?function(t){return new sr(t)}:fv,D_=200;function ef(t,e,n){var r=-1,i=Ov,s=t.length,a=!0,o=[],l=o;if(s>=D_){var c=e?null:$_(t);if(c)return Do(c);a=!1,i=qd,l=new ii}else l=e?[]:o;t:for(;++r<s;){var u=t[r],h=e?e(u):u;if(u=u!==0?u:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(u)}else i(l,h,n)||(l!==o&&l.push(h),o.push(u))}return o}var L_=To(function(t){var e=tf(t);return za(e)&&(e=void 0),ef(Ld(t,1,za,!0),Lo(e))});function si(t){return t&&t.length?ef(t):[]}function Ui(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function I_(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Io(t){let e,n,r;t.length!==2?(e=Ui,n=(o,l)=>Ui(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ui||t===I_?t:R_,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(o[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function a(o,l,c=0,u=o.length){const h=i(o,l,c,u-1);return h>c&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:a,right:s}}function R_(){return 0}function P_(t){return t===null?NaN:+t}const N_=Io(Ui),nf=N_.right;Io(P_).center;function ar(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}let Oc=class extends Map{constructor(e,n=H_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(xc(this,e))}has(e){return super.has(xc(this,e))}set(e,n){return super.set(B_(this,e),n)}delete(e){return super.delete(U_(this,e))}};function xc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function B_({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function U_({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function H_(t){return t!==null&&typeof t=="object"?t.valueOf():t}const F_=Math.sqrt(50),V_=Math.sqrt(10),z_=Math.sqrt(2);function es(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=F_?10:s>=V_?5:s>=z_?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?es(t,e,n*2):[o,l,c]}function ns(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?es(e,t,n):es(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function gr(t,e,n){return e=+e,t=+t,n=+n,es(t,e,n)[2]}function Ga(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?gr(e,t,n):gr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function j_(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function G_(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}var W_={value:()=>{}};function Ro(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Hi(n)}function Hi(t){this._=t}function Y_(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Hi.prototype=Ro.prototype={constructor:Hi,on:function(t,e){var n=this._,r=Y_(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=q_(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=Mc(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Mc(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Hi(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function q_(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Mc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=W_,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wa="http://www.w3.org/1999/xhtml";const kc={svg:"http://www.w3.org/2000/svg",xhtml:Wa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Us(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),kc.hasOwnProperty(e)?{space:kc[e],local:t}:t}function X_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wa&&e.documentElement.namespaceURI===Wa?e.createElement(t):e.createElementNS(n,t)}}function Z_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rf(t){var e=Us(t);return(e.local?Z_:X_)(e)}function K_(){}function Po(t){return t==null?K_:function(){return this.querySelector(t)}}function Q_(t){typeof t!="function"&&(t=Po(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new fe(r,this._parents)}function J_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function tb(){return[]}function sf(t){return t==null?tb:function(){return this.querySelectorAll(t)}}function eb(t){return function(){return J_(t.apply(this,arguments))}}function nb(t){typeof t=="function"?t=eb(t):t=sf(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new fe(r,i)}function af(t){return function(){return this.matches(t)}}function of(t){return function(e){return e.matches(t)}}var rb=Array.prototype.find;function ib(t){return function(){return rb.call(this.children,t)}}function sb(){return this.firstElementChild}function ab(t){return this.select(t==null?sb:ib(typeof t=="function"?t:of(t)))}var ob=Array.prototype.filter;function lb(){return Array.from(this.children)}function cb(t){return function(){return ob.call(this.children,t)}}function ub(t){return this.selectAll(t==null?lb:cb(typeof t=="function"?t:of(t)))}function hb(t){typeof t!="function"&&(t=af(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new fe(r,this._parents)}function lf(t){return new Array(t.length)}function db(){return new fe(this._enter||this._groups.map(lf),this._parents)}function rs(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}rs.prototype={constructor:rs,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fb(t){return function(){return t}}function pb(t,e,n,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new rs(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function gb(t,e,n,r,i,s,a){var o,l,c=new Map,u=e.length,h=s.length,d=new Array(u),f;for(o=0;o<u;++o)(l=e[o])&&(d[o]=f=a.call(l,l.__data__,o,e)+"",c.has(f)?i[o]=l:c.set(f,l));for(o=0;o<h;++o)f=a.call(t,s[o],o,s)+"",(l=c.get(f))?(r[o]=l,l.__data__=s[o],c.delete(f)):n[o]=new rs(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(d[o])===l&&(i[o]=l)}function mb(t){return t.__data__}function vb(t,e){if(!arguments.length)return Array.from(this,mb);var n=e?gb:pb,r=this._parents,i=this._groups;typeof t!="function"&&(t=fb(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=i[c],d=h.length,f=yb(t.call(u,u&&u.__data__,c,r)),p=f.length,T=o[c]=new Array(p),m=a[c]=new Array(p),y=l[c]=new Array(d);n(u,h,T,m,y,f,e);for(var w=0,b=0,v,g;w<p;++w)if(v=T[w]){for(w>=b&&(b=w+1);!(g=m[b])&&++b<p;);v._next=g||null}}return a=new fe(a,r),a._enter=o,a._exit=l,a}function yb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _b(){return new fe(this._exit||this._groups.map(lf),this._parents)}function bb(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function wb(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],h=c.length,d=o[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<i;++l)o[l]=n[l];return new fe(o,this._parents)}function Tb(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Eb(t){t||(t=Sb);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new fe(i,this._parents).order()}function Sb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ob(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xb(){return Array.from(this)}function Mb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function kb(){let t=0;for(const e of this)++t;return t}function Ab(){return!this.node()}function Cb(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function $b(t){return function(){this.removeAttribute(t)}}function Db(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lb(t,e){return function(){this.setAttribute(t,e)}}function Ib(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Rb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Pb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Nb(t,e){var n=Us(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Db:$b:typeof e=="function"?n.local?Pb:Rb:n.local?Ib:Lb)(n,e))}function cf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Bb(t){return function(){this.style.removeProperty(t)}}function Ub(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Hb(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Fb(t,e,n){return arguments.length>1?this.each((e==null?Bb:typeof e=="function"?Hb:Ub)(t,e,n??"")):mr(this.node(),t)}function mr(t,e){return t.style.getPropertyValue(e)||cf(t).getComputedStyle(t,null).getPropertyValue(e)}function Vb(t){return function(){delete this[t]}}function zb(t,e){return function(){this[t]=e}}function jb(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Gb(t,e){return arguments.length>1?this.each((e==null?Vb:typeof e=="function"?jb:zb)(t,e)):this.node()[t]}function uf(t){return t.trim().split(/^|\s+/)}function No(t){return t.classList||new hf(t)}function hf(t){this._node=t,this._names=uf(t.getAttribute("class")||"")}hf.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function df(t,e){for(var n=No(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ff(t,e){for(var n=No(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Wb(t){return function(){df(this,t)}}function Yb(t){return function(){ff(this,t)}}function qb(t,e){return function(){(e.apply(this,arguments)?df:ff)(this,t)}}function Xb(t,e){var n=uf(t+"");if(arguments.length<2){for(var r=No(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?qb:e?Wb:Yb)(n,e))}function Zb(){this.textContent=""}function Kb(t){return function(){this.textContent=t}}function Qb(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Jb(t){return arguments.length?this.each(t==null?Zb:(typeof t=="function"?Qb:Kb)(t)):this.node().textContent}function tw(){this.innerHTML=""}function ew(t){return function(){this.innerHTML=t}}function nw(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rw(t){return arguments.length?this.each(t==null?tw:(typeof t=="function"?nw:ew)(t)):this.node().innerHTML}function iw(){this.nextSibling&&this.parentNode.appendChild(this)}function sw(){return this.each(iw)}function aw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ow(){return this.each(aw)}function lw(t){var e=typeof t=="function"?t:rf(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cw(){return null}function uw(t,e){var n=typeof t=="function"?t:rf(t),r=e==null?cw:typeof e=="function"?e:Po(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hw(){var t=this.parentNode;t&&t.removeChild(this)}function dw(){return this.each(hw)}function fw(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pw(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gw(t){return this.select(t?pw:fw)}function mw(t){return arguments.length?this.property("__data__",t):this.node().__data__}function vw(t){return function(e){t.call(this,e,this.__data__)}}function yw(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function _w(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function bw(t,e,n){return function(){var r=this.__on,i,s=vw(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ww(t,e,n){var r=yw(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?bw:_w,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function pf(t,e,n){var r=cf(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Tw(t,e){return function(){return pf(this,t,e)}}function Ew(t,e){return function(){return pf(this,t,e.apply(this,arguments))}}function Sw(t,e){return this.each((typeof e=="function"?Ew:Tw)(t,e))}function*Ow(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var gf=[null];function fe(t,e){this._groups=t,this._parents=e}function yi(){return new fe([[document.documentElement]],gf)}function xw(){return this}fe.prototype=yi.prototype={constructor:fe,select:Q_,selectAll:nb,selectChild:ab,selectChildren:ub,filter:hb,data:vb,enter:db,exit:_b,join:bb,merge:wb,selection:xw,order:Tb,sort:Eb,call:Ob,nodes:xb,node:Mb,size:kb,empty:Ab,each:Cb,attr:Nb,style:Fb,property:Gb,classed:Xb,text:Jb,html:rw,raise:sw,lower:ow,append:lw,insert:uw,remove:dw,clone:gw,datum:mw,on:ww,dispatch:Sw,[Symbol.iterator]:Ow};function Mw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function An(t,e){if(t=Mw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Bo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mf(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _i(){}var ai=.7,is=1/ai,or="\\s*([+-]?\\d+)\\s*",oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kw=/^#([0-9a-f]{3,8})$/,Aw=new RegExp(`^rgb\\(${or},${or},${or}\\)$`),Cw=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),$w=new RegExp(`^rgba\\(${or},${or},${or},${oi}\\)$`),Dw=new RegExp(`^rgba\\(${Re},${Re},${Re},${oi}\\)$`),Lw=new RegExp(`^hsl\\(${oi},${Re},${Re}\\)$`),Iw=new RegExp(`^hsla\\(${oi},${Re},${Re},${oi}\\)$`),Ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bo(_i,Cn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cc,formatHex:Cc,formatHex8:Rw,formatHsl:Pw,formatRgb:$c,toString:$c});function Cc(){return this.rgb().formatHex()}function Rw(){return this.rgb().formatHex8()}function Pw(){return vf(this).formatHsl()}function $c(){return this.rgb().formatRgb()}function Cn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=kw.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Dc(e):n===3?new ae(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ki(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ki(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Aw.exec(t))?new ae(e[1],e[2],e[3],1):(e=Cw.exec(t))?new ae(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$w.exec(t))?ki(e[1],e[2],e[3],e[4]):(e=Dw.exec(t))?ki(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lw.exec(t))?Rc(e[1],e[2]/100,e[3]/100,1):(e=Iw.exec(t))?Rc(e[1],e[2]/100,e[3]/100,e[4]):Ac.hasOwnProperty(t)?Dc(Ac[t]):t==="transparent"?new ae(NaN,NaN,NaN,0):null}function Dc(t){return new ae(t>>16&255,t>>8&255,t&255,1)}function ki(t,e,n,r){return r<=0&&(t=e=n=NaN),new ae(t,e,n,r)}function Nw(t){return t instanceof _i||(t=Cn(t)),t?(t=t.rgb(),new ae(t.r,t.g,t.b,t.opacity)):new ae}function Ya(t,e,n,r){return arguments.length===1?Nw(t):new ae(t,e,n,r??1)}function ae(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Bo(ae,Ya,mf(_i,{brighter(t){return t=t==null?is:Math.pow(is,t),new ae(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ai:Math.pow(ai,t),new ae(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ae(Mn(this.r),Mn(this.g),Mn(this.b),ss(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lc,formatHex:Lc,formatHex8:Bw,formatRgb:Ic,toString:Ic}));function Lc(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function Bw(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ic(){const t=ss(this.opacity);return`${t===1?"rgb(":"rgba("}${Mn(this.r)}, ${Mn(this.g)}, ${Mn(this.b)}${t===1?")":`, ${t})`}`}function ss(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function On(t){return t=Mn(t),(t<16?"0":"")+t.toString(16)}function Rc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xe(t,e,n,r)}function vf(t){if(t instanceof xe)return new xe(t.h,t.s,t.l,t.opacity);if(t instanceof _i||(t=Cn(t)),!t)return new xe;if(t instanceof xe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new xe(a,o,l,t.opacity)}function Uw(t,e,n,r){return arguments.length===1?vf(t):new xe(t,e,n,r??1)}function xe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Bo(xe,Uw,mf(_i,{brighter(t){return t=t==null?is:Math.pow(is,t),new xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ai:Math.pow(ai,t),new xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ae(la(t>=240?t-240:t+120,i,r),la(t,i,r),la(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xe(Pc(this.h),Ai(this.s),Ai(this.l),ss(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ss(this.opacity);return`${t===1?"hsl(":"hsla("}${Pc(this.h)}, ${Ai(this.s)*100}%, ${Ai(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pc(t){return t=(t||0)%360,t<0?t+360:t}function Ai(t){return Math.max(0,Math.min(1,t||0))}function la(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Uo=t=>()=>t;function Hw(t,e){return function(n){return t+n*e}}function Fw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Vw(t){return(t=+t)==1?yf:function(e,n){return n-e?Fw(e,n,t):Uo(isNaN(e)?n:e)}}function yf(t,e){var n=e-t;return n?Hw(t,n):Uo(isNaN(t)?e:t)}const as=function t(e){var n=Vw(e);function r(i,s){var a=n((i=Ya(i)).r,(s=Ya(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=yf(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function zw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function jw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gw(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Hs(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Ww(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Yw(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hs(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var qa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ca=new RegExp(qa.source,"g");function qw(t){return function(){return t}}function Xw(t){return function(e){return t(e)+""}}function _f(t,e){var n=qa.lastIndex=ca.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=qa.exec(t))&&(i=ca.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Oe(r,i)})),n=ca.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Xw(l[0].x):qw(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}function Hs(t,e){var n=typeof e,r;return e==null||n==="boolean"?Uo(e):(n==="number"?Oe:n==="string"?(r=Cn(e))?(e=r,as):_f:e instanceof Cn?as:e instanceof Date?Ww:jw(e)?zw:Array.isArray(e)?Gw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Yw:Oe)(t,e)}function Zw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Nc=180/Math.PI,bf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wf(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Nc,skewX:Math.atan(l)*Nc,scaleX:a,scaleY:o}}var Ci;function Kw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bf:wf(e.a,e.b,e.c,e.d,e.e,e.f)}function Qw(t){return t==null||(Ci||(Ci=document.createElementNS("http://www.w3.org/2000/svg","g")),Ci.setAttribute("transform",t),!(t=Ci.transform.baseVal.consolidate()))?bf:(t=t.matrix,wf(t.a,t.b,t.c,t.d,t.e,t.f))}function Tf(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,f,p){if(c!==h||u!==d){var T=f.push("translate(",null,e,null,n);p.push({i:T-4,x:Oe(c,h)},{i:T-2,x:Oe(u,d)})}else(h||d)&&f.push("translate("+h+e+d+n)}function a(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Oe(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function o(c,u,h,d){c!==u?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Oe(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,d,f,p){if(c!==h||u!==d){var T=f.push(i(f)+"scale(",null,",",null,")");p.push({i:T-4,x:Oe(c,h)},{i:T-2,x:Oe(u,d)})}else(h!==1||d!==1)&&f.push(i(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),a(c.rotate,u.rotate,h,d),o(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var p=-1,T=d.length,m;++p<T;)h[(m=d[p]).i]=m.x(f);return h.join("")}}}var Jw=Tf(Kw,"px, ","px)","deg)"),tT=Tf(Qw,", ",")",")"),vr=0,Fr=0,Ar=0,Ef=1e3,os,Vr,ls=0,$n=0,Fs=0,li=typeof performance=="object"&&performance.now?performance:Date,Sf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ho(){return $n||(Sf(eT),$n=li.now()+Fs)}function eT(){$n=0}function cs(){this._call=this._time=this._next=null}cs.prototype=Of.prototype={constructor:cs,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ho():+n)+(e==null?0:+e),!this._next&&Vr!==this&&(Vr?Vr._next=this:os=this,Vr=this),this._call=t,this._time=n,Xa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xa())}};function Of(t,e,n){var r=new cs;return r.restart(t,e,n),r}function nT(){Ho(),++vr;for(var t=os,e;t;)(e=$n-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vr}function Bc(){$n=(ls=li.now())+Fs,vr=Fr=0;try{nT()}finally{vr=0,iT(),$n=0}}function rT(){var t=li.now(),e=t-ls;e>Ef&&(Fs-=e,ls=t)}function iT(){for(var t,e=os,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:os=n);Vr=t,Xa(r)}function Xa(t){if(!vr){Fr&&(Fr=clearTimeout(Fr));var e=t-$n;e>24?(t<1/0&&(Fr=setTimeout(Bc,t-li.now()-Fs)),Ar&&(Ar=clearInterval(Ar))):(Ar||(ls=li.now(),Ar=setInterval(rT,Ef)),vr=1,Sf(Bc))}}function Uc(t,e,n){var r=new cs;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var sT=Ro("start","end","cancel","interrupt"),aT=[],xf=0,Hc=1,Za=2,Fi=3,Fc=4,Ka=5,Vi=6;function Vs(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;oT(t,n,{name:e,index:r,group:i,on:sT,tween:aT,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xf})}function Fo(t,e){var n=$e(t,e);if(n.state>xf)throw new Error("too late; already scheduled");return n}function ze(t,e){var n=$e(t,e);if(n.state>Fi)throw new Error("too late; already running");return n}function $e(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function oT(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Of(s,0,n.time);function s(c){n.state=Hc,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,h,d,f;if(n.state!==Hc)return l();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Fi)return Uc(a);f.state===Fc?(f.state=Vi,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=Vi,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(Uc(function(){n.state===Fi&&(n.state=Fc,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Za,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Za){for(n.state=Fi,i=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ka,1),h=-1,d=i.length;++h<d;)i[h].call(t,u);n.state===Ka&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Vi,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Qa(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Za&&r.state<Ka,r.state=Vi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function lT(t){return this.each(function(){Qa(this,t)})}function cT(t,e){var n,r;return function(){var i=ze(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function uT(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ze(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function hT(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=$e(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?cT:uT)(n,t,e))}function Vo(t,e,n){var r=t._id;return t.each(function(){var i=ze(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return $e(i,r).value[e]}}function Mf(t,e){var n;return(typeof e=="number"?Oe:e instanceof Cn?as:(n=Cn(e))?(e=n,as):_f)(t,e)}function dT(t){return function(){this.removeAttribute(t)}}function fT(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pT(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function gT(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function mT(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function vT(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function yT(t,e){var n=Us(t),r=n==="transform"?tT:Mf;return this.attrTween(t,typeof e=="function"?(n.local?vT:mT)(n,r,Vo(this,"attr."+t,e)):e==null?(n.local?fT:dT)(n):(n.local?gT:pT)(n,r,e))}function _T(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function bT(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wT(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&bT(t,s)),n}return i._value=e,i}function TT(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&_T(t,s)),n}return i._value=e,i}function ET(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Us(t);return this.tween(n,(r.local?wT:TT)(r,e))}function ST(t,e){return function(){Fo(this,t).delay=+e.apply(this,arguments)}}function OT(t,e){return e=+e,function(){Fo(this,t).delay=e}}function xT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ST:OT)(e,t)):$e(this.node(),e).delay}function MT(t,e){return function(){ze(this,t).duration=+e.apply(this,arguments)}}function kT(t,e){return e=+e,function(){ze(this,t).duration=e}}function AT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?MT:kT)(e,t)):$e(this.node(),e).duration}function CT(t,e){if(typeof e!="function")throw new Error;return function(){ze(this,t).ease=e}}function $T(t){var e=this._id;return arguments.length?this.each(CT(e,t)):$e(this.node(),e).ease}function DT(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ze(this,t).ease=n}}function LT(t){if(typeof t!="function")throw new Error;return this.each(DT(this._id,t))}function IT(t){typeof t!="function"&&(t=af(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new tn(r,this._parents,this._name,this._id)}function RT(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],c=n[o],u=l.length,h=a[o]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;o<r;++o)a[o]=e[o];return new tn(a,this._parents,this._name,this._id)}function PT(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function NT(t,e,n){var r,i,s=PT(e)?Fo:ze;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function BT(t,e){var n=this._id;return arguments.length<2?$e(this.node(),n).on.on(t):this.each(NT(n,t,e))}function UT(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function HT(){return this.on("end.remove",UT(this._id))}function FT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Po(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,h,d=0;d<l;++d)(u=o[d])&&(h=t.call(u,u.__data__,d,o))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,Vs(c[d],e,n,d,c,$e(u,n)));return new tn(s,this._parents,e,n)}function VT(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sf(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=t.call(u,u.__data__,h,l),f,p=$e(u,n),T=0,m=d.length;T<m;++T)(f=d[T])&&Vs(f,e,n,T,d,p);s.push(d),a.push(u)}return new tn(s,a,e,n)}var zT=yi.prototype.constructor;function jT(){return new zT(this._groups,this._parents)}function GT(t,e){var n,r,i;return function(){var s=mr(this,t),a=(this.style.removeProperty(t),mr(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function kf(t){return function(){this.style.removeProperty(t)}}function WT(t,e,n){var r,i=n+"",s;return function(){var a=mr(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function YT(t,e,n){var r,i,s;return function(){var a=mr(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),mr(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function qT(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=ze(this,t),c=l.on,u=l.value[s]==null?o||(o=kf(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function XT(t,e,n){var r=(t+="")=="transform"?Jw:Mf;return e==null?this.styleTween(t,GT(t,r)).on("end.style."+t,kf(t)):typeof e=="function"?this.styleTween(t,YT(t,r,Vo(this,"style."+t,e))).each(qT(this._id,t)):this.styleTween(t,WT(t,r,e),n).on("end.style."+t,null)}function ZT(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function KT(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&ZT(t,a,n)),r}return s._value=e,s}function QT(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,KT(t,e,n??""))}function JT(t){return function(){this.textContent=t}}function tE(t){return function(){var e=t(this);this.textContent=e??""}}function eE(t){return this.tween("text",typeof t=="function"?tE(Vo(this,"text",t)):JT(t==null?"":t+""))}function nE(t){return function(e){this.textContent=t.call(this,e)}}function rE(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&nE(i)),e}return r._value=t,r}function iE(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,rE(t))}function sE(){for(var t=this._name,e=this._id,n=Af(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=$e(l,e);Vs(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tn(r,this._parents,t,n)}function aE(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=ze(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&s()})}var oE=0;function tn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Af(){return++oE}var Ye=yi.prototype;tn.prototype={constructor:tn,select:FT,selectAll:VT,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:IT,merge:RT,selection:jT,transition:sE,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:BT,attr:yT,attrTween:ET,style:XT,styleTween:QT,text:eE,textTween:iE,remove:HT,tween:hT,delay:xT,duration:AT,ease:$T,easeVarying:LT,end:aE,[Symbol.iterator]:Ye[Symbol.iterator]};function Cf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var lE={time:null,delay:0,duration:250,ease:Cf};function cE(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function uE(t){var e,n;t instanceof tn?(e=t._id,t=t._name):(e=Af(),(n=lE).time=Ho(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&Vs(l,t,e,c,a,n||cE(l,e));return new tn(r,this._parents,t,e)}yi.prototype.interrupt=lT;yi.prototype.transition=uE;function hE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function us(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function yr(t){return t=us(Math.abs(t)),t?t[1]:NaN}function dE(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function fE(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var pE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ci(t){if(!(e=pE.exec(t)))throw new Error("invalid format: "+t);var e;return new zo({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ci.prototype=zo.prototype;function zo(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}zo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gE(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var $f;function mE(t,e){var n=us(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-($f=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+us(t,Math.max(0,e+s-1))[0]}function Vc(t,e){var n=us(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const zc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:hE,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vc(t*100,e),r:Vc,s:mE,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jc(t){return t}var Gc=Array.prototype.map,Wc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vE(t){var e=t.grouping===void 0||t.thousands===void 0?jc:dE(Gc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?jc:fE(Gc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=ci(h);var d=h.fill,f=h.align,p=h.sign,T=h.symbol,m=h.zero,y=h.width,w=h.comma,b=h.precision,v=h.trim,g=h.type;g==="n"?(w=!0,g="g"):zc[g]||(b===void 0&&(b=12),v=!0,g="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var _=T==="$"?n:T==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",E=T==="$"?r:/[%p]/.test(g)?a:"",x=zc[g],A=/[defgprs%]/.test(g);b=b===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(M){var F=_,N=E,Y,nt,K;if(g==="c")N=x(M)+N,M="";else{M=+M;var G=M<0||1/M<0;if(M=isNaN(M)?l:x(Math.abs(M),b),v&&(M=gE(M)),G&&+M==0&&p!=="+"&&(G=!1),F=(G?p==="("?p:o:p==="-"||p==="("?"":p)+F,N=(g==="s"?Wc[8+$f/3]:"")+N+(G&&p==="("?")":""),A){for(Y=-1,nt=M.length;++Y<nt;)if(K=M.charCodeAt(Y),48>K||K>57){N=(K===46?i+M.slice(Y+1):M.slice(Y))+N,M=M.slice(0,Y);break}}}w&&!m&&(M=e(M,1/0));var X=F.length+M.length+N.length,lt=X<y?new Array(y-X+1).join(d):"";switch(w&&m&&(M=e(lt+M,lt.length?y-N.length:1/0),lt=""),f){case"<":M=F+M+N+lt;break;case"=":M=F+lt+M+N;break;case"^":M=lt.slice(0,X=lt.length>>1)+F+M+N+lt.slice(X);break;default:M=lt+F+M+N;break}return s(M)}return k.toString=function(){return h+""},k}function u(h,d){var f=c((h=ci(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(yr(d)/3)))*3,T=Math.pow(10,-p),m=Wc[8+p/3];return function(y){return f(T*y)+m}}return{format:c,formatPrefix:u}}var $i,jo,Df;yE({thousands:",",grouping:[3],currency:["$",""]});function yE(t){return $i=vE(t),jo=$i.format,Df=$i.formatPrefix,$i}function _E(t){return Math.max(0,-yr(Math.abs(t)))}function bE(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yr(e)/3)))*3-yr(Math.abs(t)))}function wE(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yr(e)-yr(t))+1}function bi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Yc=Symbol("implicit");function Go(){var t=new Oc,e=[],n=[],r=Yc;function i(s){let a=t.get(s);if(a===void 0){if(r!==Yc)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Oc;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Go(e,n).unknown(r)},bi.apply(i,arguments),i}function TE(t){return function(){return t}}function EE(t){return+t}var qc=[0,1];function tr(t){return t}function Ja(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:TE(isNaN(e)?NaN:.5)}function SE(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function OE(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Ja(i,r),s=n(a,s)):(r=Ja(r,i),s=n(s,a)),function(o){return s(r(o))}}function xE(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ja(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=nf(t,o,1,r)-1;return s[l](i[l](o))}}function Wo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lf(){var t=qc,e=qc,n=Hs,r,i,s,a=tr,o,l,c;function u(){var d=Math.min(t.length,e.length);return a!==tr&&(a=SE(t[0],t[d-1])),o=d>2?xE:OE,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=o(t.map(r),e,n)))(r(a(d)))}return h.invert=function(d){return a(i((c||(c=o(e,t.map(r),Oe)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,EE),u()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=Zw,u()},h.clamp=function(d){return arguments.length?(a=d?!0:tr,u()):a!==tr},h.interpolate=function(d){return arguments.length?(n=d,u()):n},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,i=f,u()}}function If(){return Lf()(tr,tr)}function ME(t,e,n,r){var i=Ga(t,e,n),s;switch(r=ci(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=bE(i,a))&&(r.precision=s),Df(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=wE(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_E(i))&&(r.precision=s-(r.type==="%")*2);break}}return jo(r)}function kE(t){var e=t.domain;return t.ticks=function(n){var r=e();return ns(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ME(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=gr(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function hs(){var t=If();return t.copy=function(){return Wo(t,hs())},bi.apply(t,arguments),kE(t)}function zr(t,e,n){this.k=t,this.x=e,this.y=n}zr.prototype={constructor:zr,scale:function(t){return t===1?this:new zr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new zr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};zr.prototype;const se="cds",Ze={opacity:{unselected:.05,selected:.4}},hn={ticks:{number:7,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},Xc={duration:1e3,ease:Cf},AE={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},CE={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},$E={defaultBins:10},jt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},ua={opacity:{unselected:.3,selected:1}},Cr={radiusOffset:-15,xOffset:30,yOffset:20},Zc={default:{size:24}},Kc={defaultOffset:4,horizontalOffset:10},Qc={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},ue={height:{[Ie.GRAPH_VIEW]:32,[Ie.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},DE=[{type:Ft.RADIUS,name:"Radius"},{type:Ft.AREA,name:"Poor area"},{type:Ft.AREA,name:"Satisfactory area"},{type:Ft.AREA,name:"Great area"},{type:Ft.QUARTILE,name:"Quartiles"}],er={type:Me.END_LINE,threshold:16,numCharacter:14},LE={code:typeof navigator<"u"&&(navigator==null?void 0:navigator.language)||"en-US",number:(t,e=(navigator==null?void 0:navigator.language)||"en-US")=>t.toLocaleString(e),date:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=(navigator==null?void 0:navigator.language)||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},IE={enabled:!0,position:Wr.BOTTOM,clickable:!0,truncation:er,alignment:Ae.LEFT,order:null,additionalItems:[]},RE={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},PE={enabled:!0},Rf={enabled:!0,showTotal:!0,truncation:er,groupLabel:"Group"},Pf={top:{visible:!0,includeZero:!0,truncation:er},bottom:{visible:!0,includeZero:!0,truncation:er},left:{visible:!0,includeZero:!0,truncation:er},right:{visible:!0,includeZero:!0,truncation:er}},zs={addSpaceOnEdges:1,showDayName:!1,localeObject:yd,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let Nf=!1;try{Nf=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const ne={width:null,height:null,resizable:!0,theme:vo.WHITE,tooltip:Rf,legend:IE,locale:LE,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:Et.SHOW_AS_DATATABLE},...Nf?[{type:Et.MAKE_FULLSCREEN}]:[],{type:Et.EXPORT_CSV},{type:Et.EXPORT_PNG},{type:Et.EXPORT_JPG}]}},NE=pt({},ne,{thematic:{projection:fd.geoNaturalEarth1}}),js=pt({},ne,{axes:Pf,timeScale:zs,grid:RE,ruler:PE,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Ie.GRAPH_VIEW}}}),Dn=pt({},js,{bars:{maxWidth:16,spacingFactor:.25},timeScale:pt(zs,{addSpaceOnEdges:1})}),BE=pt({},Dn,{});pt({},Dn,{});pt({},Dn,{bars:pt({},Dn.bars,{dividerSize:1.5})});pt({},Dn,{});const UE=pt({},js,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),HE=pt({},UE,{points:{radius:3,filled:!1,enabled:!0}});pt({},HE,{timeScale:pt(zs,{addSpaceOnEdges:0})});pt({},js,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Ft.RADIUS,name:"Radius"}]}});pt({},js,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Ft.AREA,name:"Poor area"},{type:Ft.AREA,name:"Satisfactory area"},{type:Ft.AREA,name:"Great area"},{type:Ft.QUARTILE,name:"Quartiles"}]}});pt({},Dn,{bars:{dividerSize:1.5},timeScale:pt(zs,{addSpaceOnEdges:0})});pt({},ne,{tooltip:pt({},Rf,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}});const FE=pt({},ne,{pie:{labels:{formatter:null,enabled:!0},alignment:Ae.LEFT,sortFunction:null,valueMapsTo:"value"}});pt({},ne,{legend:{enabled:!1},gauge:{type:hd.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:Ae.LEFT}});pt({},FE,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:Ae.LEFT}});const VE=pt({},ne,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}});pt({},VE,{legend:{enabled:!0}});pt({},ne,{radar:{axes:{angle:"key",value:"value"},alignment:Ae.LEFT},tooltip:{gridline:{enabled:!0}}});pt({},Dn,{comboChartTypes:[]});pt({tree:{type:ud.TREE}},ne,{});pt({},ne,{data:pt(ne.data,{groupMapsTo:"name"})});pt({},ne,AE,{data:pt(ne.data,{groupMapsTo:"name"})});pt({},ne,{alluvial:{data:pt(ne.data,{groupMapsTo:"source"}),nodeAlignment:Ae.CENTER,nodePadding:24,monochrome:!1,nodes:[]}});pt({},ne,{axes:Pf,heatmap:{divider:{state:dd.AUTO},colorLegend:{type:"linear"}}});pt({},NE,{choropleth:{colorLegend:{type:"linear"}}});const zE={simpleBarChart:BE};function jE(t,e,n){let r=null;return function(...i){const s=this;s.mousePosition=An(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(s,i)},e)}}function GE(t,e){var n;const r=Ns(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const s in r.axes)if(i.includes(s)){const a=e.axes[s];if((a.primary||a.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://charts.carbondesignsystem.com/"),a.mapsTo==null){const l=a.scaleType;l==null?a.mapsTo="value":l===ot.TIME?a.mapsTo="date":l===ot.LABELS&&(a.mapsTo="key")}}else delete r.axes[s];return Bf(r,e),pt(r,e)}function Xe(t){if(!t)return;const e=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=t.getAttribute("transform").match(e);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function ui(t,e,n){if(n>t.length)return t;if(e===Me.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===Me.FRONT_LINE)return"..."+t.substr(-n);if(e===Me.END_LINE)return t.substr(0,n)+"..."}function Bf(t,e){const n=S(t,"legend","additionalItems"),r=S(e,"legend","additionalItems");if(n&&r){const i=r.map(o=>o.type),s=n.map(o=>o.type),a=DE.filter(o=>s.includes(o.type)&&!i.includes(o.type));t.legend.additionalItems=a,e.legend.additionalItems=L_(a,r,"name")}}const S=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Uf=(t,e)=>e===ee.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,Yo=(t,e)=>{const{x0:n,x1:r,y0:i,y1:s}=Uf(t,e);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function lr(t,e,n){return n===ee.VERTICAL?[t,e]:[e,t]}function Jc(t){const e=Lt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tu(t,e){const n=Lt(t,void 0);return n.setHours(0,0,0,0),n}function Hf(t,e,n){const[r,i]=In(void 0,t,e),s=tu(r),a=tu(i),o=+s-Jc(s),l=+a-Jc(a);return Math.round((o-l)/lm)}function WE(t,e){const n=Lt(t,void 0);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function YE(t,e){const n=Lt(t,void 0);return Hf(n,WE(n))+1}function ds(t,e){return ei(t,{...e,weekStartsOn:1})}function Ff(t,e){const n=Lt(t,void 0),r=n.getFullYear(),i=_e(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=ds(i),a=_e(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=ds(a);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function qE(t,e){const n=Ff(t),r=_e(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ds(r)}function XE(t,e){const n=Lt(t,void 0),r=+ds(n)-+qE(n);return Math.round(r/gd)+1}function Vf(t,e){var n,r,i,s;const a=Lt(t,e==null?void 0:e.in),o=a.getFullYear(),l=As(),c=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??((s=(i=l.locale)==null?void 0:i.options)==null?void 0:s.firstWeekContainsDate)??1,u=_e((e==null?void 0:e.in)||t,0);u.setFullYear(o+1,0,c),u.setHours(0,0,0,0);const h=ei(u,e),d=_e((e==null?void 0:e.in)||t,0);d.setFullYear(o,0,c),d.setHours(0,0,0,0);const f=ei(d,e);return+a>=+h?o+1:+a>=+f?o:o-1}function ZE(t,e){var n,r,i,s;const a=As(),o=(e==null?void 0:e.firstWeekContainsDate)??((r=(n=e==null?void 0:e.locale)==null?void 0:n.options)==null?void 0:r.firstWeekContainsDate)??a.firstWeekContainsDate??((s=(i=a.locale)==null?void 0:i.options)==null?void 0:s.firstWeekContainsDate)??1,l=Vf(t,e),c=_e((e==null?void 0:e.in)||t,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),ei(c,e)}function KE(t,e){const n=Lt(t,e==null?void 0:e.in),r=+ei(n,e)-+ZE(n,e);return Math.round(r/gd)+1}function St(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const on={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return St(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):St(n+1,2)},d(t,e){return St(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return St(t.getHours()%12||12,e.length)},H(t,e){return St(t.getHours(),e.length)},m(t,e){return St(t.getMinutes(),e.length)},s(t,e){return St(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return St(i,e.length)}},Gn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eu={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return on.y(t,e)},Y:function(t,e,n,r){const i=Vf(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return St(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):St(s,e.length)},R:function(t,e){const n=Ff(t);return St(n,e.length)},u:function(t,e){const n=t.getFullYear();return St(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return St(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return St(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return on.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return St(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=KE(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):St(i,e.length)},I:function(t,e,n){const r=XE(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):St(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):on.d(t,e)},D:function(t,e,n){const r=YE(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):St(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return St(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return St(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return St(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Gn.noon:r===0?i=Gn.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Gn.evening:r>=12?i=Gn.afternoon:r>=4?i=Gn.morning:i=Gn.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return on.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):on.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):St(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):St(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):on.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):on.s(t,e)},S:function(t,e){return on.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ru(r);case"XXXX":case"XX":return bn(r);case"XXXXX":case"XXX":default:return bn(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ru(r);case"xxxx":case"xx":return bn(r);case"xxxxx":case"xxx":default:return bn(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nu(r,":");case"OOOO":default:return"GMT"+bn(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nu(r,":");case"zzzz":default:return"GMT"+bn(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return St(r,e.length)},T:function(t,e,n){return St(+t,e.length)}};function nu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+St(s,2)}function ru(t,e){return t%60===0?(t>0?"-":"+")+St(Math.abs(t)/60,2):bn(t,e)}function bn(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=St(Math.trunc(r/60),2),s=St(r%60,2);return n+i+e+s}const iu=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zf=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},QE=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return iu(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",iu(r,e)).replace("{{time}}",zf(i,e))},JE={p:zf,P:QE},tS=/^D+$/,eS=/^Y+$/,nS=["D","DD","YY","YYYY"];function rS(t){return tS.test(t)}function iS(t){return eS.test(t)}function sS(t,e,n){const r=aS(t,e,n);if(console.warn(r),nS.includes(t))throw new RangeError(r)}function aS(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function oS(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lS(t){return!(!oS(t)&&typeof t!="number"||isNaN(+Lt(t)))}const cS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hS=/^'([^]*?)'?$/,dS=/''/g,fS=/[a-zA-Z]/;function to(t,e,n){var r,i,s,a,o,l,c,u;const h=As(),d=(n==null?void 0:n.locale)??h.locale??yd,f=(n==null?void 0:n.firstWeekContainsDate)??((i=(r=n==null?void 0:n.locale)==null?void 0:r.options)==null?void 0:i.firstWeekContainsDate)??h.firstWeekContainsDate??((a=(s=h.locale)==null?void 0:s.options)==null?void 0:a.firstWeekContainsDate)??1,p=(n==null?void 0:n.weekStartsOn)??((l=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??h.weekStartsOn??((u=(c=h.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,T=Lt(t,n==null?void 0:n.in);if(!lS(T))throw new RangeError("Invalid time value");let m=e.match(uS).map(w=>{const b=w[0];if(b==="p"||b==="P"){const v=JE[b];return v(w,d.formatLong)}return w}).join("").match(cS).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const b=w[0];if(b==="'")return{isToken:!1,value:pS(w)};if(eu[b])return{isToken:!0,value:w};if(b.match(fS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:w}});d.localize.preprocessor&&(m=d.localize.preprocessor(T,m));const y={firstWeekContainsDate:f,weekStartsOn:p,locale:d};return m.map(w=>{if(!w.isToken)return w.value;const b=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&iS(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&rS(b))&&sS(b,e,String(t));const v=eu[b[0]];return v(T,b,d.localize,y)}).join("")}function pS(t){const e=t.match(hS);return e?e[1].replace(dS,"'"):t}const ha=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function jf(t,e,n,r,i){const s=e===0,a=Number(to(new Date(t),"c"))===2,o=Number(to(new Date(t),"q"))===1,l=e!==0?n[e-1]:null;switch(r){case"15seconds":return s||Di(t)||$r(t,l)||ln(t);case"minute":return s||Di(t)||$r(t,l)||ln(t);case"30minutes":return s||Di(t)||$r(t,l)||ln(t);case"hourly":return s||Di(t)||$r(t,l)||ln(t);case"daily":return i?s||a||ln(t):s||$r(t,l)||ln(t);case"weekly":return s||a||ln(t);case"monthly":return s||ln(t);case"quarterly":return s||o;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function eo(t,e,n,r,i,s){const a=i.showDayName,o=r==="daily"&&a?"weekly":r,l=new Date(t),c=S(i,"timeIntervalFormats")[o],u=S(c,"primary"),h=S(c,"secondary"),d=jf(t,e,n,r,a);let f=d?u:h;r==="15seconds"&&l.getMilliseconds()!==0&&(f=f.replace("pp","h:mm:ss.SSS a"));const p=i.localeObject,{code:T,optionsObject:m}=s,y=m[r].type,w=m[r][d?"primary":"secondary"][f];if(r==="quarterly"||!w){const b=to(l,f,{locale:p}).split("").map(v=>{const g=Number(v);return v!==" "&&!Number.isNaN(g)?g.toLocaleString(T):v});return s[y](l,T,{},b.join(""))}else return s[y](l,T,w)}function fs(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function gS(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}function mS(t){const e=ha.reduce((n,[,r],i)=>{const s=ha[n][1],a=Math.abs(s-t),o=Math.abs(r-t);return a<o?n:i},0);return ha[e][0]}function no(t,e){if(pd[e])return e;if(t.length===1)return"15seconds";const n=gS(t),r=G_(n);return mS(r)}function Di(t){const{s:e,m:n,H:r}=fs(t);return r===0&&n===0&&e===0}function $r(t,e){const n=fs(t).M,r=fs(e).M;return n!==r}function ln(t){const{M:e,d:n,s:r,m:i,H:s}=fs(t);return e===1&&n===1&&s===0&&i===0&&r===0}function su(t){return t===void 0?"":t.toISOString()}var Pt=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(Pt||{});function vS(t,e){return t&&Qd(t,e,gi)}function yS(t,e){return function(n,r){if(n==null)return n;if(!Tr(n))return t(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var Gf=yS(vS);function _t(t){return function(){return t}}function qo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _S(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var a=t[i];e(r,a,n(a),t)}return r}function bS(t,e,n,r){return Gf(t,function(i,s,a){e(r,i,n(i),a)}),r}function wS(t,e){return function(n,r){var i=Qt(n)?_S:bS,s={};return i(n,t,Lo(r),s)}}function TS(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var ES=Object.prototype,SS=ES.hasOwnProperty,OS=wS(function(t,e,n){SS.call(t,n)?t[n].push(e):$s(t,n,[e])});function xS(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function MS(t){return t}var kS=Array.prototype,AS=kS.slice;function da(t){return()=>t}function CS(t,e,n){let r;for(;;){const i=gr(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function $S(t){return Math.max(1,Math.ceil(Math.log(xS(t))/Math.LN2)+1)}function DS(){var t=MS,e=ar,n=$S;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,o,l,c=new Array(a);for(s=0;s<a;++s)c[s]=t(i[s],s,i);var u=e(c),h=u[0],d=u[1],f=n(c,h,d);if(!Array.isArray(f)){const b=d,v=+f;if(e===ar&&([h,d]=CS(h,d,v)),f=ns(h,d,v),f[0]<=h&&(l=gr(h,d,v)),f[f.length-1]>=d)if(b>=d&&e===ar){const g=gr(h,d,v);isFinite(g)&&(g>0?d=(Math.floor(d/g)+1)*g:g<0&&(d=(Math.ceil(d*-g)+1)/-g))}else f.pop()}for(var p=f.length,T=0,m=p;f[T]<=h;)++T;for(;f[m-1]>d;)--m;(T||m<p)&&(f=f.slice(T,m),p=m-T);var y=new Array(p+1),w;for(s=0;s<=p;++s)w=y[s]=[],w.x0=s>0?f[s-1]:h,w.x1=s<p?f[s]:d;if(isFinite(l)){if(l>0)for(s=0;s<a;++s)(o=c[s])!=null&&h<=o&&o<=d&&y[Math.min(p,Math.floor((o-h)/l))].push(i[s]);else if(l<0){for(s=0;s<a;++s)if((o=c[s])!=null&&h<=o&&o<=d){const b=Math.floor((h-o)*l);y[Math.min(p,b+(f[b]<=o))].push(i[s])}}}else for(s=0;s<a;++s)(o=c[s])!=null&&h<=o&&o<=d&&y[nf(f,o,0,p)].push(i[s]);return y}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:da(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:da([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:da(Array.isArray(i)?AS.call(i):i),r):n},r}function au(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ou(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function LS(t,e){return t[e]}function IS(t){const e=[];return e.key=t,e}function fa(){var t=_t([]),e=ou,n=au,r=LS;function i(s){var a=Array.from(t.apply(this,arguments),IS),o,l=a.length,c=-1,u;for(const h of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(h,a[o].key,c,s)]).data=h;for(o=0,u=qo(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:_t(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_t(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?ou:typeof s=="function"?s:_t(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??au,i):n},i}function RS(t,e){if((l=t.length)>0)for(var n,r=0,i,s,a,o,l,c=t[e[0]].length;r<c;++r)for(a=o=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=s):s<0?(i[1]=o,i[0]=o+=s):(i[0]=0,i[1]=s)}function PS(t){const e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?` ${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}let Wf=class{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:s,number:a}=S(r,"locale"),o=S(r,"tabularRepModal","tableHeadingFormatter"),l=S(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c==null?void 0:c.getDomainAxisScaleType();let h;return u===ot.TIME&&(h=d=>s(d,i,{month:"short",day:"numeric",year:"numeric"})),[typeof o=="function"?o(e):e,...typeof l=="function"?l(n):n.map(d=>{h&&(d[1]=h(d[1]));for(const f in d){const p=d[f];typeof p=="number"&&(d[f]=a(p,i))}return d})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:s}=S(n,"data"),a=S(n,"axes");return e&&(r=r.filter(o=>e.includes(o[s]))),a&&Object.keys(a).forEach(o=>{const l=a[o].mapsTo,c=a[o].scaleType;if((c===ot.LINEAR||c===ot.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&a[o].domain)if(c===ot.LABELS)r=r.filter(u=>a[o].domain.includes(u[l]));else{const[u,h]=a[o].domain;r=r.filter(d=>!(l in d)||d[l]>=u&&d[l]<=h)}}),r.filter(o=>i.find(l=>l.name===o[s]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=jt.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(s=>r.find(a=>a.name===s[i]&&a.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(Ns(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return S(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=jt.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return OS(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),s=n.axes[r],{groupMapsTo:a}=n.data,{bins:o=$E.defaultBins}=s,l=Array.isArray(o),c=DS().value(f=>f[i]).thresholds(o)(e);if(l)c[c.length-1].x1=o[o.length-1];else{const f=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+f}const u=l?[o[0],o[o.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(f=>f[a]))),d=[];return c.forEach(f=>{const p=`${f.x0}-${f.x1}`,T=this.aggregateBinDataByGroup(f);h.forEach(m=>{d.push({group:m,key:p,value:T[m]||0,bin:f.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),s=this.getDataValuesGroupedByKeys({bins:i});return fa().keys(r)(s).map((a,o)=>Object.keys(a).filter(l=>!isNaN(l)).map(l=>{const c=a[l];return c[n]=r[o],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(s=>{const a=s[i];r[a]!==null&&r[a]!==void 0?r[a].push(s):r[a]=[s]}),Object.keys(r).map(s=>({name:s,data:r[s]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let s;e?s=e.map(l=>`${l.x0}:${l.x1}`):s=si(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?su(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const a=this.services.cartesianScales.domainAxisPosition,o=r.axes[a].scaleType;return o===ot.TIME?s.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(o===ot.LOG||o===ot.LINEAR)&&s.sort((l,c)=>l-c),s}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getDisplayData(n),a=this.getDataGroupNames(),o=this.getStackKeys({bins:e,groups:n});return e?o.map(l=>{const[c,u]=l.split(":"),h={x0:c,x1:u},d=e.find(f=>f.x0.toString()===c.toString());return a.forEach(f=>{h[f]=d.filter(p=>p[i]===f).length}),h}):o.map(l=>{const c={sharedStackKey:l};return a.forEach(u=>{const h=s.find(f=>{const p=this.services.cartesianScales.getDomainIdentifier(f);return f[i]===u&&Object.prototype.hasOwnProperty.call(f,p)&&(f[p]instanceof Date?su(f[p])===l:f[p].toString()===l)}),d=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[d]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:s}=i.data,a=this.getActiveDataGroupNames(n),o=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=TS(o.map(c=>[c.sharedStackKey,0]));o.forEach(c=>{a.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),o.forEach(c=>{a.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?fa().offset(RS):fa()).keys(a)(o).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[s]=a[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();Bf(n,e),this.set({options:pt(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent($.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=jt.items.status,i=this.getDataGroups(),s=i.some(c=>c.status===r),a=i.filter(c=>c.status===n);if(s)if(a.length===1&&a[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const o=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=o.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent($.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const s=this.getOptions();return s.getIsFilled?s.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),s=S(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,s):s}getStrokeColor(e,n,r){const i=this.getOptions(),s=S(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,s):s}isUserProvidedColorScaleValid(){const e=S(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=e;return r.forEach(s=>{s.data.forEach((a,o)=>{let l;const c=S(s,"label");if(c===null){const h=S(i,o);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[o]};isNaN(a)?(u.value=a.value,u.date=a.date):u.value=a,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(s=>s.map(a=>`"${(a==="&ndash;"?"–":a).split(/[,;'"`]/).map(o=>PS(o)).join("")}"`)).map(s=>s.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=S(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=jt.items.status,s=this.getOptions(),a=si(e.map(l=>l[n]));s.data.selectedGroups.length&&(s.data.selectedGroups.every(l=>a.includes(l))||(s.data.selectedGroups=[]));const o=l=>!s.data.selectedGroups.length||s.data.selectedGroups.includes(l)?r:i;return a.map(l=>({name:l,status:o(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=S(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=S(this.getOptions(),"color","pairing");let n=S(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=S(e,"option");const i=CE.pairingOptions,s=n>5?14:n,a=`${s}-color`;r=r<=i[a]?r:1;const o=this.allDataGroups.map((l,c)=>`${s}-${r}-${c%14+1}`);this.colorClassNames=Go().range(o).domain(this.allDataGroups)}};class NS extends Wf{constructor(e){super(e),this.axisFlavor=yo.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(s=>{const a=i[s];e.scales[a]?i[s]={position:a,label:e.getScaleLabel(a),identifier:S(n,"axes",a,"mapsTo")}:i[s]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{primaryDomain:i,primaryRange:s,secondaryDomain:a,secondaryRange:o}=this.assignRangeAndDomains(),{number:l,code:c}=S(this.getOptions(),"locale"),u=["Group",i.label,s.label,...a?[a.label]:[],...o?[o.label]:[]],h=e.map(d=>[d[r],d[i.identifier]===null?"&ndash;":d[i.identifier],d[s.identifier]===null||isNaN(d[s.identifier])?"&ndash;":l(d[s.identifier],c),...a?[d[a.identifier]===null?"&ndash;":d[a.identifier]]:[],...o?[d[o.identifier]===null||isNaN(d[o.identifier])?"&ndash;":d[o.identifier]]:[]]);return super.formatTable({headers:u,cells:h})}setData(e){let n;if(e&&(n=super.setData(e),S(this.getOptions(),"zoomBar",H.TOP,"enabled"))){const r=S(this.getOptions(),"zoomBar",H.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(Ns(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const s=i.getDomainIdentifier(),a=i.getRangeIdentifier();let o=n.map(l=>l[s].getTime());o=si(o).sort(),r=o.map(l=>{let c=0;const u={};return n.forEach(h=>{h[s].getTime()===l&&(c+=h[a])}),u[s]=new Date(l),u[a]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys(H).forEach(i=>{const s=H[i],a=n.axes[s];if(a&&a.scaleType===ot.TIME){const o=a.mapsTo;(o!==null||o!==void 0)&&r.push(o)}}),r.length>0&&e.forEach(i=>{r.forEach(s=>{S(i,s,"getTime")===null&&(i[s]=new Date(i[s]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e),e}}var BS=/\s/;function US(t){for(var e=t.length;e--&&BS.test(t.charAt(e)););return e}var HS=/^\s+/;function FS(t){return t&&t.slice(0,US(t)+1).replace(HS,"")}var lu=NaN,VS=/^[-+]0x[0-9a-f]+$/i,zS=/^0b[01]+$/i,jS=/^0o[0-7]+$/i,GS=parseInt;function cr(t){if(typeof t=="number")return t;if(Cs(t))return lu;if(we(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=we(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FS(t);var n=zS.test(t);return n||jS.test(t)?GS(t.slice(2),n?2:8):VS.test(t)?lu:+t}var pa=function(){return Ce.Date.now()},WS="Expected a function",YS=Math.max,qS=Math.min;function XS(t,e,n){var r,i,s,a,o,l,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(WS);e=cr(e)||0,we(n)&&(u=!!n.leading,h="maxWait"in n,s=h?YS(cr(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(_){var E=r,x=i;return r=i=void 0,c=_,a=t.apply(x,E),a}function p(_){return c=_,o=setTimeout(y,e),u?f(_):a}function T(_){var E=_-l,x=_-c,A=e-E;return h?qS(A,s-x):A}function m(_){var E=_-l,x=_-c;return l===void 0||E>=e||E<0||h&&x>=s}function y(){var _=pa();if(m(_))return w(_);o=setTimeout(y,T(_))}function w(_){return o=void 0,d&&r?f(_):(r=i=void 0,a)}function b(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function v(){return o===void 0?a:w(pa())}function g(){var _=pa(),E=m(_);if(r=arguments,i=this,l=_,E){if(o===void 0)return p(l);if(h)return clearTimeout(o),o=setTimeout(y,e),f(l)}return o===void 0&&(o=setTimeout(y,e)),a}return g.cancel=b,g.flush=v,g}function ZS(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function z(t){return typeof t=="string"?new fe([[document.querySelector(t)]],[document.documentElement]):new fe([[t]],gf)}function Xo(){var t=Go().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var d=e().length,f=i<r,p=f?i:r,T=f?r:i;s=(T-p)/Math.max(1,d-l+c*2),o&&(s=Math.floor(s)),p+=(T-p-s*(d-l))*u,a=s*(1-l),o&&(p=Math.round(p),a=Math.round(a));var m=ZS(d).map(function(y){return p+s*y});return n(f?m.reverse():m)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(d){return arguments.length?(o=!!d,h()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),h()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),h()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,h()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),h()):u},t.copy=function(){return Xo(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},bi.apply(h(),arguments)}function Yf(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}const ga=new Date,ma=new Date;function Ut(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Ut(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(ga.setTime(+s),ma.setTime(+a),t(ga),t(ma),Math.floor(n(ga,ma))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const ps=Ut(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ps.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ut(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ps);ps.range;const Ke=1e3,ye=Ke*60,Qe=ye*60,en=Qe*24,Zo=en*7,cu=en*30,va=en*365,nr=Ut(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ke)},(t,e)=>(e-t)/Ke,t=>t.getUTCSeconds());nr.range;const Ko=Ut(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ke)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getMinutes());Ko.range;const KS=Ut(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getUTCMinutes());KS.range;const Qo=Ut(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ke-t.getMinutes()*ye)},(t,e)=>{t.setTime(+t+e*Qe)},(t,e)=>(e-t)/Qe,t=>t.getHours());Qo.range;const QS=Ut(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Qe)},(t,e)=>(e-t)/Qe,t=>t.getUTCHours());QS.range;const wi=Ut(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ye)/en,t=>t.getDate()-1);wi.range;const Jo=Ut(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/en,t=>t.getUTCDate()-1);Jo.range;const JS=Ut(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/en,t=>Math.floor(t/en));JS.range;function Bn(t){return Ut(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ye)/Zo)}const Gs=Bn(0),gs=Bn(1),tO=Bn(2),eO=Bn(3),_r=Bn(4),nO=Bn(5),rO=Bn(6);Gs.range;gs.range;tO.range;eO.range;_r.range;nO.range;rO.range;function Un(t){return Ut(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Zo)}const qf=Un(0),ms=Un(1),iO=Un(2),sO=Un(3),br=Un(4),aO=Un(5),oO=Un(6);qf.range;ms.range;iO.range;sO.range;br.range;aO.range;oO.range;const tl=Ut(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());tl.range;const lO=Ut(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());lO.range;const nn=Ut(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nn.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ut(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});nn.range;const Ln=Ut(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ln.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ut(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ln.range;function cO(t,e,n,r,i,s){const a=[[nr,1,Ke],[nr,5,5*Ke],[nr,15,15*Ke],[nr,30,30*Ke],[s,1,ye],[s,5,5*ye],[s,15,15*ye],[s,30,30*ye],[i,1,Qe],[i,3,3*Qe],[i,6,6*Qe],[i,12,12*Qe],[r,1,en],[r,2,2*en],[n,1,Zo],[e,1,cu],[e,3,3*cu],[t,1,va]];function o(c,u,h){const d=u<c;d&&([c,u]=[u,c]);const f=h&&typeof h.range=="function"?h:l(c,u,h),p=f?f.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,h){const d=Math.abs(u-c)/h,f=Io(([,,m])=>m).right(a,d);if(f===a.length)return t.every(Ga(c/va,u/va,h));if(f===0)return ps.every(Math.max(Ga(c,u,h),1));const[p,T]=a[d/a[f-1][2]<a[f][2]/d?f-1:f];return p.every(T)}return[o,l]}const[uO,hO]=cO(nn,tl,Gs,wi,Qo,Ko);function ya(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _a(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Dr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function dO(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Lr(i),u=Ir(i),h=Lr(s),d=Ir(s),f=Lr(a),p=Ir(a),T=Lr(o),m=Ir(o),y=Lr(l),w=Ir(l),b={a:G,A:X,b:lt,B:rt,c:null,d:gu,e:gu,f:RO,g:GO,G:YO,H:DO,I:LO,j:IO,L:Xf,m:PO,M:NO,p:D,q:I,Q:yu,s:_u,S:BO,u:UO,U:HO,V:FO,w:VO,W:zO,x:null,X:null,y:jO,Y:WO,Z:qO,"%":vu},v={a:q,A:dt,b:st,B:j,c:null,d:mu,e:mu,f:QO,g:lx,G:ux,H:XO,I:ZO,j:KO,L:Kf,m:JO,M:tx,p:et,q:ct,Q:yu,s:_u,S:ex,u:nx,U:rx,V:ix,w:sx,W:ax,x:null,X:null,y:ox,Y:cx,Z:hx,"%":vu},g={a:k,A:M,b:F,B:N,c:Y,d:fu,e:fu,f:kO,g:du,G:hu,H:pu,I:pu,j:SO,L:MO,m:EO,M:OO,p:A,q:TO,Q:CO,s:$O,S:xO,u:vO,U:yO,V:_O,w:mO,W:bO,x:nt,X:K,y:du,Y:hu,Z:wO,"%":AO};b.x=_(n,b),b.X=_(r,b),b.c=_(e,b),v.x=_(n,v),v.X=_(r,v),v.c=_(e,v);function _(B,R){return function(V){var L=[],ft=-1,ut=0,Ct=B.length,Dt,it,yt;for(V instanceof Date||(V=new Date(+V));++ft<Ct;)B.charCodeAt(ft)===37&&(L.push(B.slice(ut,ft)),(it=uu[Dt=B.charAt(++ft)])!=null?Dt=B.charAt(++ft):it=Dt==="e"?" ":"0",(yt=R[Dt])&&(Dt=yt(V,it)),L.push(Dt),ut=ft+1);return L.push(B.slice(ut,ft)),L.join("")}}function E(B,R){return function(V){var L=Dr(1900,void 0,1),ft=x(L,B,V+="",0),ut,Ct;if(ft!=V.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(R&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(ut=_a(Dr(L.y,0,1)),Ct=ut.getUTCDay(),ut=Ct>4||Ct===0?ms.ceil(ut):ms(ut),ut=Jo.offset(ut,(L.V-1)*7),L.y=ut.getUTCFullYear(),L.m=ut.getUTCMonth(),L.d=ut.getUTCDate()+(L.w+6)%7):(ut=ya(Dr(L.y,0,1)),Ct=ut.getDay(),ut=Ct>4||Ct===0?gs.ceil(ut):gs(ut),ut=wi.offset(ut,(L.V-1)*7),L.y=ut.getFullYear(),L.m=ut.getMonth(),L.d=ut.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),Ct="Z"in L?_a(Dr(L.y,0,1)).getUTCDay():ya(Dr(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(Ct+5)%7:L.w+L.U*7-(Ct+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,_a(L)):ya(L)}}function x(B,R,V,L){for(var ft=0,ut=R.length,Ct=V.length,Dt,it;ft<ut;){if(L>=Ct)return-1;if(Dt=R.charCodeAt(ft++),Dt===37){if(Dt=R.charAt(ft++),it=g[Dt in uu?R.charAt(ft++):Dt],!it||(L=it(B,V,L))<0)return-1}else if(Dt!=V.charCodeAt(L++))return-1}return L}function A(B,R,V){var L=c.exec(R.slice(V));return L?(B.p=u.get(L[0].toLowerCase()),V+L[0].length):-1}function k(B,R,V){var L=f.exec(R.slice(V));return L?(B.w=p.get(L[0].toLowerCase()),V+L[0].length):-1}function M(B,R,V){var L=h.exec(R.slice(V));return L?(B.w=d.get(L[0].toLowerCase()),V+L[0].length):-1}function F(B,R,V){var L=y.exec(R.slice(V));return L?(B.m=w.get(L[0].toLowerCase()),V+L[0].length):-1}function N(B,R,V){var L=T.exec(R.slice(V));return L?(B.m=m.get(L[0].toLowerCase()),V+L[0].length):-1}function Y(B,R,V){return x(B,e,R,V)}function nt(B,R,V){return x(B,n,R,V)}function K(B,R,V){return x(B,r,R,V)}function G(B){return a[B.getDay()]}function X(B){return s[B.getDay()]}function lt(B){return l[B.getMonth()]}function rt(B){return o[B.getMonth()]}function D(B){return i[+(B.getHours()>=12)]}function I(B){return 1+~~(B.getMonth()/3)}function q(B){return a[B.getUTCDay()]}function dt(B){return s[B.getUTCDay()]}function st(B){return l[B.getUTCMonth()]}function j(B){return o[B.getUTCMonth()]}function et(B){return i[+(B.getUTCHours()>=12)]}function ct(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var R=_(B+="",b);return R.toString=function(){return B},R},parse:function(B){var R=E(B+="",!1);return R.toString=function(){return B},R},utcFormat:function(B){var R=_(B+="",v);return R.toString=function(){return B},R},utcParse:function(B){var R=E(B+="",!0);return R.toString=function(){return B},R}}}var uu={"-":"",_:" ",0:"0"},Vt=/^\s*\d+/,fO=/^%/,pO=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function gO(t){return t.replace(pO,"\\$&")}function Lr(t){return new RegExp("^(?:"+t.map(gO).join("|")+")","i")}function Ir(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function mO(t,e,n){var r=Vt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vO(t,e,n){var r=Vt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function yO(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function _O(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function bO(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function hu(t,e,n){var r=Vt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function du(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wO(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function TO(t,e,n){var r=Vt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function EO(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function fu(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function SO(t,e,n){var r=Vt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function pu(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function OO(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xO(t,e,n){var r=Vt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function MO(t,e,n){var r=Vt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function kO(t,e,n){var r=Vt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function AO(t,e,n){var r=fO.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function CO(t,e,n){var r=Vt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $O(t,e,n){var r=Vt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function gu(t,e){return vt(t.getDate(),e,2)}function DO(t,e){return vt(t.getHours(),e,2)}function LO(t,e){return vt(t.getHours()%12||12,e,2)}function IO(t,e){return vt(1+wi.count(nn(t),t),e,3)}function Xf(t,e){return vt(t.getMilliseconds(),e,3)}function RO(t,e){return Xf(t,e)+"000"}function PO(t,e){return vt(t.getMonth()+1,e,2)}function NO(t,e){return vt(t.getMinutes(),e,2)}function BO(t,e){return vt(t.getSeconds(),e,2)}function UO(t){var e=t.getDay();return e===0?7:e}function HO(t,e){return vt(Gs.count(nn(t)-1,t),e,2)}function Zf(t){var e=t.getDay();return e>=4||e===0?_r(t):_r.ceil(t)}function FO(t,e){return t=Zf(t),vt(_r.count(nn(t),t)+(nn(t).getDay()===4),e,2)}function VO(t){return t.getDay()}function zO(t,e){return vt(gs.count(nn(t)-1,t),e,2)}function jO(t,e){return vt(t.getFullYear()%100,e,2)}function GO(t,e){return t=Zf(t),vt(t.getFullYear()%100,e,2)}function WO(t,e){return vt(t.getFullYear()%1e4,e,4)}function YO(t,e){var n=t.getDay();return t=n>=4||n===0?_r(t):_r.ceil(t),vt(t.getFullYear()%1e4,e,4)}function qO(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function mu(t,e){return vt(t.getUTCDate(),e,2)}function XO(t,e){return vt(t.getUTCHours(),e,2)}function ZO(t,e){return vt(t.getUTCHours()%12||12,e,2)}function KO(t,e){return vt(1+Jo.count(Ln(t),t),e,3)}function Kf(t,e){return vt(t.getUTCMilliseconds(),e,3)}function QO(t,e){return Kf(t,e)+"000"}function JO(t,e){return vt(t.getUTCMonth()+1,e,2)}function tx(t,e){return vt(t.getUTCMinutes(),e,2)}function ex(t,e){return vt(t.getUTCSeconds(),e,2)}function nx(t){var e=t.getUTCDay();return e===0?7:e}function rx(t,e){return vt(qf.count(Ln(t)-1,t),e,2)}function Qf(t){var e=t.getUTCDay();return e>=4||e===0?br(t):br.ceil(t)}function ix(t,e){return t=Qf(t),vt(br.count(Ln(t),t)+(Ln(t).getUTCDay()===4),e,2)}function sx(t){return t.getUTCDay()}function ax(t,e){return vt(ms.count(Ln(t)-1,t),e,2)}function ox(t,e){return vt(t.getUTCFullYear()%100,e,2)}function lx(t,e){return t=Qf(t),vt(t.getUTCFullYear()%100,e,2)}function cx(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function ux(t,e){var n=t.getUTCDay();return t=n>=4||n===0?br(t):br.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function hx(){return"+0000"}function vu(){return"%"}function yu(t){return+t}function _u(t){return Math.floor(+t/1e3)}var Wn,Jf;dx({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dx(t){return Wn=dO(t),Jf=Wn.format,Wn.parse,Wn.utcFormat,Wn.utcParse,Wn}function fx(t){return new Date(t)}function px(t){return t instanceof Date?+t:+new Date(+t)}function tp(t,e,n,r,i,s,a,o,l,c){var u=If(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),T=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),w=c("%b %d"),b=c("%B"),v=c("%Y");function g(_){return(l(_)<_?f:o(_)<_?p:a(_)<_?T:s(_)<_?m:r(_)<_?i(_)<_?y:w:n(_)<_?b:v)(_)}return u.invert=function(_){return new Date(h(_))},u.domain=function(_){return arguments.length?d(Array.from(_,px)):d().map(fx)},u.ticks=function(_){var E=d();return t(E[0],E[E.length-1],_??10)},u.tickFormat=function(_,E){return E==null?g:c(E)},u.nice=function(_){var E=d();return(!_||typeof _.range!="function")&&(_=e(E[0],E[E.length-1],_??10)),_?d(Yf(E,_)):u},u.copy=function(){return Wo(u,tp(t,e,n,r,i,s,a,o,l,c))},u}function ep(){return bi.apply(tp(uO,hO,nn,tl,Gs,wi,Qo,Ko,nr,Jf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const bu=Math.abs,Yt=Math.atan2,_n=Math.cos,gx=Math.max,ba=Math.min,Le=Math.sin,rr=Math.sqrt,Zt=1e-12,hi=Math.PI,vs=hi/2,mx=2*hi;function vx(t){return t>1?0:t<-1?hi:Math.acos(t)}function wu(t){return t>=1?vs:t<=-1?-vs:Math.asin(t)}function np(t){this._context=t}np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function el(t){return new np(t)}function mn(){}function rp(t){this._context=t}rp.prototype={areaStart:mn,areaEnd:mn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yx(t){return new rp(t)}function _x(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const bx=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function fn(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let Rr=null;function ip(t={}){return Rr||(t.includeStyleProperties?(Rr=t.includeStyleProperties,Rr):(Rr=fn(window.getComputedStyle(document.documentElement)),Rr))}function ys(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function wx(t){const e=ys(t,"border-left-width"),n=ys(t,"border-right-width");return t.clientWidth+e+n}function Tx(t){const e=ys(t,"border-top-width"),n=ys(t,"border-bottom-width");return t.clientHeight+e+n}function sp(t,e={}){const n=e.width||wx(t),r=e.height||Tx(t);return{width:n,height:r}}function Ex(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const ce=16384;function Sx(t){(t.width>ce||t.height>ce)&&(t.width>ce&&t.height>ce?t.width>t.height?(t.height*=ce/t.width,t.width=ce):(t.width*=ce/t.height,t.height=ce):t.width>ce?(t.height*=ce/t.width,t.width=ce):(t.width*=ce/t.height,t.height=ce))}function _s(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Ox(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function xx(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),Ox(i)}const oe=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||oe(n,e)};function Mx(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function kx(t,e){return ip(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Ax(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?Mx(n):kx(n,r);return document.createTextNode(`${i}{${s}}`)}function Tu(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const a=bx();try{e.className=`${e.className} ${a}`}catch{return}const o=document.createElement("style");o.appendChild(Ax(a,n,i,r)),e.appendChild(o)}function Cx(t,e,n){Tu(t,e,":before",n),Tu(t,e,":after",n)}const Eu="application/font-woff",Su="image/jpeg",$x={woff:Eu,woff2:Eu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Su,jpeg:Su,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Dx(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function nl(t){const e=Dx(t).toLowerCase();return $x[e]||""}function Lx(t){return t.split(/,/)[1]}function ro(t){return t.search(/^(data:)/)!==-1}function Ix(t,e){return`data:${e};base64,${t}`}async function ap(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,a)=>{const o=new FileReader;o.onerror=a,o.onloadend=()=>{try{s(n({res:r,result:o.result}))}catch(l){a(l)}},o.readAsDataURL(i)})}const wa={};function Rx(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function rl(t,e,n){const r=Rx(t,e,n.includeQueryParams);if(wa[r]!=null)return wa[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await ap(t,n.fetchRequestInit,({res:a,result:o})=>(e||(e=a.headers.get("Content-Type")||""),Lx(o)));i=Ix(s,e)}catch(s){i=n.imagePlaceholder||"";let a=`Failed to fetch resource: ${t}`;s&&(a=typeof s=="string"?s:s.message),a&&console.warn(a)}return wa[r]=i,i}async function Px(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):_s(e)}async function Nx(t,e){if(t.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,a==null||a.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return _s(o)}const n=t.poster,r=nl(n),i=await rl(n,r,e);return _s(i)}async function Bx(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Ws(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function Ux(t,e){return oe(t,HTMLCanvasElement)?Px(t):oe(t,HTMLVideoElement)?Nx(t,e):oe(t,HTMLIFrameElement)?Bx(t,e):t.cloneNode(op(t))}const Hx=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",op=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Fx(t,e,n){var r,i;if(op(e))return e;let s=[];return Hx(t)&&t.assignedNodes?s=fn(t.assignedNodes()):oe(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?s=fn(t.contentDocument.body.childNodes):s=fn(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||oe(t,HTMLVideoElement)||await s.reduce((a,o)=>a.then(()=>Ws(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function Vx(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):ip(n).forEach(s=>{let a=i.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),oe(t,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),r.setProperty(s,a,i.getPropertyPriority(s))})}function zx(t,e){oe(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),oe(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function jx(t,e){if(oe(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Gx(t,e,n){return oe(e,Element)&&(Vx(t,e,n),Cx(t,e,n),zx(t,e),jx(t,e)),e}async function Wx(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const o=t.querySelector(a),l=document.querySelector(a);!o&&l&&!r[a]&&(r[a]=await Ws(l,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const o=document.createElementNS(s,"defs");a.appendChild(o);for(let l=0;l<i.length;l++)o.appendChild(i[l]);t.appendChild(a)}return t}async function Ws(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>Ux(r,e)).then(r=>Fx(t,r,e)).then(r=>Gx(t,r,e)).then(r=>Wx(r,e))}const lp=/url\((['"]?)([^'"]+?)\1\)/g,Yx=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,qx=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Xx(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Zx(t){const e=[];return t.replace(lp,(n,r,i)=>(e.push(i),n)),e.filter(n=>!ro(n))}async function Kx(t,e,n,r,i){try{const s=n?_x(e,n):e,a=nl(e);let o;return i||(o=await rl(s,a,r)),t.replace(Xx(e),`$1${o}$3`)}catch{}return t}function Qx(t,{preferredFontFormat:e}){return e?t.replace(qx,n=>{for(;;){const[r,,i]=Yx.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function cp(t){return t.search(lp)!==-1}async function up(t,e,n){if(!cp(t))return t;const r=Qx(t,n);return Zx(r).reduce((i,s)=>i.then(a=>Kx(a,s,e,n)),Promise.resolve(r))}async function Yn(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await up(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function Jx(t,e){await Yn("background",t,e)||await Yn("background-image",t,e),await Yn("mask",t,e)||await Yn("-webkit-mask",t,e)||await Yn("mask-image",t,e)||await Yn("-webkit-mask-image",t,e)}async function tM(t,e){const n=oe(t,HTMLImageElement);if(!(n&&!ro(t.src))&&!(oe(t,SVGImageElement)&&!ro(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await rl(r,nl(r),e);await new Promise((s,a)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...l)=>{try{s(e.onImageErrorHandler(...l))}catch(c){a(c)}}:a;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function eM(t,e){const n=fn(t.childNodes).map(r=>hp(r,e));await Promise.all(n).then(()=>t)}async function hp(t,e){oe(t,Element)&&(await Jx(t,e),await tM(t,e),await eM(t,e))}function nM(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const Ou={};async function xu(t){let e=Ou[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},Ou[t]=e,e}async function Mu(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),ap(a,e.fetchRequestInit,({result:o})=>(n=n.replace(s,`url(${o})`),[s,o]))});return Promise.all(i).then(()=>n)}function ku(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(a,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=o.exec(r),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function rM(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{fn(i.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let o=a+1;const l=s.href,c=xu(l).then(u=>Mu(u,e)).then(u=>ku(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?o+=1:i.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:h,error:d})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(s){const a=t.find(o=>o.href==null)||document.styleSheets[0];i.href!=null&&r.push(xu(i.href).then(o=>Mu(o,e)).then(o=>ku(o).forEach(l=>{a.insertRule(l,a.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{fn(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function iM(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>cp(e.style.getPropertyValue("src")))}async function sM(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=fn(t.ownerDocument.styleSheets),r=await rM(n,e);return iM(r)}function dp(t){return t.trim().replace(/["']/g,"")}function aM(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(i=>{e.add(dp(i))}),Array.from(r.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(t),e}async function oM(t,e){const n=await sM(t,e),r=aM(t);return(await Promise.all(n.filter(i=>r.has(dp(i.style.fontFamily))).map(i=>{const s=i.parentStyleSheet?i.parentStyleSheet.href:null;return up(i.cssText,s,e)}))).join(`
`)}async function lM(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await oM(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function cM(t,e={}){const{width:n,height:r}=sp(t,e),i=await Ws(t,e,!0);return await lM(i,e),await hp(i,e),nM(i,e),await xx(i,n,r)}async function fp(t,e={}){const{width:n,height:r}=sp(t,e),i=await cM(t,e),s=await _s(i),a=document.createElement("canvas"),o=a.getContext("2d"),l=e.pixelRatio||Ex(),c=e.canvasWidth||n,u=e.canvasHeight||r;return a.width=c*l,a.height=u*l,e.skipAutoScale||Sx(a),a.style.width=`${c}`,a.style.height=`${u}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(s,0,0,a.width,a.height),a}async function uM(t,e={}){return(await fp(t,e)).toDataURL()}async function hM(t,e={}){return(await fp(t,e)).toDataURL("image/jpeg",e.quality||1)}class an{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const dM="DONT_STYLE_ME_css_styles_verifier";class W extends an{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=z(e));const r={width:0,height:0},i=d=>{d&&Object.keys(r).forEach(f=>{if(d[f]){const p=d[f],T=parseFloat(p);p&&T>r[f]&&(""+p).indexOf("%")===-1&&(r[f]=T)}})},s={width:e.attr("width"),height:e.attr("height")},a=e.node();let o,l,c,u;try{typeof a.getBBox=="function"&&(o=a.getBBox(),l={width:o.width,height:o.height})}catch(d){console.error(d)}try{typeof(a==null?void 0:a.getBoundingClientRect)=="function"&&(c=a.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(d){console.error(d)}let h;if(a instanceof SVGSVGElement&&(h={width:a.clientWidth,height:a.clientHeight}),n){if(n.useAttrs&&(i(s),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const d={width:S(e.node(),"width","baseVal","value"),height:S(e.node(),"height","baseVal","value")};i(d)}catch{i(h),i(l),i(s)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),s,a;return i.length===2?(s=i[0],i=i[1].split("."),a=i[0]):(i=n.split("."),s=i[0]),e.append(s).attr("id",a).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),s=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-s.left,r.top=i.top-s.top}catch(a){console.error(a)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=S(e,"style","prefix"),r=z(this.getHolder()).append("div").classed(`${se}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",dM),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),z(this.getHolder()).classed(`${se}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=z(r);i.classed("filled",!0),hM(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var a;let o="myChart";const l=S(n,"fileDownload","fileName");typeof l=="function"?o=l("jpg"):typeof l=="string"&&(o=l),(a=e.services.files)==null||a.downloadImage(s,`${o}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=z(r);i.classed("filled",!0),uM(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var a;let o="myChart";const l=S(n,"fileDownload","fileName");typeof l=="function"?o=l("png"):typeof l=="string"&&(o=l),(a=e.services.files)==null||a.downloadImage(s,`${o}.png`),i.classed("filled",!1)}).catch(function(s){console.error("oops, something went wrong!",s)})}isFullScreenMode(){return z(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();z(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=z(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=W.getSVGElementSize(z(this.mainContainer),{useBBox:!0}),n=z(this.mainContainer).attr("class"),r=z(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(s){i+=Number(W.getSVGElementSize(z(s),{useBBox:!0}).height)}),i<=e?z(this.mainContainer).attr("height",i):z(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&z(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent($.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent($.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=XS(()=>{var s;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(s=this.services.events)==null||s.dispatchEvent($.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}class di extends an{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:di.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}function fM(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function pM(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=cr(n),n=n===n?n:0),e!==void 0&&(e=cr(e),e=e===e?e:0),fM(cr(t),e,n)}var gM="Expected a function";function mM(t,e,n){if(typeof t!="function")throw new TypeError(gM);return setTimeout(function(){t.apply(void 0,n)},e)}To(function(t,e,n){return mM(t,cr(e)||0,n)});function vM(t,e){return Bs(t,e)}function yM(t,e){var n;return Gf(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function _M(t,e,n){var r=Qt(t)?Yd:yM;return r(t,Lo(e))}function bM(t){return t}var zi=1,ji=2,io=3,jr=4,Au=1e-6;function wM(t){return"translate("+t+",0)"}function TM(t){return"translate(0,"+t+")"}function EM(t){return e=>+t(e)}function SM(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function OM(){return!this.__axis}function Ys(t,e){var n=[],r=null,i=null,s=6,a=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===zi||t===jr?-1:1,u=t===jr||t===ji?"x":"y",h=t===zi||t===io?wM:TM;function d(f){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),T=i??(e.tickFormat?e.tickFormat.apply(e,n):bM),m=Math.max(s,0)+o,y=e.range(),w=+y[0]+l,b=+y[y.length-1]+l,v=(e.bandwidth?SM:EM)(e.copy(),l),g=f.selection?f.selection():f,_=g.selectAll(".domain").data([null]),E=g.selectAll(".tick").data(p,e).order(),x=E.exit(),A=E.enter().append("g").attr("class","tick"),k=E.select("line"),M=E.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(A),k=k.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),M=M.merge(A.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",t===zi?"0em":t===io?"0.71em":"0.32em")),f!==g&&(_=_.transition(f),E=E.transition(f),k=k.transition(f),M=M.transition(f),x=x.transition(f).attr("opacity",Au).attr("transform",function(F){return isFinite(F=v(F))?h(F+l):this.getAttribute("transform")}),A.attr("opacity",Au).attr("transform",function(F){var N=this.parentNode.__axis;return h((N&&isFinite(N=N(F))?N:v(F))+l)})),x.remove(),_.attr("d",t===jr||t===ji?a?"M"+c*a+","+w+"H"+l+"V"+b+"H"+c*a:"M"+l+","+w+"V"+b:a?"M"+w+","+c*a+"V"+l+"H"+b+"V"+c*a:"M"+w+","+l+"H"+b),E.attr("opacity",1).attr("transform",function(F){return h(v(F)+l)}),k.attr(u+"2",c*s),M.attr(u,c*m).text(T),g.filter(OM).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ji?"start":t===jr?"end":"middle"),g.each(function(){this.__axis=v})}return d.scale=function(f){return arguments.length?(e=f,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),d):n.slice()},d.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),d):r&&r.slice()},d.tickFormat=function(f){return arguments.length?(i=f,d):i},d.tickSize=function(f){return arguments.length?(s=a=+f,d):s},d.tickSizeInner=function(f){return arguments.length?(s=+f,d):s},d.tickSizeOuter=function(f){return arguments.length?(a=+f,d):a},d.tickPadding=function(f){return arguments.length?(o=+f,d):o},d.offset=function(f){return arguments.length?(l=+f,d):l},d}function xM(t){return Ys(zi,t)}function MM(t){return Ys(ji,t)}function pp(t){return Ys(io,t)}function gp(t){return Ys(jr,t)}const so={capture:!0,passive:!1};function ao(t){t.preventDefault(),t.stopImmediatePropagation()}function kM(t){var e=t.document.documentElement,n=z(t).on("dragstart.drag",ao,so);"onselectstart"in e?n.on("selectstart.drag",ao,so):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function AM(t,e){var n=t.document.documentElement,r=z(t).on("dragstart.drag",null);e&&(r.on("click.drag",ao,so),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const CM=t=>+t,Ta=t=>()=>t;function $M(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function DM(t){t.stopImmediatePropagation()}function Ea(t){t.preventDefault(),t.stopImmediatePropagation()}var Cu={name:"drag"},Sa={name:"space"},qn={name:"handle"},Xn={name:"center"};const{abs:$u,max:qt,min:Xt}=Math;function Du(t){return[+t[0],+t[1]]}function Lu(t){return[Du(t[0]),Du(t[1])]}var Gi={name:"x",handles:["w","e"].map(oo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Oa={},qe={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Iu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ru={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},LM={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},IM={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function oo(t){return{type:t}}function RM(t){return!t.ctrlKey&&!t.button}function PM(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function NM(){return navigator.maxTouchPoints||"ontouchstart"in this}function xa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function BM(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function mp(){return UM(Gi)}function UM(t){var e=PM,n=RM,r=NM,i=!0,s=Ro("start","brush","end"),a=6,o;function l(m){var y=m.property("__brush",T).selectAll(".overlay").data([oo("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",qe.overlay).merge(y).each(function(){var b=xa(this).extent;z(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),m.selectAll(".selection").data([oo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",qe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var w=m.selectAll(".handle").data(t.handles,function(b){return b.type});w.exit().remove(),w.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return qe[b.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,y,w){m.tween?m.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,v=b.__brush,g=u(b,arguments),_=v.selection,E=t.input(typeof y=="function"?y.apply(this,arguments):y,v.extent),x=Hs(_,E);function A(k){v.selection=k===1&&E===null?null:x(k),c.call(b),g.brush()}return _!==null&&E!==null?A:A(1)}):m.each(function(){var b=this,v=arguments,g=b.__brush,_=t.input(typeof y=="function"?y.apply(b,v):y,g.extent),E=u(b,v).beforestart();Qa(b),g.selection=_===null?null:_,c.call(b),E.start(w).brush(w).end(w)})},l.clear=function(m,y){l.move(m,null,y)};function c(){var m=z(this),y=xa(this).selection;y?(m.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(w){return w.type[w.type.length-1]==="e"?y[1][0]-a/2:y[0][0]-a/2}).attr("y",function(w){return w.type[0]==="s"?y[1][1]-a/2:y[0][1]-a/2}).attr("width",function(w){return w.type==="n"||w.type==="s"?y[1][0]-y[0][0]+a:a}).attr("height",function(w){return w.type==="e"||w.type==="w"?y[1][1]-y[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,y,w){var b=m.__brush.emitter;return b&&(!w||!b.clean)?b:new h(m,y,w)}function h(m,y,w){this.that=m,this.args=y,this.state=m.__brush,this.active=0,this.clean=w}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,y){return this.starting?(this.starting=!1,this.emit("start",m,y)):this.emit("brush",m),this},brush:function(m,y){return this.emit("brush",m,y),this},end:function(m,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,y)),this},emit:function(m,y,w){var b=z(this.that).datum();s.call(m,this.that,new $M(m,{sourceEvent:y,target:l,selection:t.output(this.state.selection),mode:w,dispatch:s}),b)}};function d(m){if(o&&!m.touches||!n.apply(this,arguments))return;var y=this,w=m.target.__data__.type,b=(i&&m.metaKey?w="overlay":w)==="selection"?Cu:i&&m.altKey?Xn:qn,v=t===Oa?null:LM[w],g=t===Gi?null:IM[w],_=xa(y),E=_.extent,x=_.selection,A=E[0][0],k,M,F=E[0][1],N,Y,nt=E[1][0],K,G,X=E[1][1],lt,rt,D=0,I=0,q,dt=v&&g&&i&&m.shiftKey,st,j,et=Array.from(m.touches||[m],it=>{const yt=it.identifier;return it=An(it,y),it.point0=it.slice(),it.identifier=yt,it});Qa(y);var ct=u(y,arguments,!0).beforestart();if(w==="overlay"){x&&(q=!0);const it=[et[0],et[1]||et[0]];_.selection=x=[[k=t===Oa?A:Xt(it[0][0],it[1][0]),N=t===Gi?F:Xt(it[0][1],it[1][1])],[K=t===Oa?nt:qt(it[0][0],it[1][0]),lt=t===Gi?X:qt(it[0][1],it[1][1])]],et.length>1&&ft(m)}else k=x[0][0],N=x[0][1],K=x[1][0],lt=x[1][1];M=k,Y=N,G=K,rt=lt;var B=z(y).attr("pointer-events","none"),R=B.selectAll(".overlay").attr("cursor",qe[w]);if(m.touches)ct.moved=L,ct.ended=ut;else{var V=z(m.view).on("mousemove.brush",L,!0).on("mouseup.brush",ut,!0);i&&V.on("keydown.brush",Ct,!0).on("keyup.brush",Dt,!0),kM(m.view)}c.call(y),ct.start(m,b.name);function L(it){for(const yt of it.changedTouches||[it])for(const ge of et)ge.identifier===yt.identifier&&(ge.cur=An(yt,y));if(dt&&!st&&!j&&et.length===1){const yt=et[0];$u(yt.cur[0]-yt[0])>$u(yt.cur[1]-yt[1])?j=!0:st=!0}for(const yt of et)yt.cur&&(yt[0]=yt.cur[0],yt[1]=yt.cur[1]);q=!0,Ea(it),ft(it)}function ft(it){const yt=et[0],ge=yt.point0;var le;switch(D=yt[0]-ge[0],I=yt[1]-ge[1],b){case Sa:case Cu:{v&&(D=qt(A-k,Xt(nt-K,D)),M=k+D,G=K+D),g&&(I=qt(F-N,Xt(X-lt,I)),Y=N+I,rt=lt+I);break}case qn:{et[1]?(v&&(M=qt(A,Xt(nt,et[0][0])),G=qt(A,Xt(nt,et[1][0])),v=1),g&&(Y=qt(F,Xt(X,et[0][1])),rt=qt(F,Xt(X,et[1][1])),g=1)):(v<0?(D=qt(A-k,Xt(nt-k,D)),M=k+D,G=K):v>0&&(D=qt(A-K,Xt(nt-K,D)),M=k,G=K+D),g<0?(I=qt(F-N,Xt(X-N,I)),Y=N+I,rt=lt):g>0&&(I=qt(F-lt,Xt(X-lt,I)),Y=N,rt=lt+I));break}case Xn:{v&&(M=qt(A,Xt(nt,k-D*v)),G=qt(A,Xt(nt,K+D*v))),g&&(Y=qt(F,Xt(X,N-I*g)),rt=qt(F,Xt(X,lt+I*g)));break}}G<M&&(v*=-1,le=k,k=K,K=le,le=M,M=G,G=le,w in Iu&&R.attr("cursor",qe[w=Iu[w]])),rt<Y&&(g*=-1,le=N,N=lt,lt=le,le=Y,Y=rt,rt=le,w in Ru&&R.attr("cursor",qe[w=Ru[w]])),_.selection&&(x=_.selection),st&&(M=x[0][0],G=x[1][0]),j&&(Y=x[0][1],rt=x[1][1]),(x[0][0]!==M||x[0][1]!==Y||x[1][0]!==G||x[1][1]!==rt)&&(_.selection=[[M,Y],[G,rt]],c.call(y),ct.brush(it,b.name))}function ut(it){if(DM(it),it.touches){if(it.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else AM(it.view,q),V.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),R.attr("cursor",qe.overlay),_.selection&&(x=_.selection),BM(x)&&(_.selection=null,c.call(y)),ct.end(it,b.name)}function Ct(it){switch(it.keyCode){case 16:{dt=v&&g;break}case 18:{b===qn&&(v&&(K=G-D*v,k=M+D*v),g&&(lt=rt-I*g,N=Y+I*g),b=Xn,ft(it));break}case 32:{(b===qn||b===Xn)&&(v<0?K=G-D:v>0&&(k=M-D),g<0?lt=rt-I:g>0&&(N=Y-I),b=Sa,R.attr("cursor",qe.selection),ft(it));break}default:return}Ea(it)}function Dt(it){switch(it.keyCode){case 16:{dt&&(st=j=dt=!1,ft(it));break}case 18:{b===Xn&&(v<0?K=G:v>0&&(k=M),g<0?lt=rt:g>0&&(N=Y),b=qn,ft(it));break}case 32:{b===Sa&&(it.altKey?(v&&(K=G-D*v,k=M+D*v),g&&(lt=rt-I*g,N=Y+I*g),b=Xn):(v<0?K=G:v>0&&(k=M),g<0?lt=rt:g>0&&(N=Y),b=qn),R.attr("cursor",qe[w]),ft(it));break}default:return}Ea(it)}}function f(m){u(this,arguments).moved(m)}function p(m){u(this,arguments).ended(m)}function T(){var m=this.__brush||{selection:null};return m.extent=Lu(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Ta(Lu(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Ta(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Ta(!!m),l):r},l.handleSize=function(m){return arguments.length?(a=+m,l):a},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=s.on.apply(s,arguments);return m===s?l:m},l}const lo=Math.PI,co=2*lo,wn=1e-6,HM=co-wn;function vp(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function FM(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return vp;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let VM=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?vp:FM(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,h=o-n,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>wn)if(!(Math.abs(h*l-c*u)>wn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-a,p=i-o,T=l*l+c*c,m=f*f+p*p,y=Math.sqrt(T),w=Math.sqrt(d),b=s*Math.tan((lo-Math.acos((T+d-m)/(2*y*w)))/2),v=b/w,g=b/y;Math.abs(v-1)>wn&&this._append`L${e+v*u},${n+v*h}`,this._append`A${s},${s},0,0,${+(h*f>u*p)},${this._x1=e+g*l},${this._y1=n+g*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,h=1^a,d=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>wn||Math.abs(this._y1-u)>wn)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%co+co),d>HM?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:d>wn&&this._append`A${r},${r},0,${+(d>=lo)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};var yp=Math.PI,Pu=yp*2,zM=Math.abs;function Nu(t,e){return zM(t)>yp&&(t-=Math.round(t/Pu)*Pu),[t,e]}Nu.invert=Nu;function Bu(){}Bu.prototype={constructor:Bu,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Uu(t,e){return[t,e]}Uu.invert=Uu;function jM(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function GM(){return this.eachAfter(jM)}function WM(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function YM(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function qM(t,e){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function XM(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function ZM(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function KM(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function QM(t){for(var e=this,n=JM(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function JM(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function t2(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function e2(){return Array.from(this)}function n2(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function r2(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*i2(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function _p(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=o2)):e===void 0&&(e=a2);for(var n=new fi(t),r,i=[n],s,a,o,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new fi(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(c2)}function s2(){return _p(this).eachBefore(l2)}function a2(t){return t.children}function o2(t){return Array.isArray(t)?t[1]:null}function l2(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function c2(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function fi(t){this.data=t,this.depth=this.height=0,this.parent=null}fi.prototype=_p.prototype={constructor:fi,count:GM,each:WM,eachAfter:qM,eachBefore:YM,find:XM,sum:ZM,sort:KM,path:QM,ancestors:t2,descendants:e2,leaves:n2,links:r2,copy:s2,[Symbol.iterator]:i2};function u2(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}Object.create(fi.prototype);function h2(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var d2=(1+Math.sqrt(5))/2;function f2(t,e,n,r,i,s){for(var a=[],o=e.children,l,c,u=0,h=0,d=o.length,f,p,T=e.value,m,y,w,b,v,g,_;u<d;){f=i-n,p=s-r;do m=o[h++].value;while(!m&&h<d);for(y=w=m,g=Math.max(p/f,f/p)/(T*t),_=m*m*g,v=Math.max(w/_,_/y);h<d;++h){if(m+=c=o[h].value,c<y&&(y=c),c>w&&(w=c),_=m*m*g,b=Math.max(w/_,_/y),b>v){m-=c;break}v=b}a.push(l={value:m,dice:f<p,children:o.slice(u,h)}),l.dice?u2(l,n,r,i,T?r+=p*m/T:s):h2(l,n,r,T?n+=f*m/T:i,s),T-=m,u=h}return a}(function t(e){function n(r,i,s,a,o){f2(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(d2);function il(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new VM(e)}function p2(t){return t.innerRadius}function g2(t){return t.outerRadius}function m2(t){return t.startAngle}function v2(t){return t.endAngle}function y2(t){return t&&t.padAngle}function _2(t,e,n,r,i,s,a,o){var l=n-t,c=r-e,u=a-i,h=o-s,d=h*l-u*c;if(!(d*d<Zt))return d=(u*(e-s)-h*(t-i))/d,[t+d*l,e+d*c]}function Li(t,e,n,r,i,s,a){var o=t-n,l=e-r,c=(a?s:-s)/rr(o*o+l*l),u=c*l,h=-c*o,d=t+u,f=e+h,p=n+u,T=r+h,m=(d+p)/2,y=(f+T)/2,w=p-d,b=T-f,v=w*w+b*b,g=i-s,_=d*T-p*f,E=(b<0?-1:1)*rr(gx(0,g*g*v-_*_)),x=(_*b-w*E)/v,A=(-_*w-b*E)/v,k=(_*b+w*E)/v,M=(-_*w+b*E)/v,F=x-m,N=A-y,Y=k-m,nt=M-y;return F*F+N*N>Y*Y+nt*nt&&(x=k,A=M),{cx:x,cy:A,x01:-u,y01:-h,x11:x*(i/g-1),y11:A*(i/g-1)}}function b2(){var t=p2,e=g2,n=_t(0),r=null,i=m2,s=v2,a=y2,o=null,l=il(c);function c(){var u,h,d=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-vs,T=s.apply(this,arguments)-vs,m=bu(T-p),y=T>p;if(o||(o=u=l()),f<d&&(h=f,f=d,d=h),!(f>Zt))o.moveTo(0,0);else if(m>mx-Zt)o.moveTo(f*_n(p),f*Le(p)),o.arc(0,0,f,p,T,!y),d>Zt&&(o.moveTo(d*_n(T),d*Le(T)),o.arc(0,0,d,T,p,y));else{var w=p,b=T,v=p,g=T,_=m,E=m,x=a.apply(this,arguments)/2,A=x>Zt&&(r?+r.apply(this,arguments):rr(d*d+f*f)),k=ba(bu(f-d)/2,+n.apply(this,arguments)),M=k,F=k,N,Y;if(A>Zt){var nt=wu(A/d*Le(x)),K=wu(A/f*Le(x));(_-=nt*2)>Zt?(nt*=y?1:-1,v+=nt,g-=nt):(_=0,v=g=(p+T)/2),(E-=K*2)>Zt?(K*=y?1:-1,w+=K,b-=K):(E=0,w=b=(p+T)/2)}var G=f*_n(w),X=f*Le(w),lt=d*_n(g),rt=d*Le(g);if(k>Zt){var D=f*_n(b),I=f*Le(b),q=d*_n(v),dt=d*Le(v),st;if(m<hi)if(st=_2(G,X,q,dt,D,I,lt,rt)){var j=G-st[0],et=X-st[1],ct=D-st[0],B=I-st[1],R=1/Le(vx((j*ct+et*B)/(rr(j*j+et*et)*rr(ct*ct+B*B)))/2),V=rr(st[0]*st[0]+st[1]*st[1]);M=ba(k,(d-V)/(R-1)),F=ba(k,(f-V)/(R+1))}else M=F=0}E>Zt?F>Zt?(N=Li(q,dt,G,X,f,F,y),Y=Li(D,I,lt,rt,f,F,y),o.moveTo(N.cx+N.x01,N.cy+N.y01),F<k?o.arc(N.cx,N.cy,F,Yt(N.y01,N.x01),Yt(Y.y01,Y.x01),!y):(o.arc(N.cx,N.cy,F,Yt(N.y01,N.x01),Yt(N.y11,N.x11),!y),o.arc(0,0,f,Yt(N.cy+N.y11,N.cx+N.x11),Yt(Y.cy+Y.y11,Y.cx+Y.x11),!y),o.arc(Y.cx,Y.cy,F,Yt(Y.y11,Y.x11),Yt(Y.y01,Y.x01),!y))):(o.moveTo(G,X),o.arc(0,0,f,w,b,!y)):o.moveTo(G,X),!(d>Zt)||!(_>Zt)?o.lineTo(lt,rt):M>Zt?(N=Li(lt,rt,D,I,d,-M,y),Y=Li(G,X,q,dt,d,-M,y),o.lineTo(N.cx+N.x01,N.cy+N.y01),M<k?o.arc(N.cx,N.cy,M,Yt(N.y01,N.x01),Yt(Y.y01,Y.x01),!y):(o.arc(N.cx,N.cy,M,Yt(N.y01,N.x01),Yt(N.y11,N.x11),!y),o.arc(0,0,d,Yt(N.cy+N.y11,N.cx+N.x11),Yt(Y.cy+Y.y11,Y.cx+Y.x11),y),o.arc(Y.cx,Y.cy,M,Yt(Y.y11,Y.x11),Yt(Y.y01,Y.x01),!y))):o.arc(0,0,d,g,v,y)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-hi/2;return[_n(h)*u,Le(h)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:_t(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:_t(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:_t(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:_t(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:_t(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:_t(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:_t(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function bp(t){return t[0]}function wp(t){return t[1]}function sl(t,e){var n=_t(!0),r=null,i=el,s=null,a=il(o);t=typeof t=="function"?t:t===void 0?bp:_t(t),e=typeof e=="function"?e:e===void 0?wp:_t(e);function o(l){var c,u=(l=qo(l)).length,h,d=!1,f;for(r==null&&(s=i(f=a())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(h,c,l),+e(h,c,l));if(f)return s=null,f+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:_t(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:_t(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_t(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function al(t,e,n){var r=null,i=_t(!0),s=null,a=el,o=null,l=il(c);t=typeof t=="function"?t:t===void 0?bp:_t(+t),e=typeof e=="function"?e:_t(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?wp:_t(+n);function c(h){var d,f,p,T=(h=qo(h)).length,m,y=!1,w,b=new Array(T),v=new Array(T);for(s==null&&(o=a(w=l())),d=0;d<=T;++d){if(!(d<T&&i(m=h[d],d,h))===y)if(y=!y)f=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=f;--p)o.point(b[p],v[p]);o.lineEnd(),o.areaEnd()}y&&(b[d]=+t(m,d,h),v[d]=+e(m,d,h),o.point(r?+r(m,d,h):b[d],n?+n(m,d,h):v[d]))}if(w)return o=null,w+""||null}function u(){return sl().defined(i).curve(a).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:_t(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:_t(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:_t(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:_t(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:_t(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:_t(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:_t(!!h),c):i},c.curve=function(h){return arguments.length?(a=h,s!=null&&(o=a(s)),c):a},c.context=function(h){return arguments.length?(h==null?s=o=null:o=a(s=h),c):s},c}class $t{constructor(e,n,r){if(this.type="",this.renderType=wt.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=S(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(z(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=S(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${se}--${i}--${this.type}`,!0),r&&r.classed(`${se}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={ariaLabel:null,isPresentational:!1,withinChartClip:!1}){if(this.type){const n=S(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=W.appendOrSelect(this.parent,`${this.renderType===wt.SVG?"svg":"div"}${r}.${se}--${n}--${this.type}`);if(e.ariaLabel&&i.attr("aria-label",e.ariaLabel),e.isPresentational&&i.attr("role","presentation"),e.withinChartClip){const s=this.model.get("chartClipId");if(s){const a=z(`#${s}`).select("rect");a.size()!==0&&parseFloat(a.attr("height"))>0&&i.attr("clip-path",`url(#${s})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?pt({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Tp,setPrototypeOf:Hu,isFrozen:w2,getPrototypeOf:T2,getOwnPropertyDescriptor:E2}=Object;let{freeze:re,seal:Te,create:Ep}=Object,{apply:uo,construct:ho}=typeof Reflect<"u"&&Reflect;re||(re=function(t){return t});Te||(Te=function(t){return t});uo||(uo=function(t,e,n){return t.apply(e,n)});ho||(ho=function(t,e){return new t(...e)});const Ii=ie(Array.prototype.forEach),S2=ie(Array.prototype.lastIndexOf),Fu=ie(Array.prototype.pop),Pr=ie(Array.prototype.push),O2=ie(Array.prototype.splice),Wi=ie(String.prototype.toLowerCase),Ma=ie(String.prototype.toString),Vu=ie(String.prototype.match),Nr=ie(String.prototype.replace),x2=ie(String.prototype.indexOf),M2=ie(String.prototype.trim),Se=ie(Object.prototype.hasOwnProperty),te=ie(RegExp.prototype.test),Br=k2(TypeError);function ie(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return uo(t,e,r)}}function k2(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ho(t,n)}}function gt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wi;Hu&&Hu(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(w2(e)||(e[r]=s),i=s)}t[i]=!0}return t}function A2(t){for(let e=0;e<t.length;e++)Se(t,e)||(t[e]=null);return t}function Tn(t){const e=Ep(null);for(const[n,r]of Tp(t))Se(t,n)&&(Array.isArray(r)?e[n]=A2(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Tn(r):e[n]=r);return e}function Ur(t,e){for(;t!==null;){const r=E2(t,e);if(r){if(r.get)return ie(r.get);if(typeof r.value=="function")return ie(r.value)}t=T2(t)}function n(){return null}return n}const zu=re(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ka=re(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Aa=re(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),C2=re(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ca=re(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$2=re(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ju=re(["#text"]),Gu=re(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$a=re(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wu=re(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ri=re(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D2=Te(/\{\{[\w\W]*|[\w\W]*\}\}/gm),L2=Te(/<%[\w\W]*|[\w\W]*%>/gm),I2=Te(/\$\{[\w\W]*/gm),R2=Te(/^data-[\-\w.\u00B7-\uFFFF]+$/),P2=Te(/^aria-[\-\w]+$/),Sp=Te(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),N2=Te(/^(?:\w+script|data):/i),B2=Te(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Op=Te(/^html$/i),U2=Te(/^[a-z][.\w]*(-[.\w]+)+$/i);var Yu=Object.freeze({__proto__:null,ARIA_ATTR:P2,ATTR_WHITESPACE:B2,CUSTOM_ELEMENT:U2,DATA_ATTR:R2,DOCTYPE_NAME:Op,ERB_EXPR:L2,IS_ALLOWED_URI:Sp,IS_SCRIPT_OR_DATA:N2,MUSTACHE_EXPR:D2,TMPLIT_EXPR:I2});const Hr={element:1,text:3,progressingInstruction:7,comment:8,document:9},H2=function(){return typeof window>"u"?null:window},F2=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},qu=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function xp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H2();const e=O=>xp(O);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Hr.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=t,p=l.prototype,T=Ur(p,"cloneNode"),m=Ur(p,"remove"),y=Ur(p,"nextSibling"),w=Ur(p,"childNodes"),b=Ur(p,"parentNode");if(typeof a=="function"){const O=n.createElement("template");O.content&&O.content.ownerDocument&&(n=O.content.ownerDocument)}let v,g="";const{implementation:_,createNodeIterator:E,createDocumentFragment:x,getElementsByTagName:A}=n,{importNode:k}=r;let M=qu();e.isSupported=typeof Tp=="function"&&typeof b=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:N,TMPLIT_EXPR:Y,DATA_ATTR:nt,ARIA_ATTR:K,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:lt}=Yu;let{IS_ALLOWED_URI:rt}=Yu,D=null;const I=gt({},[...zu,...ka,...Aa,...Ca,...ju]);let q=null;const dt=gt({},[...Gu,...$a,...Wu,...Ri]);let st=Object.seal(Ep(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,et=null,ct=!0,B=!0,R=!1,V=!0,L=!1,ft=!0,ut=!1,Ct=!1,Dt=!1,it=!1,yt=!1,ge=!1,le=!0,Er=!1;const Sr="user-content-";let vn=!0,Ee=!1,Hn={},Fn=null;const gl=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ml=null;const vl=gt({},["audio","video","img","source","image","track"]);let Ks=null;const yl=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ti="http://www.w3.org/1998/Math/MathML",Ei="http://www.w3.org/2000/svg",je="http://www.w3.org/1999/xhtml";let Vn=je,Qs=!1,Js=null;const ig=gt({},[Ti,Ei,je],Ma);let Si=gt({},["mi","mo","mn","ms","mtext"]),Oi=gt({},["annotation-xml"]);const sg=gt({},["title","style","font","a","script"]);let Or=null;const ag=["application/xhtml+xml","text/html"],og="text/html";let Ht=null,zn=null;const lg=n.createElement("form"),_l=function(O){return O instanceof RegExp||O instanceof Function},ta=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(zn&&zn===O)){if((!O||typeof O!="object")&&(O={}),O=Tn(O),Or=ag.indexOf(O.PARSER_MEDIA_TYPE)===-1?og:O.PARSER_MEDIA_TYPE,Ht=Or==="application/xhtml+xml"?Ma:Wi,D=Se(O,"ALLOWED_TAGS")?gt({},O.ALLOWED_TAGS,Ht):I,q=Se(O,"ALLOWED_ATTR")?gt({},O.ALLOWED_ATTR,Ht):dt,Js=Se(O,"ALLOWED_NAMESPACES")?gt({},O.ALLOWED_NAMESPACES,Ma):ig,Ks=Se(O,"ADD_URI_SAFE_ATTR")?gt(Tn(yl),O.ADD_URI_SAFE_ATTR,Ht):yl,ml=Se(O,"ADD_DATA_URI_TAGS")?gt(Tn(vl),O.ADD_DATA_URI_TAGS,Ht):vl,Fn=Se(O,"FORBID_CONTENTS")?gt({},O.FORBID_CONTENTS,Ht):gl,j=Se(O,"FORBID_TAGS")?gt({},O.FORBID_TAGS,Ht):{},et=Se(O,"FORBID_ATTR")?gt({},O.FORBID_ATTR,Ht):{},Hn=Se(O,"USE_PROFILES")?O.USE_PROFILES:!1,ct=O.ALLOW_ARIA_ATTR!==!1,B=O.ALLOW_DATA_ATTR!==!1,R=O.ALLOW_UNKNOWN_PROTOCOLS||!1,V=O.ALLOW_SELF_CLOSE_IN_ATTR!==!1,L=O.SAFE_FOR_TEMPLATES||!1,ft=O.SAFE_FOR_XML!==!1,ut=O.WHOLE_DOCUMENT||!1,it=O.RETURN_DOM||!1,yt=O.RETURN_DOM_FRAGMENT||!1,ge=O.RETURN_TRUSTED_TYPE||!1,Dt=O.FORCE_BODY||!1,le=O.SANITIZE_DOM!==!1,Er=O.SANITIZE_NAMED_PROPS||!1,vn=O.KEEP_CONTENT!==!1,Ee=O.IN_PLACE||!1,rt=O.ALLOWED_URI_REGEXP||Sp,Vn=O.NAMESPACE||je,Si=O.MATHML_TEXT_INTEGRATION_POINTS||Si,Oi=O.HTML_INTEGRATION_POINTS||Oi,st=O.CUSTOM_ELEMENT_HANDLING||{},O.CUSTOM_ELEMENT_HANDLING&&_l(O.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(st.tagNameCheck=O.CUSTOM_ELEMENT_HANDLING.tagNameCheck),O.CUSTOM_ELEMENT_HANDLING&&_l(O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(st.attributeNameCheck=O.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),O.CUSTOM_ELEMENT_HANDLING&&typeof O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(st.allowCustomizedBuiltInElements=O.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),L&&(B=!1),yt&&(it=!0),Hn&&(D=gt({},ju),q=[],Hn.html===!0&&(gt(D,zu),gt(q,Gu)),Hn.svg===!0&&(gt(D,ka),gt(q,$a),gt(q,Ri)),Hn.svgFilters===!0&&(gt(D,Aa),gt(q,$a),gt(q,Ri)),Hn.mathMl===!0&&(gt(D,Ca),gt(q,Wu),gt(q,Ri))),O.ADD_TAGS&&(D===I&&(D=Tn(D)),gt(D,O.ADD_TAGS,Ht)),O.ADD_ATTR&&(q===dt&&(q=Tn(q)),gt(q,O.ADD_ATTR,Ht)),O.ADD_URI_SAFE_ATTR&&gt(Ks,O.ADD_URI_SAFE_ATTR,Ht),O.FORBID_CONTENTS&&(Fn===gl&&(Fn=Tn(Fn)),gt(Fn,O.FORBID_CONTENTS,Ht)),vn&&(D["#text"]=!0),ut&&gt(D,["html","head","body"]),D.table&&(gt(D,["tbody"]),delete j.tbody),O.TRUSTED_TYPES_POLICY){if(typeof O.TRUSTED_TYPES_POLICY.createHTML!="function")throw Br('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof O.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Br('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=O.TRUSTED_TYPES_POLICY,g=v.createHTML("")}else v===void 0&&(v=F2(f,i)),v!==null&&typeof g=="string"&&(g=v.createHTML(""));re&&re(O),zn=O}},bl=gt({},[...ka,...Aa,...C2]),wl=gt({},[...Ca,...$2]),cg=function(O){let tt=b(O);(!tt||!tt.tagName)&&(tt={namespaceURI:Vn,tagName:"template"});const Z=Wi(O.tagName),Tt=Wi(tt.tagName);return Js[O.namespaceURI]?O.namespaceURI===Ei?tt.namespaceURI===je?Z==="svg":tt.namespaceURI===Ti?Z==="svg"&&(Tt==="annotation-xml"||Si[Tt]):!!bl[Z]:O.namespaceURI===Ti?tt.namespaceURI===je?Z==="math":tt.namespaceURI===Ei?Z==="math"&&Oi[Tt]:!!wl[Z]:O.namespaceURI===je?tt.namespaceURI===Ei&&!Oi[Tt]||tt.namespaceURI===Ti&&!Si[Tt]?!1:!wl[Z]&&(sg[Z]||!bl[Z]):!!(Or==="application/xhtml+xml"&&Js[O.namespaceURI]):!1},yn=function(O){Pr(e.removed,{element:O});try{b(O).removeChild(O)}catch{m(O)}},xi=function(O,tt){try{Pr(e.removed,{attribute:tt.getAttributeNode(O),from:tt})}catch{Pr(e.removed,{attribute:null,from:tt})}if(tt.removeAttribute(O),O==="is")if(it||yt)try{yn(tt)}catch{}else try{tt.setAttribute(O,"")}catch{}},Tl=function(O){let tt=null,Z=null;if(Dt)O="<remove></remove>"+O;else{const Rt=Vu(O,/^[\r\n\t ]+/);Z=Rt&&Rt[0]}Or==="application/xhtml+xml"&&Vn===je&&(O='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+O+"</body></html>");const Tt=v?v.createHTML(O):O;if(Vn===je)try{tt=new d().parseFromString(Tt,Or)}catch{}if(!tt||!tt.documentElement){tt=_.createDocument(Vn,"template",null);try{tt.documentElement.innerHTML=Qs?g:Tt}catch{}}const zt=tt.body||tt.documentElement;return O&&Z&&zt.insertBefore(n.createTextNode(Z),zt.childNodes[0]||null),Vn===je?A.call(tt,ut?"html":"body")[0]:ut?tt.documentElement:zt},El=function(O){return E.call(O.ownerDocument||O,O,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ea=function(O){return O instanceof h&&(typeof O.nodeName!="string"||typeof O.textContent!="string"||typeof O.removeChild!="function"||!(O.attributes instanceof u)||typeof O.removeAttribute!="function"||typeof O.setAttribute!="function"||typeof O.namespaceURI!="string"||typeof O.insertBefore!="function"||typeof O.hasChildNodes!="function")},Sl=function(O){return typeof o=="function"&&O instanceof o};function Ge(O,tt,Z){Ii(O,Tt=>{Tt.call(e,tt,Z,zn)})}const Ol=function(O){let tt=null;if(Ge(M.beforeSanitizeElements,O,null),ea(O))return yn(O),!0;const Z=Ht(O.nodeName);if(Ge(M.uponSanitizeElement,O,{tagName:Z,allowedTags:D}),O.hasChildNodes()&&!Sl(O.firstElementChild)&&te(/<[/\w]/g,O.innerHTML)&&te(/<[/\w]/g,O.textContent)||O.nodeType===Hr.progressingInstruction||ft&&O.nodeType===Hr.comment&&te(/<[/\w]/g,O.data))return yn(O),!0;if(!D[Z]||j[Z]){if(!j[Z]&&Ml(Z)&&(st.tagNameCheck instanceof RegExp&&te(st.tagNameCheck,Z)||st.tagNameCheck instanceof Function&&st.tagNameCheck(Z)))return!1;if(vn&&!Fn[Z]){const Tt=b(O)||O.parentNode,zt=w(O)||O.childNodes;if(zt&&Tt){const Rt=zt.length;for(let We=Rt-1;We>=0;--We){const me=T(zt[We],!0);me.__removalCount=(O.__removalCount||0)+1,Tt.insertBefore(me,y(O))}}}return yn(O),!0}return O instanceof l&&!cg(O)||(Z==="noscript"||Z==="noembed"||Z==="noframes")&&te(/<\/no(script|embed|frames)/i,O.innerHTML)?(yn(O),!0):(L&&O.nodeType===Hr.text&&(tt=O.textContent,Ii([F,N,Y],Tt=>{tt=Nr(tt,Tt," ")}),O.textContent!==tt&&(Pr(e.removed,{element:O.cloneNode()}),O.textContent=tt)),Ge(M.afterSanitizeElements,O,null),!1)},xl=function(O,tt,Z){if(le&&(tt==="id"||tt==="name")&&(Z in n||Z in lg))return!1;if(!(B&&!et[tt]&&te(nt,tt))&&!(ct&&te(K,tt))){if(!q[tt]||et[tt]){if(!(Ml(O)&&(st.tagNameCheck instanceof RegExp&&te(st.tagNameCheck,O)||st.tagNameCheck instanceof Function&&st.tagNameCheck(O))&&(st.attributeNameCheck instanceof RegExp&&te(st.attributeNameCheck,tt)||st.attributeNameCheck instanceof Function&&st.attributeNameCheck(tt))||tt==="is"&&st.allowCustomizedBuiltInElements&&(st.tagNameCheck instanceof RegExp&&te(st.tagNameCheck,Z)||st.tagNameCheck instanceof Function&&st.tagNameCheck(Z))))return!1}else if(!Ks[tt]&&!te(rt,Nr(Z,X,""))&&!((tt==="src"||tt==="xlink:href"||tt==="href")&&O!=="script"&&x2(Z,"data:")===0&&ml[O])&&!(R&&!te(G,Nr(Z,X,"")))&&Z)return!1}return!0},Ml=function(O){return O!=="annotation-xml"&&Vu(O,lt)},kl=function(O){Ge(M.beforeSanitizeAttributes,O,null);const{attributes:tt}=O;if(!tt||ea(O))return;const Z={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let Tt=tt.length;for(;Tt--;){const zt=tt[Tt],{name:Rt,namespaceURI:We,value:me}=zt,De=Ht(Rt);let Jt=Rt==="value"?me:M2(me);if(Z.attrName=De,Z.attrValue=Jt,Z.keepAttr=!0,Z.forceKeepAttr=void 0,Ge(M.uponSanitizeAttribute,O,Z),Jt=Z.attrValue,Er&&(De==="id"||De==="name")&&(xi(Rt,O),Jt=Sr+Jt),ft&&te(/((--!?|])>)|<\/(style|title)/i,Jt)){xi(Rt,O);continue}if(Z.forceKeepAttr||(xi(Rt,O),!Z.keepAttr))continue;if(!V&&te(/\/>/i,Jt)){xi(Rt,O);continue}L&&Ii([F,N,Y],hg=>{Jt=Nr(Jt,hg," ")});const Al=Ht(O.nodeName);if(xl(Al,De,Jt)){if(v&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!We)switch(f.getAttributeType(Al,De)){case"TrustedHTML":{Jt=v.createHTML(Jt);break}case"TrustedScriptURL":{Jt=v.createScriptURL(Jt);break}}try{We?O.setAttributeNS(We,Rt,Jt):O.setAttribute(Rt,Jt),ea(O)?yn(O):Fu(e.removed)}catch{}}}Ge(M.afterSanitizeAttributes,O,null)},ug=function O(tt){let Z=null;const Tt=El(tt);for(Ge(M.beforeSanitizeShadowDOM,tt,null);Z=Tt.nextNode();)Ge(M.uponSanitizeShadowNode,Z,null),Ol(Z),kl(Z),Z.content instanceof s&&O(Z.content);Ge(M.afterSanitizeShadowDOM,tt,null)};return e.sanitize=function(O){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=null,Tt=null,zt=null,Rt=null;if(Qs=!O,Qs&&(O="<!-->"),typeof O!="string"&&!Sl(O))if(typeof O.toString=="function"){if(O=O.toString(),typeof O!="string")throw Br("dirty is not a string, aborting")}else throw Br("toString is not a function");if(!e.isSupported)return O;if(Ct||ta(tt),e.removed=[],typeof O=="string"&&(Ee=!1),Ee){if(O.nodeName){const De=Ht(O.nodeName);if(!D[De]||j[De])throw Br("root node is forbidden and cannot be sanitized in-place")}}else if(O instanceof o)Z=Tl("<!---->"),Tt=Z.ownerDocument.importNode(O,!0),Tt.nodeType===Hr.element&&Tt.nodeName==="BODY"||Tt.nodeName==="HTML"?Z=Tt:Z.appendChild(Tt);else{if(!it&&!L&&!ut&&O.indexOf("<")===-1)return v&&ge?v.createHTML(O):O;if(Z=Tl(O),!Z)return it?null:ge?g:""}Z&&Dt&&yn(Z.firstChild);const We=El(Ee?O:Z);for(;zt=We.nextNode();)Ol(zt),kl(zt),zt.content instanceof s&&ug(zt.content);if(Ee)return O;if(it){if(yt)for(Rt=x.call(Z.ownerDocument);Z.firstChild;)Rt.appendChild(Z.firstChild);else Rt=Z;return(q.shadowroot||q.shadowrootmode)&&(Rt=k.call(r,Rt,!0)),Rt}let me=ut?Z.outerHTML:Z.innerHTML;return ut&&D["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&te(Op,Z.ownerDocument.doctype.name)&&(me="<!DOCTYPE "+Z.ownerDocument.doctype.name+`>
`+me),L&&Ii([F,N,Y],De=>{me=Nr(me,De," ")}),v&&ge?v.createHTML(me):me},e.setConfig=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ta(O),Ct=!0},e.clearConfig=function(){zn=null,Ct=!1},e.isValidAttribute=function(O,tt,Z){zn||ta({});const Tt=Ht(O),zt=Ht(tt);return xl(Tt,zt,Z)},e.addHook=function(O,tt){typeof tt=="function"&&Pr(M[O],tt)},e.removeHook=function(O,tt){if(tt!==void 0){const Z=S2(M[O],tt);return Z===-1?void 0:O2(M[O],Z,1)[0]}return Fu(M[O])},e.removeHooks=function(O){M[O]=[]},e.removeAllHooks=function(){M=qu()},e}var ol=xp();const Pi=t=>ol.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),V2=t=>ol.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),Pe=t=>ol.sanitize(t,{ALLOWED_TAGS:[]}),Mp=class kp extends $t{constructor(){super(...arguments),this.type="toolbar",this.renderType=wt.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener($.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener($.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer({ariaLabel:"toolbar"}).attr("role","group");if(S(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const s=n.selectAll("div.toolbar-control").data(r,l=>l.id);s.exit().remove();const a=s.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),o=this;a.merge(s).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${Pe(l.id)}`)}" aria-label="${Pe(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${V2(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){z(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),z(this).select("button").on("mouseover focus",function(u){const h=z(this);h.classed("hovered",!0),o.services.events.dispatchEvent($.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:h,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){o.services.events.dispatchEvent($.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||o.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),o.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?o.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&o.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>S(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),z(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent($.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent($.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=z(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=z(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=z(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=z(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const s=z(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);s!==null&&(s.on("click",()=>{n.triggerFunctionAndEvent(r,e,s.node()),n.updateOverflowMenu(!1)}),s.on("keydown",a=>{a&&a.key==="Enter"?n.triggerFunctionAndEvent(r,e,s.node()):a&&a.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):a&&a.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):a&&a.key==="Escape"&&n.updateOverflowMenu(!1),a.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent($.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=S(this.getOptions(),"toolbar","numberOfIcons")-1,n=S(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach(a=>{let o=null;if(a.type===Et.CUSTOM)S(a,"id")===null&&(a.id=`toolbar-button-${kp.buttonID++}`),S(a,"shouldBeDisabled")===null&&(a.shouldBeDisabled=()=>!1),o=a;else{const l=this.services.domUtils.isFullScreenMode();a.type===Et.MAKE_FULLSCREEN&&l?a.type=Et.EXIT_FULLSCREEN:a.type===Et.EXIT_FULLSCREEN&&!l&&(a.type=Et.MAKE_FULLSCREEN),o=this.getControlConfigByType(a.type)}o&&(o.text=a.text?a.text:a.type,o.id.indexOf("toolbar-export")!==-1?r.push(o):i.length<e?S(o,"iconSVG","content")===null?s.push(o):i.push(o):s.push(o))}),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=S(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:s,exportAsJPG:a,exportAsPNG:o,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:h,exitFullScreen:d,showAsTable:f}=S(i,"locale","translations","toolbar");let p;switch(e){case Et.ZOOM_IN:n&&(p={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case Et.ZOOM_OUT:n&&(p={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case Et.RESET_ZOOM:n&&(p={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case Et.MAKE_FULLSCREEN:p={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case Et.EXIT_FULLSCREEN:p={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:d,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case Et.SHOW_AS_DATATABLE:p={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:f,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent($.Modal.SHOW)};break;case Et.EXPORT_CSV:p={id:"toolbar-export-CSV",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case Et.EXPORT_PNG:p={id:"toolbar-export-PNG",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case Et.EXPORT_JPG:p={id:"toolbar-export-JPG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return p}getControlIconByType(e){switch(e){case Et.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Et.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Et.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Et.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case Et.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case Et.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case Et.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Et.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Et.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};Mp.buttonID=0;let Ap=Mp;const Cp=class $p extends $t{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=$p.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=S(r,"growth");return i===Mt.PREFERRED||i===Mt.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>S(e,"growth")===Mt.STRETCH).size()}render(e=!0){const n=this.model.getOptions(),r=this.parent,{width:i,height:s}=W.getHTMLElementSize(r.node()),a=this.configs.direction===Bt.ROW||this.configs.direction===Bt.ROW_REVERSE,o=S(this.model.getOptions(),"style","prefix"),l=r.classed(`${se}--${o}--layout-row`,this.configs.direction===Bt.ROW).classed(`${se}--${o}--layout-row-reverse`,this.configs.direction===Bt.ROW_REVERSE).classed(`${se}--${o}--layout-column`,this.configs.direction===Bt.COLUMN).classed(`${se}--${o}--layout-column-reverse`,this.configs.direction===Bt.COLUMN_REVERSE).classed(`${se}--${o}--layout-alignitems-center`,this.configs.alignItems===ks.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);l.enter().append("div").merge(r.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",u=>`layout-child layout-child-${this._instanceID} ${u.id}`).each(function(u){u.components.forEach(h=>{var d;const f=z(this),p=S(u,"renderType")===wt.SVG;h.setParent(p?W.appendOrSelect(f,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):f),p&&!f.select("svg.layout-svg-wrapper").attr("aria-label")&&f.select("svg.layout-svg-wrapper").attr("aria-label",((d=n==null?void 0:n.accessibility)==null?void 0:d.svgAriaLabel)||(n==null?void 0:n.title));const T=S(u,"growth");(T===Mt.PREFERRED||T===Mt.FIXED)&&h.render(e)})}),r.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(u){const h=S(u,"growth"),d=S(u,"renderType")===wt.SVG?W.getSVGElementSize(z(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):W.getHTMLElementSize(this);if(h===Mt.PREFERRED){const f=a?d.width:d.height,p=a?i:s;u.size=f/p*100}}),l.exit().remove(),this.children.filter(u=>S(u,"growth")===Mt.STRETCH).forEach(u=>{u.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const c=r.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);a?c.style("width",u=>`${u.size/100*i}px`).style("height","100%"):c.style("height",u=>`${u.size/100*s}px`).style("width","100%"),c.each(function(u){u.components.forEach(h=>{S(u,"growth")===Mt.STRETCH&&h.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};Cp.instanceID=Math.floor(Math.random()*99999999999);let ur=Cp;class bs extends $t{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer({isPresentational:!0}).style("width",`${this.configs.size||Zc.default.size}px`).style("height",`${this.configs.size||Zc.default.size}px`).attr("opacity",0)}}class Dp extends $t{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1).style("opacity",1).style("visibility","visible"),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),this.modal.on("click",this.handleHideModal),this.modal.select(".cds--modal-container").on("click",s=>{s.stopPropagation()}),this.modal.select(".cds--modal-close").on("click",this.handleHideModal),typeof window<"u"&&window.addEventListener("keydown",this.handleEscapeKey)},this.handleEscapeKey=i=>{i.key==="Escape"&&this.handleHideModal()},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null).style("opacity",0).style("visibility","hidden"),this.modal.on("click",null),this.modal.select(".cds--modal-container").on("click",null),this.modal.select(".cds--modal-close").on("click",null),typeof window<"u"&&window.removeEventListener("keydown",this.handleEscapeKey)},this.init()}addEventListeners(){this.services.events.addEventListener($.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener($.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=S(n,"locale","translations","tabularRep"),s=S(n,"style","prefix"),a=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${Pe(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${Jn(a,0).map(o=>`<th scope="col">
								<div class="cds--table-header-label">${Pe(o)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${a.slice(1).map(o=>`
							<tr>
								${o.map(l=>`<td>${Pe(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${se}--${s}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=z(this.services.domUtils.getHolder()),i=S(n,"style","prefix");this.modal=W.appendOrSelect(r,`div.${se}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class Lp extends $t{constructor(){super(...arguments),this.type="title",this.renderType=wt.HTML}render(e=!1){const n=this.getComponentContainer(),r=S(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(s=>Pe(s)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const s=this;i.on("mouseover",function(a){s.services.events.dispatchEvent($.Tooltip.SHOW,{event:a,hoveredElement:i,content:i.text()})}).on("mousemove",function(a){s.services.events.dispatchEvent($.Tooltip.MOVE,{event:a})}).on("mouseout",function(){s.services.events.dispatchEvent($.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=W.appendOrSelect(e,"tspan").node().getComputedTextLength(),s=e.text(),a=this.getSubstringIndex(e.node(),0,s.length-1,n-i);e.html(s.substring(0,a-1)).append("tspan").text("...");const o=this;e.on("mouseover",function(l){o.services.events.dispatchEvent($.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){o.services.events.dispatchEvent($.Tooltip.MOVE,{event:l})}).on("mouseout",function(){o.services.events.dispatchEvent($.Tooltip.HIDE)})}}getMaxTitleWidth(){return W.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const s=Math.floor((r+n)/2);return e.getSubStringLength(0,s)>i?this.getSubstringIndex(e,n,s,i):e.getSubStringLength(0,s)<i?e.getSubStringLength(0,s+1)>i?s:this.getSubstringIndex(e,s,r,i):s}}class Ip extends $t{constructor(){super(...arguments),this.type="legend",this.renderType=wt.HTML}render(e=!1){const n=this.getOptions(),r=S(n,"legend"),i=S(r,"alignment"),s=S(n,"legend","orientation");let a=this.model.getDataGroups();const{DISABLED:o}=jt.items.status,l=a.some(w=>w.status===o),c=S(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===Ae.CENTER).classed("right-aligned",i===Ae.RIGHT).classed(s,!0).classed("has-deactivated-items",l).attr("role",Pt.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(a=this.sortDataGroups(a,c));const h=u.selectAll("div.legend-item").data(a,w=>w.name),d=h.enter().append("div").attr("class","legend-item");d.merge(u.selectAll("div.legend-item")).classed("active",function(w){return w.status===jt.items.status.ACTIVE});const f=S(this.getOptions(),"legend","clickable");u.classed("clickable",f&&a.length>1);const p=jt.checkbox.radius,T=d.append("div").classed("checkbox",!0),m=T.merge(h.select("div.checkbox")).attr("role",Pt.CHECKBOX).attr("tabindex",f?0:-1).attr("aria-labelledby",(w,b)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${b}-title`)).attr("aria-checked",({status:w})=>w===jt.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",w=>this.model.getColorClassName({classNameTypes:[Wt.BACKGROUND],dataGroupName:w.name,originalClassName:"checkbox"})).style("background",w=>w.status===jt.items.status.ACTIVE?this.model.getFillColor(w.name)||this.model.getStrokeColor(w.name):null).classed("active",function(w){return w.status===jt.items.status.ACTIVE});T.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),d.append("p").merge(h.select("p"));const y=S(n,"legend","additionalItems");if(y&&a.length){const w=this,b=u.selectAll("div.additional-item").data(y);b.exit().remove();const v=b.enter().append("div").merge(b).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(E,x)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${m.size()+x}-title`));v.selectAll("*").remove();let g,_=1;v.append("svg").classed("icon",!0).each(function(E){const x=z(this);!g||g!=E.type?(g=E.type,_=1):_++,w.addAdditionalItem(x,E,_)}),v.append("p").merge(v.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),f&&d.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:s}=jt.area;if(n.type===Ft.RADIUS?e.style("width",`${s}px`).style("height",`${s}px`):e.style("width",`${i}px`).style("height",`${s}px`),n.type===Ft.RADIUS){const{iconData:a,fill:o,stroke:l}=jt.radius;e.attr("fill","none").selectAll("circle").data(a).enter().append("circle").classed("radius",!0).attr("role",Pt.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Ft.LINE){const a=jt.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",Pt.IMG).attr("aria-label","line").attr("x1",0).attr("y1",a.yPosition).attr("x2",i).attr("y2",a.yPosition).style("stroke",n.stroke?n.stroke:a.stroke).style("stroke-width",a.strokeWidth)}else if(n.type===Ft.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",Pt.IMG).attr("aria-label","area").attr("width",i).attr("height",s).style("fill",r>3&&!n.fill?jt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Ft.SIZE){const{iconData:a,fill:o,stroke:l}=jt.size;e.attr("fill","none").attr("role",Pt.IMG).attr("aria-label","size").selectAll("rect").data(a).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Ft.QUARTILE){const{iconData:a}=jt.quartile;e.selectAll("rect").attr("role",Pt.IMG).attr("aria-label","quartile").data(a).enter().append("rect").attr("class",(o,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",o=>o.x).attr("y",o=>o.y).attr("width",o=>o.width).attr("height",o=>o.height)}else if(n.type===Ft.ZOOM){const{iconData:a,color:o}=S(jt,"zoom"),l=e.attr("role",Pt.IMG).attr("aria-label","zoom").selectAll("g.icon").data(a).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:o),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:o)}}truncateLegendText(){const e=this.getComponentContainer(),n=S(this.getOptions(),"legend","truncation"),r=S(n,"type"),i=S(n,"threshold"),s=S(n,"numCharacter"),a=e.selectAll("div.legend-item p");a.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==Me.NONE?a.html(function(o){const l=Pe(o.name);return l.length>i&&l.length!==s?ui(l,r,s):l}):a.html(o=>Pe(o.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=S(r,"legend"),s=S(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(a){e.services.events.dispatchEvent($.Legend.ITEM_HOVER,{hoveredElement:z(this)});const o=z(this);o.select("div.checkbox").classed("hovered",!0);const l=o.datum();l.name.length>s.threshold&&s.numCharacter<l.name.length&&s.type!==Me.NONE&&e.services.events.dispatchEvent($.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})}).on("mousemove",function(a){z(this).datum().name.length>s.threshold&&s.type!==Me.NONE&&e.services.events.dispatchEvent($.Tooltip.MOVE,{event:a})}).on("click",function(){e.services.events.dispatchEvent($.Legend.ITEM_CLICK,{clickedElement:z(this)});const a=z(this).datum();e.model.toggleDataLabel(a.name)}).on("mouseout",function(){const a=z(this);a.select("div.checkbox").classed("hovered",!1),a.datum().name.length>s.threshold&&s.type!==Me.NONE&&e.services.events.dispatchEvent($.Tooltip.HIDE),e.services.events.dispatchEvent($.Legend.ITEM_MOUSEOUT,{hoveredElement:a})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(a){a.key&&a.key==="Tab"&&e.services.events.dispatchEvent($.Legend.ITEM_HOVER,{hoveredElement:z(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(a,o){a.key&&a.key===" "?(a.preventDefault(),e.model.toggleDataLabel(o.name)):a.key&&a.key==="Tab"&&e.services.events.dispatchEvent($.Legend.ITEM_MOUSEOUT,{hoveredElement:z(this)})}),n.selectAll("g.additional-item").on("mouseover",function(a){const o=z(this),l=o.datum();l.name.length>s.threshold&&e.services.events.dispatchEvent($.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})})}}class Rp extends $t{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=wt.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[s,a]=r.range(),[o,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=W.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=W.appendOrSelect(this.chartClipPath,`rect.${this.type}`);a-s>0&&c.attr("x",s).attr("y",l).attr("width",a-s).attr("height",o-l),this.chartClipPath.merge(c).lower()}}class z2 extends Rp{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=W.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=W.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=W.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var Zn,It;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(It||(It={}));var Xu=(Zn={},Zn[It.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},Zn[It.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},Zn[It.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Zn[It.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Zn),Zu=typeof window<"u"?window:{innerHeight:0,innerWidth:0},qs=function(){function t(e){e===void 0&&(e={}),this.positions=Xu,this.positions=Object.assign({},Xu,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var s=e.getBoundingClientRect(),a=document.body.getBoundingClientRect();return{top:s.top-a.top+r.top,left:s.left-a.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var s=i(e),a=e.getBoundingClientRect();return this.calculatePosition(s,a,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,s){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),s===void 0&&(s=this.findPosition.bind(this));var o=r.map(function(l){var c=s(e,n,l),u=a.getPlacementBox(n,c),h=0,d=0,f=i();u.top<f.top?h=f.top-u.top:u.bottom>f.height&&(h=u.bottom-f.height),u.left<f.left?d=f.left-u.left:u.right>f.width&&(d=u.right-f.width),h&&!d?d=1:d&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,T=h*d,m=p-T,y=m/p;return{placement:l,weight:y}});return o.sort(function(l,c){return c.weight-l.weight}),o[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var a=function(o,l,c){return s.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,a)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:Zu.innerHeight,width:Zu.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new qs;class Pp extends $t{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=wt.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new qs,this.handleShowTooltip=i=>{const s=i.detail.data||i.detail.items,a=z(i.detail.event.target).datum();let o;const l=this.formatItems(this.getItems(i));i.detail.content?o=`<div class="title-tooltip"><p>${Pi(i.detail.content)}</p></div>`:o=Pi(this.getTooltipHTML(l));const c=W.appendOrSelect(this.tooltip,"div.content-box");if(S(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${Pi(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${Pi(this.model.getOptions().tooltip.customHTML(s,o,a))}</p></div>`);else c.html(o);c.selectAll(".datapoint-tooltip").each(function(u,h){const d=l[h];l[h]&&l[h].color&&z(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",d.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener($.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==$.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener($.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener($.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener($.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener($.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener($.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener($.Tooltip.MOVE,null),this.services.events.removeEventListener($.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener($.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener($.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener($.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener($.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=S(n,"tooltip","truncation","type"),i=S(n,"tooltip","truncation","threshold"),s=S(n,"tooltip","truncation","numCharacter");return r!==Me.NONE?e.map(a=>{const o=a.labelIcon?12:0;return a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a.label&&a.label.length+o>i&&(a.label=ui(a.label,r,s)),a.value&&a.value.length>i&&(a.value=ui(a.value,r,s)),a}):e.map(a=>(a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}isDate(e){return e instanceof Date}valueFormatter(e,n){const r=this.getOptions(),i=S(r,"tooltip","valueFormatter"),{code:s,number:a,date:o}=S(r,"locale");if(i)return i(e,n);if(this.isDate(e))return o(e,s,{month:"short",day:"numeric",year:"numeric"});try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){const l=new Date(e);return o(l,s,{month:"short",day:"numeric",year:"numeric"})}}catch{}return a(e,s)}render(e=!1){const n=this.getOptions(),r=S(n,"tooltip","enabled");if(r){const i=z(this.services.domUtils.getHolder()),s=S(n,"style","prefix");this.tooltip=W.appendOrSelect(i,`div.${se}--${s}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==It.LEFT?i.left-=r:n==It.RIGHT?i.left+=r:n==It.TOP?i.top-=r:n==It.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,s=this.tooltip.node(),a=this.getOptions(),o=S(a,"zoomBar","top","enabled"),l=!!S(e,"detail","noWrap"),c=Array.isArray(S(e,"detail","placements")),u=c?S(e,"detail","placements"):[It.RIGHT,It.LEFT,It.TOP,It.BOTTOM];let h,{horizontalOffset:d}=Kc;const{defaultOffset:f}=Kc;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const m=S(e,"detail","event","target"),y=this.services.domUtils.getElementOffset(m,!0);h=this.positionService.findBestPlacementAt(y,s,u,()=>({top:0,left:0,width:r,height:i}));let w=this.positionService.findPosition(m,s,h,()=>this.services.domUtils.getElementOffset(m));w=this.addOffsetByPlacement(w,h,f),this.positionService.setElement(s,w);return}let p=S(e,"detail","mousePosition");if(!p)p=An(S(e,"detail","event"),n);else{const m=S(a,"zoomBar","top","type"),y=ue.height[m];o&&(p[1]+=y+ue.spacerHeight)}p[0]/r>.9?h=It.LEFT:p[0]/r<.1?h=It.RIGHT:h=this.positionService.findBestPlacementAt({left:p[0],top:p[1]},s,u,()=>({top:void 0,left:void 0,width:r,height:i})),h===It.LEFT&&(d*=-1);const T=this.positionService.findPositionAt({left:p[0]+d,top:p[1]},s,h);this.positionService.setElement(s,T)}}const Np=class Yi extends $t{constructor(){super(...arguments),this.type="grid-brush",this.renderType=wt.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer({isPresentational:!0});if(!n)throw new Error("SVG was not defined");const i=W.appendOrSelect(n,"svg.chart-grid-backdrop"),s=W.appendOrSelect(i,`g.${this.type}`),a=W.appendOrSelect(s,this.selectionSelector),{width:o,height:l}=W.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[d]=h.range();r.attr("transform",`translate(${d},0)`);const f=W.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===ot.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const T=g=>{const _=g[1]-g[0];let E="0,"+_.toString();const x=Math.floor(l/Yi.DASH_LENGTH),A=x*Yi.DASH_LENGTH;for(let k=0;k<x;k++)E+=","+Yi.DASH_LENGTH;E+=","+(l-A),x%2===1&&(E+=",0"),E+=","+_.toString(),E+=","+l.toString(),f.attr("stroke-dasharray",E)},m=g=>{const _=g.selection;_===null||_[0]===_[1]||(f.attr("x",parseFloat(a.attr("x"))+parseFloat(i.attr("x"))).attr("y",a.attr("y")).attr("width",a.attr("width")).attr("height",a.attr("height")).style("cursor","pointer").style("display",null),T(_))},y=(g,_)=>{const E=ep().range([0,o]).domain(p);let x=[E.invert(g),E.invert(_)];x[0].valueOf()===x[1].valueOf()&&(x=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==x[0].valueOf()||p[1].valueOf()!==x[1].valueOf())&&this.services.zoom.handleDomainChange(x)};let w;const b=g=>{const _=g.selection;_!==null&&(y(_[0],_[1]),s.call(w.move,null),f.style("display","none"))};l!=0&&o!=0&&(w=mp().extent([[0,0],[o-1,l]]).on("start brush end",m).on("end.brushed",b),s.call(w));const v=this.services.zoom.getZoomRatio();i.on("click",function(g){if(g.shiftKey){const _=this.services.domUtils.getHolder(),E=An(s.node(),_)[0];let x=E-o*v/2;x<0&&(x=0);let A=E+o*v/2;A>o&&(A=o),y(x,A)}})}}};Np.DASH_LENGTH=4;let j2=Np;class G2 extends $t{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=wt.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=mp(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener($.ZoomBar.UPDATE,this.render.bind(this));const e=S(this.getOptions(),"zoomBar",H.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"zoom bar"}),r=this.services.zoom.isZoomBarLoading(H.TOP),i=this.services.zoom.isZoomBarLocked(H.TOP),s=S(this.getOptions(),"zoomBar",H.TOP,"type"),a=S(this.getOptions(),"axes",H.BOTTOM,"highlights"),o=ue.height[s],{width:l}=W.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const h=W.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",o).attr("opacity",1);if(W.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",o).attr("width","100%").attr("height",ue.spacerHeight).attr("opacity",1).attr("fill","none"),s===Ie.GRAPH_VIEW?W.appendOrSelect(h,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):s===Ie.SLIDER_VIEW&&W.appendOrSelect(h,"rect.zoom-slider-bg").attr("x",c).attr("y",o/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(h,c,l);return}const{cartesianScales:d}=this.services,f=d.getMainXScale(),p=d.getMainYScale(),T=d.getMainXScaleType();if(f&&T===ot.TIME){let m=this.services.zoom.getZoomBarData();if(A_(m)||m.length===1)return;this.xScale=f.copy(),this.yScale=p.copy();const y=this.services.zoom.getDefaultZoomBarDomain(m);m=this.compensateDataForDefaultDomain(m,y);const w=this.model.get("initialZoomDomain"),b=S(this.getOptions(),"zoomBar",H.TOP,"initialZoomDomain");b&&b[0]&&b[1]&&(b[0]=new Date(b[0]),b[1]=new Date(b[1])),b&&!(w&&w[0].valueOf()===b[0].valueOf()&&w[1].valueOf()===b[1].valueOf())?this.model.set({initialZoomDomain:pt([],b),zoomDomain:b?pt([],b):y},{skipUpdate:!0}):b===null&&w!==null&&this.model.set({initialZoomDomain:null,zoomDomain:pt([],y)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(y),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,o-6]).domain(ar(m,_=>_.value));const v=this.model.get("zoomDomain");if(s===Ie.GRAPH_VIEW&&(this.renderZoomBarArea(h,"path.zoom-graph-area-unselected",m,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(h,"path.zoom-graph-area",m,this.clipId),this.renderZoomBarBaseline(h,c,l),a)){const _=a.highlightStartMapsTo,E=a.highlightEndMapsTo,x=a.color,A=a.labelMapsTo;a.data.forEach((k,M)=>{W.appendOrSelect(h,`rect.highlight-${M}`).attr("height",o-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(k[_])).attr("width",this.xScale(k[E])-this.xScale(k[_])).style("fill",x&&x.scale[k[A]]?x.scale[k[A]]:null).style("fill-opacity",.1).style("stroke",x&&x.scale[k[A]]?x.scale[k[A]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(v,c,l);const g=W.appendOrSelect(n,this.brushSelector).call(this.brush);if(v!==void 0)if(v[0].valueOf()===v[1].valueOf())g.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const _=v.map(E=>this.xScale(E));_[1]-_[0]<this.MIN_SELECTION_DIFF||(g.call(this.brush.move,_),this.updateBrushHandle(this.getComponentContainer(),_))}i&&(this.brush.filter(()=>!1),g.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const i=o=>{const l=o.selection;l===null?this.handleBrushedEvent(o,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(o,e,this.xScale,l)},s=S(this.getOptions(),"zoomBar",H.TOP,"type"),a=ue.height[s];this.brush.extent([[n,0],[r,a]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(e,n,r,i){const s=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(n===void 0||n[0]!==s[0]||n[1]!==s[1])&&this.services.zoom.handleDomainChange(s,{dispatchEvent:!1});let a;e.type==="start"?a=$.ZoomBar.SELECTION_START:e.type==="brush"?a=$.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(a=$.ZoomBar.SELECTION_END,this.services.events.dispatchEvent($.ZoomDomain.CHANGE,{newDomain:s})),this.services.events.dispatchEvent(a,{selection:i,newDomain:s})}}updateBrushHandle(e,n){const r=this,i=ue.handleWidth,s=S(this.getOptions(),"zoomBar",H.TOP,"type"),a=ue.height[s],o=-i/2,l=ue.handleBarWidth,c=s===Ie.GRAPH_VIEW?ue.handleBarHeight:6,u=-l/2,h=(a-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(f){if(f.type==="w")return Math.max(n[0]+o,r.maxSelectionRange[0]);if(f.type==="e")return Math.min(n[1]+o,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",a).attr("cursor","ew-resize").style("display",null);const d=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);d.enter().append("rect").attr("class",function(f){return"handle-bar handle-bar--"+f.type}),d.attr("x",function(f){if(f.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-o+u);if(f.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+o+u)}).attr("y",h).attr("width",l).attr("height",c).attr("cursor","ew-resize"),s===Ie.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],a)}updateSliderSelectedArea(e){const n=S(this.getOptions(),"zoomBar",H.TOP,"type"),r=ue.height[n],i=this.getComponentContainer().select("svg.zoom-container");W.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:s}=this.services,a=s.getMainXAxisPosition(),o=s.getMainYAxisPosition(),l=s.getMainXScaleType(),c=s.getMainYScaleType(),u=(y,w,b)=>v=>s.getValueFromScale(y,w,b,v),h=u(this.xScale,l,a),d=u(this.yScale,c,o),f=S(this.getOptions(),"zoomBar",H.TOP,"type"),p=ue.height[f],T=al().x(y=>h(y)).y0(p).y1(y=>p-d(y)),m=W.appendOrSelect(e,n).datum(r).attr("d",T);i&&m.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,s,a){const o=W.appendOrSelect(e,"clipPath").attr("id",n);W.appendOrSelect(o,"rect").attr("x",r).attr("y",i).attr("width",s).attr("height",a)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=Ns(e),i=this.services.cartesianScales.getDomainIdentifier(),s=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const a={};a[i]=n[0],a[s]=0,r.unshift(a)}if(Number(n[1])>Number(r[r.length-1][i])){const a={};a[i]=n[1],a[s]=0,r.push(a)}return r}renderZoomBarBaseline(e,n,r,i=!1){const s=S(this.model.getOptions(),"zoomBar",H.TOP,"type"),a=ue.height[s],o=sl()([[n,a],[r,a]]);W.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",o).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),W.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),S(this.getOptions(),"zoomBar",H.TOP,"type")===Ie.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener($.ZoomBar.UPDATE,this.render.bind(this))}}class W2 extends $t{constructor(e,n){super(e,n),this.type="threshold",this.renderType=wt.SVG,this.positionService=new qs}render(e=!1){const n=S(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(H).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u==null?void 0:u.correspondingDatasets,mapsTo:u==null?void 0:u.mapsTo})}});const i=this.getComponentContainer({ariaLabel:"threshold lines",withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const a=s.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("line").attr("class","threshold-line"),o.append("rect").attr("class","threshold-hoverable-area"),o.merge(a).attr("class","threshold-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),h=l.services.cartesianScales.getScaleTypeByPosition(c);let d=null,f=null;c===H.LEFT||c===H.RIGHT?(f=u,d=l.services.cartesianScales.getMainXScale()):(d=u,f=l.services.cartesianScales.getMainYScale());const p=h===ot.LABELS,[T,m]=d.range(),[y,w]=f.range(),{cartesianScales:b}=l.services,v=b.getOrientation(),g=k=>b.getDomainValue(k),_=k=>b.getRangeValue(k),[E,x]=lr(g,_,v),A=z(this);c===H.TOP||c===H.BOTTOM?(A.selectAll("line.threshold-line").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"threshold-line-update",animate:e})).attr("y1",w).attr("y2",y).attr("x1",({datum:k})=>E(k)+(p?u.step()/2:0)).attr("x2",({datum:k})=>E(k)+(p?u.step()/2:0)).style("stroke",({fillColor:k})=>k),A.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:k})=>-E(k)).attr("width",Math.abs(y-w)).classed("rotate",!0)):(A.selectAll("line.threshold-line").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"threshold-line-update",animate:e})).attr("x1",T).attr("x2",m).attr("y1",({datum:k})=>x(k)+(p?u.step()/2:0)).attr("y2",({datum:k})=>x(k)+(p?u.step()/2:0)).style("stroke",({fillColor:k})=>k),A.selectAll("rect.threshold-hoverable-area").attr("x",T).attr("y",({datum:k})=>x(k)).attr("width",Math.abs(m-T)).classed("rotate",!1))}),this.services.events.addEventListener($.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener($.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions(),s=this.services.cartesianScales.getScaleTypeByPosition(r),{code:a,number:o}=S(i,"locale");if(s===ot.TIME){const l=[H.LEFT,H.RIGHT].includes(r),c=this.services.cartesianScales.getMainXScale(),u=this.services.cartesianScales.getMainYScale(),h=l?u:c,d=S(i,"timeScale"),f=no(h.ticks(),S(d,"timeInterval"));return eo(n,0,h.ticks(),f,d,i.locale)}return o(n,a)}appendThresholdLabel(){const e=z(this.services.domUtils.getHolder()),n=S(this.getOptions(),"style","prefix");this.label=W.appendOrSelect(e,`div.${se}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=An(e,r),s=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(Pe(`${n.label||"Threshold"}: ${s}`)).style("background-color",n.fillColor);const a=this.label.node(),o=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},a,[It.RIGHT,It.LEFT,It.TOP,It.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},a,o);this.positionService.setElement(a,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=S(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){z(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent($.Threshold.SHOW,{event:n,hoveredElement:z(this),datum:z(this).datum()})}).on("mouseout",function(n){z(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent($.Threshold.HIDE,{event:n,hoveredElement:z(this),datum:z(this).datum()})})}}class Y2 extends $t{constructor(e,n){super(e,n),this.type="highlight",this.renderType=wt.SVG,this.positionService=new qs,this.highlightStrokeWidth=1}render(e=!1){const n=S(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(H).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({ariaLabel:"highlight areas",withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-highlight ${c.axisPosition}`);const a=s.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("rect").attr("class","highlight-bar"),o.append("line").attr("class","highlight-line"),o.merge(a).attr("class","highlight-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),h=l.services.cartesianScales.getMainYScale(),[d,f]=u.range(),[p,T]=h.range(),{cartesianScales:m}=l.services,y=m.getOrientation(),w=E=>m.getDomainValue(E),b=E=>m.getRangeValue(E),[v,g]=lr(w,b,y),_=z(this);c===H.TOP||c===H.BOTTOM?_.selectAll("rect.highlight-bar").transition().call(E=>l.services.transitions.setupTransition({transition:E,name:"highlight-bar-update",animate:e})).attr("y",Math.max(T+l.highlightStrokeWidth,0)).attr("height",Math.max(p-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:E,...x})=>v(x[E])).attr("width",({highlightStartMapsTo:E,highlightEndMapsTo:x,...A})=>Math.max(v(A[x])-v(A[E]),0)).style("stroke",({color:E,labelMapsTo:x,...A})=>E&&E.scale[A[x]]?E.scale[A[x]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:E,labelMapsTo:x,...A})=>E&&E.scale[A[x]]?E.scale[A[x]]:null):_.selectAll("rect.highlight-bar").transition().call(E=>l.services.transitions.setupTransition({transition:E,name:"highlight-bar-update",animate:e})).attr("x",d).attr("width",Math.max(f-d,0)).attr("y",({highlightEndMapsTo:E,...x})=>g(x[E])).attr("height",({highlightStartMapsTo:E,highlightEndMapsTo:x,...A})=>Math.max(g(A[E])-g(A[x]),0)).style("stroke",({color:E,labelMapsTo:x,...A})=>E&&E.scale[A[x]]?E.scale[A[x]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:E,labelMapsTo:x,...A})=>E&&E.scale[A[x]]?E.scale[A[x]]:null)})}}class q2 extends Pp{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,s=i.getDomainIdentifier(),a=i.isDualAxes(),{groupMapsTo:o}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][s];let h;if(n.length===1){const d=n[0],f=i.getRangeIdentifier(d);if(a){const T=i.getRangeAxisPosition({datum:d,groups:[d[o]]});c=i.getScaleLabel(T)}const p=d[f];h=[{label:l,value:u},...Array.isArray(p)&&p.length===2?[{label:"Start",value:p[0]},{label:"End",value:p[1]}]:[{label:c,value:d[f]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(T=>h.push({label:T.label,value:T.value})),h.push({label:Jn(r,"locale.translations.group")||Jn(r,"tooltip.groupLabel"),value:d[o],color:this.model.getFillColor(d[o]),class:this.model.getColorClassName({classNameTypes:[Wt.TOOLTIP],dataGroupName:d[o]})})}else if(n.length>1&&(h=[{label:l,value:u}],h=h.concat(n.map(d=>{const f=d[i.getRangeIdentifier(d)];return{label:d[o],value:Array.isArray(f)&&f.length===2?`${f[0]} - ${f[1]}`:f,color:this.model.getFillColor(d[o]),class:this.model.getColorClassName({classNameTypes:[Wt.TOOLTIP],dataGroupName:d[o]})}}).sort((d,f)=>f.value-d.value)),!a&&S(r,"tooltip","showTotal")===!0)){const d=i.getRangeIdentifier();h.push({label:Jn(r,"locale.translations.total")||Jn(r,"tooltip.totalLabel")||"Total",value:n.reduce((f,p)=>f+p[d],0),bold:!0})}return h}}var fo=Math.PI,po=2*fo,En=1e-6,X2=po-En;function Ku(){this._x0=this._y0=this._x1=this._y1=null,this._=""}Ku.prototype={constructor:Ku,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,l=r-e,c=s-t,u=a-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>En)if(!(Math.abs(u*o-l*c)>En)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-s,f=r-a,p=o*o+l*l,T=d*d+f*f,m=Math.sqrt(p),y=Math.sqrt(h),w=i*Math.tan((fo-Math.acos((p+h-T)/(2*m*y)))/2),b=w/y,v=w/m;Math.abs(b-1)>En&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*f)+","+(this._x1=t+v*o)+","+(this._y1=e+v*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=t+a,c=e+o,u=1^s,h=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>En||Math.abs(this._y1-c)>En)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%po+po),h>X2?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>En&&(this._+="A"+n+","+n+",0,"+ +(h>=fo)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};class Z2 extends $t{constructor(){super(...arguments),this.type="grid",this.renderType=wt.SVG}render(e=!0){const n=S(this.getOptions(),"grid","x","enabled"),r=S(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),!(!n&&!r)&&(n&&(W.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),r&&(W.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))}drawXGrid(e){const n=this.parent,r=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),s=pp(i).tickSizeInner(-r).tickSizeOuter(0);if(S(this.getOptions(),"grid","x","alignWithAxisTicks")){const o=this.services.cartesianScales.getDomainAxisPosition(),l=S(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=S(this.getOptions(),"grid","x","numberOfTicks");s.ticks(o)}const a=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);e?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:e})).call(s):a.call(s),this.cleanGrid(a)}drawYGrid(e){const n=this.parent,r=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),s=gp(i).tickSizeInner(-r).tickSizeOuter(0);if(S(this.getOptions(),"grid","y","alignWithAxisTicks")){const o=this.services.cartesianScales.getRangeAxisPosition(),l=S(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=S(this.getOptions(),"grid","y","numberOfTicks");s.ticks(o)}const a=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);e?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:e})).call(s):a.call(s),this.cleanGrid(a)}getGridlineThreshold(e){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,h)=>Number(Xe(u).tx)-Number(Xe(h).tx));let i=-1;if(!r.length)return;r.forEach(u=>{e[0]>=+Xe(u).tx&&i++});const s=i+1<r.length?i+1:r.length,a=r[i],o=r[s];let l;if(!a)l=+Xe(o).tx;else if(o)l=+Xe(o).tx-+Xe(a).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=W.getSVGElementSize(u).width-+Xe(a).tx}const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(e){const n=S(this.getOptions,"tooltip","gridline","threshold"),r=n||this.getGridlineThreshold(e);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=Xe(this),s={min:Number(i.tx)-r,max:Number(i.tx)+r};return s.min<=e[0]&&e[0]<=s.max})}drawBackdrop(e,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),s=this.services.cartesianScales.getMainYScale(),[a,o]=i.range(),[l,c]=s.range();this.backdrop=W.appendOrSelect(r,"svg.chart-grid-backdrop").attr("role","presentation");const u=W.appendOrSelect(this.backdrop,e||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",a).attr("y",c).attr("width",Math.abs(o-a)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(e){e.selectAll("text").remove(),e.select(".domain").remove()}}class K2 extends $t{constructor(){super(...arguments),this.type="area",this.renderType=wt.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?Ze.opacity.unselected:Ze.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Ze.opacity.selected)}}init(){const e=this.services.events;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"area graphs",withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:s}=this.services,a=s.getOrientation(),o=al().curve(this.services.curves.getD3Curve()).defined(g=>{const _=s.getRangeIdentifier();return g[_]!=null}),l=this.model.getGroupedData(this.configs.groups),c=S(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const d=(g,_)=>{S(r,"axes",g,"includeZero")===!1&&_[0]>0&&_[1]>0&&(h=_[0])},f=g=>u?s.getBoundedScaledValues(g)[0]:s.getRangeValue(h),p=g=>u?s.getBoundedScaledValues(g)[1]:s.getRangeValue(g);a===ee.VERTICAL?(i=s.getMainYScale().domain(),d(s.getMainYAxisPosition(),i),o.x(g=>s.getDomainValue(g)).y0(g=>f(g)).y1(g=>p(g))):(i=s.getMainXScale().domain(),d(s.getMainXAxisPosition(),i),o.x0(g=>f(g)).x1(g=>p(g)).y(g=>s.getDomainValue(g)));const T=S(r,"color","gradient","enabled"),m=l&&l.length===1&&T;l.length>1&&T&&console.error("Gradients can only be enabled when having 1 single dataset");const y=n.selectAll("path.area").data(l,g=>g.name),w=z(this.services.domUtils.getMainContainer());if(y.exit().attr("opacity",0).remove(),!l.length)return;if(m){const g=w.select(`path.${this.model.getColorClassName({classNameTypes:[Wt.STROKE],dataGroupName:l[0].name})}`).node();let _;if(g)_=getComputedStyle(g,null).getPropertyValue("stroke");else{const E=S(this.model.getOptions(),"color","scale");if(E!==null){const x=Object.keys(E);_=E[x[0]]}}di.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:di.getStops(i,_)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const b=this,v=y.enter().append("path");m?v.merge(y).style("fill",g=>`url(#${this.services.domUtils.generateElementIDString(`${g.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:g.name,originalClassName:"area"})).attr("d",g=>{const{data:_}=g;return o(_)}):(v.attr("opacity",0).merge(y).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[Wt.FILL,Wt.STROKE],dataGroupName:g.name,originalClassName:"area"})).style("fill",g=>b.model.getFillColor(g.name,null,g.data)).transition().call(g=>this.services.transitions.setupTransition({transition:g,name:"area-update-enter",animate:e})).attr("opacity",u?1:Ze.opacity.selected).attr("d",g=>{const{data:_}=g;return o(_)}),u&&v.attr("fill-opacity",Ze.opacity.selected).style("stroke",g=>b.model.getStrokeColor(g.name,null,g.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Da extends $t{constructor(){super(...arguments),this.type="line",this.renderType=wt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?ua.opacity.unselected:ua.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",ua.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,s=f=>r.getDomainValue(f),a=f=>r.getRangeValue(f),[o,l]=lr(s,a,r.getOrientation()),c=this.getOptions(),u=sl().x(o).y(l).curve(i.getD3Curve()).defined(f=>{const p=r.getRangeIdentifier(f);return f[p]!=null});let h=[];if(this.configs.stacked){const f=Object.keys(c.axes).some(T=>c.axes[T].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:f}).map(T=>{const m=this.services.cartesianScales.getDomainIdentifier(T),y=this.services.cartesianScales.getRangeIdentifier(T);return{name:S(T,0,p),data:T.map(w=>({[m]:w.data.sharedStackKey,[p]:w[p],[y]:w[1]})),hidden:!_M(T,w=>w[0]!==w[1])}})}else h=this.model.getGroupedData(this.configs.groups);const d=n.selectAll("path.line").data(h,f=>f.name);d.exit().attr("opacity",0).remove(),d.enter().append("path").classed("line",!0).attr("opacity",0).merge(d).data(h,f=>f.name).attr("class",f=>this.model.getColorClassName({classNameTypes:[Wt.STROKE],dataGroupName:f.name,originalClassName:"line"})).style("stroke",f=>this.model.getStrokeColor(f.name,null,f.data)).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",f=>{const{data:p}=f;return p.map(T=>{const m=this.services.cartesianScales.getRangeIdentifier(T);return T[m]}).join(",")}).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"line-update-enter",animate:e})).attr("opacity",f=>f.hidden?0:1).attr("d",f=>{const{data:p}=f;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const Qu=5;function Q2(t,e){return t>e-Qu&&t<e+Qu}class J2 extends $t{constructor(){super(...arguments),this.type="ruler",this.renderType=wt.SVG,this.isXGridEnabled=S(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=S(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=S(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,s=this.services.cartesianScales.getOrientation(),a=this.model.getDisplayData(),o=this.services.cartesianScales.getRangeScale(),[l,c]=o.range(),u=s===ee.HORIZONTAL?r:n,h=W.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),d=W.appendOrSelect(h,"line.ruler-line"),f=i.selectAll("[role=graphics-symbol]"),p=a.map(m=>({domainValue:this.services.cartesianScales.getDomainValue(m),originalData:m})).filter(m=>Q2(m.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(m=>m.domainValue).join()===this.pointsWithinLine.map(m=>m.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent($.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const T=this.pointsWithinLine.reduce((m,y)=>{if(m.length===0)return m.push(y),m;const w=m[0].domainValue,b=Math.abs(u-y.domainValue),v=Math.abs(u-w);return b>v||(b<v?m=[y]:m.push(y)),m},[]);if(T.length>0){const m=T.map(v=>v.originalData).filter(v=>{const g=this.services.cartesianScales.getRangeIdentifier(v);return v[g]!=null}),y=T.map(v=>v.domainValue),w=f.filter(v=>{const g=this.services.cartesianScales.getDomainValue(v);return y.includes(g)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!vM(this.elementsToHighlight,w)&&this.hideRuler(),w.dispatch("mouseover"),this.elementsToHighlight=w,this.services.events.dispatchEvent($.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:d,data:this.formatTooltipData(m)}),h.attr("opacity",1);const b=T[0];s==="horizontal"?d.attr("x1",c).attr("x2",l).attr("y1",b.domainValue).attr("y2",b.domainValue):d.attr("y1",c).attr("y2",l).attr("x1",b.domainValue).attr("x2",b.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=W.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent($.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(s){const a=An(s,e.parent.node());e.showRuler(s,a)};if(r.length>100){const s=r.length%50*12.5;i=jE(function(a){const{mousePosition:o}=this;e.showRuler(a,o)},s,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=W.appendOrSelect(e,"svg.chart-grid-backdrop")}}let qi=class extends $t{constructor(){super(...arguments),this.type="scatter",this.renderType=wt.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var s;return(s=this.services.transitions)==null?void 0:s.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener($.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener($.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(s=>s[r].getTime()>=i[0].getTime()&&s[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(s=>e.axes[s].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(s=>{const a=i.getRangeIdentifier(s);return s[a]!==void 0&&s[a]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(S(this.getOptions(),"points","enabled")||S(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services;if(!s)throw new Error("Services cartesianScales are undefined.");const a=s.getDomainIdentifier(),o=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[a]}`);o.exit().attr("opacity",0).remove();const l=o.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(o);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[s,a]=lr(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[o,l]=lr(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=o(e),u=l(e);return a&&s?u<=a.scaleValue&&c>=s.scaleValue:a?u<=a.scaleValue:s?c>=s.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:s}=r.points,{cartesianScales:a}=this.services;if(!a)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:o}=r.data,l=f=>a.getDomainValue(f),c=f=>a.getRangeValue(f),[u,h]=lr(l,c,a.getOrientation()),{fadeInOnChartHolderMouseover:d}=this.configs;e.raise().classed("dot",!0).attr("class",f=>{const p=a.getDomainIdentifier(f),T=this.model.getIsFilled(f[o],f[p],f,i)?[Wt.FILL,Wt.STROKE]:[Wt.STROKE];return this.model.getColorClassName({classNameTypes:T,dataGroupName:f[o],originalClassName:"dot"})||""}).classed("threshold-anomaly",f=>this.isDatapointThresholdAnomaly(f)).classed("filled",f=>{const p=a.getDomainIdentifier(f);return this.model.getIsFilled(f[o],f[p],f,i)}).classed("unfilled",f=>{const p=a.getDomainIdentifier(f);return!this.model.getIsFilled(f[o],f[p],f,i)}).transition().call(f=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:f,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",f=>{const p=a.getDomainIdentifier(f);if(this.model.getIsFilled(f[o],f[p],f,i))return this.model.getFillColor(f[o],f[p],f)}).style("stroke",f=>{const p=a.getDomainIdentifier(f);return this.model.getStrokeColor(f[o],f[p],f)}).attr("fill-opacity",i?s:1).attr("opacity",d?0:1).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",f=>{const p=a.getRangeIdentifier(f);return f[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var s,a;const o=z(this);o.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:l[n],originalClassName:o.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(s=e.services.events)==null||s.dispatchEvent($.Tooltip.SHOW,{event:r,hoveredElement:o,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(a=e.services.events)==null||a.dispatchEvent($.Scatter.SCATTER_MOUSEOVER,{event:r,element:o,datum:i})}).on("mousemove",function(r,i){var s,a;const o=z(this);(s=e.services.events)==null||s.dispatchEvent($.Scatter.SCATTER_MOUSEMOVE,{event:r,element:o,datum:i}),(a=e.services.events)==null||a.dispatchEvent($.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var s;(s=e.services.events)==null||s.dispatchEvent($.Scatter.SCATTER_CLICK,{event:r,element:z(this),datum:i})}).on("mouseout",function(r,i){var s,a,o;const l=z(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(s=e.services.cartesianScales)==null?void 0:s.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",d=>h||c?e.model.getFillColor(d[n],d[u],d):null)}(a=e.services.events)==null||a.dispatchEvent($.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(o=e.services.events)==null||o.dispatchEvent($.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener($.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener($.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}};class Bp extends $t{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=wt.SVG,this.truncation={[H.LEFT]:!1,[H.RIGHT]:!1,[H.TOP]:!1,[H.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=S(r,"axes",n,"visible"),s=this.getComponentContainer({ariaLabel:"axes"}),{width:a,height:o}=W.getSVGElementSize(s,{useAttrs:!0}),l=W.appendOrSelect(s,`g.axis.${n}`);let c,u;if(n===H.BOTTOM||n===H.TOP?(c=this.configs.axes[H.LEFT]?this.margins.left:0,u=this.configs.axes[H.RIGHT]?a-this.margins.right:a):(c=o-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const h=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===ot.LABELS||this.scaleType===ot.LABELS_RATIO?h.rangeRound([c,u]):h.range([c,u]);let d;switch(n){case H.LEFT:d=gp;break;case H.BOTTOM:d=pp;break;case H.RIGHT:d=MM;break;case H.TOP:d=xM;break}l.attr("aria-label",`${n} axis`);const f=!l.select("g.ticks").empty();let p=W.appendOrSelect(l,"g.ticks");f||(p.attr("role",`${Pt.GRAPHICS_OBJECT} ${Pt.GROUP}`),p.attr("aria-label",`${n} ticks`));const T=W.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),m=S(r,"axes",n),y=this.scaleType===ot.TIME||m.scaleType===ot.TIME,w=n===H.LEFT||n===H.RIGHT,b=this.model.get("zoomDomain");if(b&&y&&!w&&h.domain(b),!i){p.attr("aria-hidden",!0);return}const v=S(m,"scaleType"),g=S(r,"data","loading"),_=S(m,"ticks","number"),E=S(m,"ticks","values"),x=S(m,"truncation","type"),A=S(m,"truncation","threshold"),k=S(m,"truncation","numCharacter"),M=_!==null,F=S(r,"timeScale"),N=W.appendOrSelect(T,"g.tick"),Y=W.appendOrSelect(N,"text").text("0"),nt=W.getSVGElementSize(Y.node(),{useBBox:!0}).height;N.remove();const K=this.scaleType||m.scaleType||ot.LINEAR,G=d(h).tickSizeOuter(0);if(h.ticks){let j;if(M?j=_:(j=hn.ticks.number,w&&(j=this.getNumberOfFittingTicks(o,nt,hn.ticks.verticalSpaceRatio))),h.ticks().length===1&&h.ticks()[0]===0&&(j=0),G.ticks(j),y)if(!h.ticks(j).length)G.tickValues([]);else{const et=S(r,"timeScale","addSpaceOnEdges"),ct=S(r,"axes",n,"domain"),B=h.copy();et&&!ct&&B.nice(j);const R=B.ticks(j);et&&R.length>2&&!ct&&(R.splice(R.length-1,1),R.splice(0,1)),G.tickValues(R)}}let X;const lt=S(m,"ticks","formatter"),{code:rt,number:D}=S(r,"locale");if(y){const j=no(G.tickValues(),S(r,"timeScale","timeInterval"));lt===null?X=(et,ct)=>eo(et,ct,G.tickValues(),j,F,r.locale):X=(et,ct)=>{const B=eo(et,ct,G.tickValues(),j,F,r.locale);return lt(et,ct,B)}}else lt===null?K===ot.LINEAR&&(X=j=>D(j,rt)):X=lt;G.tickFormat(X);const[I,q]=this.services.cartesianScales.getScaleByPosition(n).domain();let dt;if(E){if(y)E.forEach((j,et)=>{j.getTime===void 0&&(E[et]=new Date(j))}),dt=E.filter(j=>{const et=j.getTime();return et>=new Date(I).getTime()&&et<=new Date(q).getTime()});else if(v===ot.LABELS){const j=this.services.cartesianScales.getScaleByPosition(n).domain();dt=E.filter(et=>j.includes(et))}else dt=E.filter(j=>j>=I&&j<=q);G.tickValues(dt)}switch(n){case H.LEFT:p.attr("transform",`translate(${this.margins.left}, 0)`);break;case H.BOTTOM:p.attr("transform",`translate(0, ${o-this.margins.bottom})`);break;case H.RIGHT:p.attr("transform",`translate(${a-this.margins.right}, 0)`);break;case H.TOP:p.attr("transform",`translate(0, ${this.margins.top})`);break}const st=this.model.isDataEmpty();if(m.title){const j=W.appendOrSelect(l,"text.axis-title").html(st||g?"":Pe(m.title)),et=S(m,"titleOrientation");let ct;switch(n){case H.LEFT:et===Na.RIGHT?j.attr("transform","rotate(90)").attr("y",0).attr("x",h.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):j.attr("transform","rotate(-90)").attr("y",0).attr("x",-(h.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case H.BOTTOM:j.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${o+4})`).style("text-anchor","middle");break;case H.RIGHT:et===Na.LEFT?j.attr("transform","rotate(-90)").attr("y",a).attr("x",-(h.range()[0]/2)).style("text-anchor","middle"):j.attr("transform","rotate(90)").attr("y",-a).attr("x",h.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case H.TOP:ct=W.getSVGElementSize(j,{useBBox:!0}).height,j.attr("transform",`translate(${this.margins.left/2+h.range()[1]/2}, ${ct/2})`).style("text-anchor","middle");break}}if(y){const j=no(G.tickValues(),S(r,"timeScale","timeInterval")),et=F.showDayName,ct=p;e&&(p=p.transition().call(B=>this.services.transitions.setupTransition({transition:B,name:"axis-update",animate:e}))),p=p.call(G),ct.selectAll(".tick").data(G.tickValues(),h).order().select("text").attr("class",(B,R)=>jf(B,R,G.tickValues(),j,et)?"tick-label--primary":"tick-label")}else!e||!f?p=p.call(G):p=p.transition().call(j=>this.services.transitions.setupTransition({transition:j,name:"axis-update",animate:e})).call(G);if(T.call(G),n===H.BOTTOM||n===H.TOP){let j=!1;const et=S(m,"ticks","rotation");if(et===Bi.ALWAYS)j=!0;else if(et===Bi.NEVER)j=!1;else if(!et||et===Bi.AUTO)if(h.step)j=T.selectAll("g.tick text").nodes().some(ct=>W.getSVGElementSize(ct,{useBBox:!0}).width>=h.step());else{j=!1;const ct=T.append("text").text("A"),B=W.getSVGElementSize(ct.node(),{useBBox:!0}).width;let R;T.selectAll("g.tick").each(function(){const V=z(this),L=parseFloat(S(Xe(this),"tx"));L!==null&&R+V.text().length*B*.8>=L&&(j=!0),R=L}),ct.remove()}j?(M||(G.ticks(this.getNumberOfFittingTicks(a,nt,hn.ticks.horizontalSpaceRatio)),T.call(G),p.call(G)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===H.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(g?l.attr("opacity",0):l.attr("opacity",1),p.selectAll("g.tick").attr("aria-label",j=>j),T.selectAll("g.tick").attr("aria-label",j=>j),x!==Me.NONE&&v===ot.LABELS&&!E){const j=this.services.cartesianScales.getScaleDomain(n);if(j.length>0){const et=s.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(et);const ct=this;l.selectAll("g.tick text").data(j).text(function(B){return B.length>A?(ct.truncation[n]=!0,ui(B,x,k)):B}),this.getInvisibleAxisRef().selectAll("g.tick text").data(j).text(function(B){return B.length>A?ui(B,x,k):B}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(j)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=W.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=S(i,"axes",n),a=S(s,"scaleType"),o=S(s,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent($.Axis.LABEL_MOUSEOVER,{event:c,element:z(this),datum:u}),a===ot.LABELS&&u.length>o&&l.services.events.dispatchEvent($.Tooltip.SHOW,{event:c,hoveredElement:z(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent($.Axis.LABEL_MOUSEMOVE,{event:c,element:z(this),datum:u}),a===ot.LABELS&&u.length>o&&l.services.events.dispatchEvent($.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent($.Axis.LABEL_CLICK,{event:c,element:z(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent($.Axis.LABEL_MOUSEOUT,{event:c,element:z(this),datum:u}),a===ot.LABELS&&l.services.events.dispatchEvent($.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){const i=Math.floor(e/(n*r));return pM(i,2,hn.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;W.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class tk extends Bp{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer({ariaLabel:"axes"}),i=W.appendOrSelect(r,`g.axis.${n}`),s=this;i.selectAll("g.tick").each(function(a,o){const l=z(this);l.classed("tick-hover",!0).attr("tabindex",o===0?0:-1);const c=l.select("text"),{width:u,height:h}=W.getSVGElementSize(c,{useBBox:!0}),d=W.appendOrSelect(l,"rect.axis-holder");let f=0,p=0;switch(n){case H.LEFT:f=-u+Number(c.attr("x")),p=-(h/2);break;case H.RIGHT:f=Math.abs(Number(c.attr("x"))),p=-(h/2);break;case H.TOP:f=-(u/2),p=-h+Number(c.attr("y"))/2,s.truncation[n]&&(f=0,d.attr("transform","rotate(-45)"));break;case H.BOTTOM:f=-(u/2),p=h/2-2,s.truncation[n]&&(f=-u,d.attr("transform","rotate(-45)"));break}d.attr("x",f-hn.hover.rectanglePadding).attr("y",p).attr("width",u+hn.hover.rectanglePadding*2).attr("height",h).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=W.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=S(i,"axes",n),a=S(s,"scaleType"),o=S(s,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=z(this).select("text"),h=u.datum();l.services.events.dispatchEvent($.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:h}),a===ot.LABELS&&h.length>o&&l.services.events.dispatchEvent($.Tooltip.SHOW,{event:c,element:u,datum:h})}).on("mousemove",function(c){const u=z(this).select("text"),h=u.datum();l.services.events.dispatchEvent($.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:h}),l.services.events.dispatchEvent($.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent($.Axis.LABEL_CLICK,{event:c,element:z(this).select("text"),datum:z(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent($.Axis.LABEL_MOUSEOUT,{event:c,element:z(this).select("text"),datum:z(this).select("text").datum()}),a===ot.LABELS&&l.services.events.dispatchEvent($.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const h=c.target.getBoundingClientRect();u.clientX=h.x,u.clientY=h.y}l.services.events.dispatchEvent($.Axis.LABEL_FOCUS,{event:{...c,...u},element:z(this),datum:z(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent($.Axis.LABEL_BLUR,{event:c,element:z(this),datum:z(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent($.Tooltip.HIDE),l.services.events.dispatchEvent($.Axis.LABEL_BLUR,{event:c,element:z(this),datum:z(this).select("text").datum()})),n===H.LEFT||n===H.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;W.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class ek extends $t{constructor(){super(...arguments),this.type="2D-axes",this.renderType=wt.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys(H),i=S(this.getOptions(),"axes");r.forEach(a=>{i[H[a]]&&(n[H[a]]=!0)}),this.configs.axes=n,r.forEach(a=>{const o=H[a];if(this.configs.axes[o]&&!this.children[o]){const l={position:o,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===yo.DEFAULT?new Bp(this.model,this.services,l):new tk(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[o]=c}}),Object.keys(this.children).forEach(a=>{this.children[a].render(e)});const s={};Object.keys(this.children).forEach(a=>{const o=this.children[a],l=o.configs.position,c=o.getInvisibleAxisRef(),{width:u,height:h}=W.getSVGElementSize(c,{useBBox:!0});let d;switch(o.getTitleRef().empty()?d=0:(d=W.getSVGElementSize(o.getTitleRef(),{useBBox:!0}).height,(l===H.LEFT||l===H.RIGHT)&&(d+=5)),l){case H.TOP:s.top=h+d;break;case H.BOTTOM:s.bottom=h+d;break;case H.LEFT:s.left=u+d;break;case H.RIGHT:s.right=u+d;break}}),this.services.events.dispatchEvent($.Axis.RENDER_COMPLETE),Object.keys(s).some(a=>this.margins[a]!==s[a])&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent($.ZoomBar.UPDATE),Object.keys(this.children).forEach(a=>{const o=this.children[a];o.margins=this.margins}),this.render(!0))}}class nk extends $t{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=S(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Qn.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Qn.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Qn.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Qn.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===ee.VERTICAL&&this.drawYGrid(e),n===ee.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius();this.drawRing(n,0,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=hs().domain([0,1]).range(e),this.yScale=hs().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=W.getSVGElementSize(n,{useAttrs:!0});this.backdrop=W.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const s=W.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");const[a]=this.xScale.range(),[,o]=this.yScale.range();this.backdrop.merge(s).attr("x",a).attr("y",o),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=S(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(o=>o*n),s=W.appendOrSelect(this.backdrop,"g.x.skeleton"),a=s.selectAll("line").data(i);a.enter().append("line").merge(a).attr("x1",o=>o).attr("x2",o=>o).attr("y1",0).attr("y2","100%"),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=S(this.getOptions(),"grid","y","numberOfTicks"),s=this.xScale.ticks(i).map(l=>l*n),a=W.appendOrSelect(this.backdrop,"g.y.skeleton"),o=a.selectAll("line").data(s);o.enter().append("line").merge(o).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),a.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:s,height:a}=W.getSVGElementSize(i,{useAttrs:!0}),o=W.appendOrSelect(i,"svg.chart-skeleton").attr("width",s).attr("height",a),l=n===0?"pie":"donut",c=S(this.getOptions(),l,"alignment");W.appendOrSelect(o,"rect.chart-skeleton-area-container").attr("width",s).attr("height",a).attr("fill","none");const u=b2().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),h=e+Math.abs(Cr.radiusOffset),d=e+(Math.min(s,a)-e*2)/2,f=W.appendOrSelect(o,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${h}, ${d})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let p=e+Cr.xOffset;c===Ae.CENTER?p=s/2:c===Ae.RIGHT&&(p=s-e-Cr.xOffset);const T=e+Cr.yOffset;f.attr("transform",`translate(${p}, ${T})`)}computeOuterRadius(){const{width:e,height:n}=W.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+Cr.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:s}=W.getSVGElementSize(this.parent,{useAttrs:!0}),a=0,o=s,l=W.appendOrSelect(i,"defs").lower(),c=W.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",a-3*.2*s).attr("x2",o).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${a}"></stop>
			<stop class="${r}" offset="${a+.2}"></stop>
			<stop class="${n}" offset="${a+2*.2}"></stop>
		`;c.html(u),h();function h(){c.attr("gradientTransform",`translate(${a-3*.2*s}, 0)`).transition().duration(2e3).delay(1e3).ease(CM).attr("gradientTransform",`translate(${o+3*.2*s}, 0)`).on("end",h)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class Up extends $t{constructor(){super(...arguments),this.type="zero-line",this.renderType=wt.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,s]=r.domain(),a=i>0&&s<0||i<0&&s>0,o=this.getComponentContainer({isPresentational:!0});if(!a){o.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=Uf({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());W.appendOrSelect(o,"line.domain").transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class Ju extends J2{formatTooltipData(e){return e.reverse()}}class ll extends $t{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=W.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const s=S(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*s/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}class rk extends ll{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=wt.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const s=this.getComponentContainer({ariaLabel:"grouped bar graphs",withinChartClip:!0}),a=si(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),o=s.selectAll("g.bars").data(a,u=>u);o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("bars",!0).attr("role",Pt.GROUP).attr("data-name","bars").merge(o);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===ee.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[h],u)}).attr("d",u=>{const h=this.groupScale(u[i]),d=this.getBarWidth(),f=h,p=h+d,T=this.services.cartesianScales.getRangeAxisPosition({datum:u}),m=this.services.cartesianScales.getDomainLowerBound(T),y=this.services.cartesianScales.getValueThroughAxisPosition(T,m),w=this.services.cartesianScales.getRangeValue(u),b=this.services.cartesianScales.getDomainValue(u)-d/2,v=b+d;if(!this.isOutsideZoomedDomain(b,v))return Yo({x0:f,x1:p,y0:y,y1:w},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=z(this);i.classed("hovered",!0),e.services.events.dispatchEvent($.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent($.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=z(this);e.services.events.dispatchEvent($.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent($.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent($.Bar.BAR_CLICK,{event:n,element:z(this),datum:r})}).on("mouseout",function(n,r){const i=z(this);i.classed("hovered",!1),e.services.events.dispatchEvent($.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent($.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(s=>{var a;return((a=s.data)==null?void 0:a.length)>1});if(i){const s=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][s])-e(i.data[0][s]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=S(e,"bars","width"),r=S(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,s=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-s)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Xo().domain(e).rangeRound([0,this.getGroupWidth()])}}class Hp extends ll{constructor(){super(...arguments),this.type="simple-bar",this.renderType=wt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bar graphs",withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getOrientation(),o=i.selectAll("path.bar").data(s,l=>l[r]);o.exit().attr("opacity",0).remove(),o.enter().append("path").attr("opacity",0).merge(o).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],d=this.services.cartesianScales.getDomainValue(l)-u/2,f=d+u;let p,T;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),T=this.services.cartesianScales.getRangeValue(h[1]);else{const y=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,y)),T=this.services.cartesianScales.getRangeValue(l)}const m=Math.abs(T-p);if(m!==0&&m<2&&(h>0&&a===ee.VERTICAL||h<0&&a===ee.HORIZONTAL?T=p-2:T=p+2),!this.isOutsideZoomedDomain(d,f))return Yo({x0:d,x1:f,y0:p,y1:T},a)}).attr("opacity",1).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=z(this);i.classed("hovered",!0),e.services.events.dispatchEvent($.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent($.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent($.Bar.BAR_MOUSEMOVE,{event:n,element:z(this),datum:r}),e.services.events.dispatchEvent($.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent($.Bar.BAR_CLICK,{event:n,element:z(this),datum:r})}).on("mouseout",function(n,r){const i=z(this);i.classed("hovered",!1),e.services.events.dispatchEvent($.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent($.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class ik extends $t{constructor(){super(...arguments),this.type="area-stacked",this.renderType=wt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})).attr("opacity",s=>S(s,0,i)!==n.datum().name?Ze.opacity.unselected:Ze.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",Ze.opacity.selected)}}init(){const e=this.services.events;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"stacked area graphs",withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:s}=i.data,a=Object.keys(i.axes).some(f=>i.axes[f].percentage),o=this.model.getStackedData({percentage:a,groups:this.configs.groups}),l=S(o,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),d=n.selectAll("path.area").data(o,f=>S(f,0,s));this.areaGenerator=al().x(f=>this.services.cartesianScales.getValueThroughAxisPosition(c,f.data.sharedStackKey)).y0(f=>h(f[0])).y1(f=>h(f[1])).curve(this.services.curves.getD3Curve()),d.exit().attr("opacity",0).remove(),d.enter().append("path").attr("opacity",0).merge(d).data(o,f=>S(f,0,s)).attr("class","area").attr("class",f=>this.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:S(f,0,s),originalClassName:"area"})).style("fill",f=>r.model.getFillColor(S(f,0,s),null,f)).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",f=>S(f,0,s)).transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"area-update-enter",animate:e})).attr("opacity",Ze.opacity.selected).attr("d",this.areaGenerator)}}class sk extends ll{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=wt.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"stacked bar graphs",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),a=this.model.getActiveDataGroupNames(),o=n.selectAll("g.bars").data(s,c=>S(c,0,i));o.exit().attr("opacity",0).remove(),o.enter().append("g").classed("bars",!0).attr("role",Pt.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[Wt.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),d=this.services.cartesianScales.getDomainValue(u)-h/2,f=d+h,p=this.services.cartesianScales.getRangeValue(c[0]);let T=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(d,f)){if(Math.abs(T-p)>0&&Math.abs(T-p)>r.bars.dividerSize){const m=c[0]<0&&c[1]<=0;m&&a.length>1?this.services.cartesianScales.getOrientation()===ee.VERTICAL?T+=c[1]===0?2:1:T-=1:m||(this.services.cartesianScales.getOrientation()===ee.VERTICAL?T+=1:T-=1)}return Yo({x0:d,x1:f,y0:p,y1:T},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",Pt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,s){const a=z(this);a.classed("hovered",!0),r.services.events.dispatchEvent($.Bar.BAR_MOUSEOVER,{event:i,element:a,datum:s});let o=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===s.data[s[n]]&&l[c].toString()===s.data.sharedStackKey&&l[n]===s[n]});if(o===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();o={[l]:s.data.sharedStackKey,[c]:s.data[s[n]],[n]:s[n]}}r.services.events.dispatchEvent($.Tooltip.SHOW,{event:i,hoveredElement:a,data:[o]})}).on("mousemove",function(i,s){const a=z(this);r.services.events.dispatchEvent($.Bar.BAR_MOUSEMOVE,{event:i,element:a,datum:s}),r.services.events.dispatchEvent($.Tooltip.MOVE,{event:i})}).on("click",function(i,s){r.services.events.dispatchEvent($.Bar.BAR_CLICK,{event:i,element:z(this),datum:s})}).on("mouseout",function(i,s){const a=z(this);a.classed("hovered",!1),r.services.events.dispatchEvent($.Bar.BAR_MOUSEOUT,{event:i,element:a,datum:s}),r.services.events.dispatchEvent($.Tooltip.HIDE,{hoveredElement:a})})}getBarWidth(){const e=this.getOptions();if(S(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=W.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,s=S(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*s/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener($.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener($.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class ak extends qi{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=wt.SVG}render(e){if(!S(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(u=>r.axes[u].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=n.selectAll("g.dots").data(a,u=>S(u,0,i));o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("dots",!0).attr("role",Pt.GROUP).merge(o).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],d=this.services.cartesianScales.getDomainIdentifier(u),f=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[d]:u.data.sharedStackKey,[f]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(l=>r.axes[l].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=[];return a.forEach((l,c)=>{l.forEach((u,h)=>{const d=u[i],f=u.data.sharedStackKey;let p=u.data[d];const T=u[1],m=this.services.cartesianScales.getDomainIdentifier(u),y=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(f)&&n===this.services.cartesianScales.getRangeValue(T)&&(s&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[d]),p!==null&&o.push({[i]:d,[m]:f,[y]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return o.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}function ok(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lk={value:function(){}};function Fp(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Xi(n)}function Xi(t){this._=t}function ck(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Xi.prototype=Fp.prototype={constructor:Xi,on:function(t,e){var n=this._,r=ck(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=uk(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=th(n[i],t.name,e);else if(e==null)for(i in n)n[i]=th(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Xi(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function uk(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function th(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=lk,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const hk=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Fp},Symbol.toStringTag,{value:"Module"})),dk=ok(hk);var La,eh;function fk(){if(eh)return La;eh=1;const t=dk.dispatch,e=Math.PI/180,n={archimedean:T,rectangular:m},r=64,i=2048;La=function(){var v=[256,256],g=s,_=a,E=l,x=o,A=o,k=c,M=u,F=T,N=[],Y=1/0,nt=t("word","end"),K=null,G=Math.random,X={},lt=w;X.canvas=function(I){return arguments.length?(lt=b(I),X):lt},X.start=function(){var I=rt(lt()),q=y((v[0]>>5)*v[1]),dt=null,st=N.length,j=-1,et=[],ct=N.map(function(R,V){return R.text=g.call(this,R,V),R.font=_.call(this,R,V),R.style=x.call(this,R,V),R.weight=A.call(this,R,V),R.rotate=k.call(this,R,V),R.size=~~E.call(this,R,V),R.padding=M.call(this,R,V),R}).sort(function(R,V){return V.size-R.size});return K&&clearInterval(K),K=setInterval(B,0),B(),X;function B(){for(var R=Date.now();Date.now()-R<Y&&++j<st&&K;){var V=ct[j];V.x=v[0]*(G()+.5)>>1,V.y=v[1]*(G()+.5)>>1,h(I,V,ct,j),V.hasText&&D(q,V,dt)&&(et.push(V),nt.call("word",X,V),dt?f(dt,V):dt=[{x:V.x+V.x0,y:V.y+V.y0},{x:V.x+V.x1,y:V.y+V.y1}],V.x-=v[0]>>1,V.y-=v[1]>>1)}j>=st&&(X.stop(),nt.call("end",X,et,dt))}},X.stop=function(){K&&(clearInterval(K),K=null);for(const I of N)delete I.sprite;return X};function rt(I){const q=I.getContext("2d",{willReadFrequently:!0});I.width=I.height=1;const dt=Math.sqrt(q.getImageData(0,0,1,1).data.length>>2);return I.width=(r<<5)/dt,I.height=i/dt,q.fillStyle=q.strokeStyle="red",{context:q,ratio:dt}}function D(I,q,dt){v[0],v[1];for(var st=q.x,j=q.y,et=Math.sqrt(v[0]*v[0]+v[1]*v[1]),ct=F(v),B=G()<.5?1:-1,R=-B,V,L,ft;(V=ct(R+=B))&&(L=~~V[0],ft=~~V[1],!(Math.min(Math.abs(L),Math.abs(ft))>=et));)if(q.x=st+L,q.y=j+ft,!(q.x+q.x0<0||q.y+q.y0<0||q.x+q.x1>v[0]||q.y+q.y1>v[1])&&(!dt||p(q,dt))&&!d(q,I,v[0])){for(var ut=q.sprite,Ct=q.width>>5,Dt=v[0]>>5,it=q.x-(Ct<<4),yt=it&127,ge=32-yt,le=q.y1-q.y0,Er=(q.y+q.y0)*Dt+(it>>5),Sr,vn=0;vn<le;vn++){Sr=0;for(var Ee=0;Ee<=Ct;Ee++)I[Er+Ee]|=Sr<<ge|(Ee<Ct?(Sr=ut[vn*Ct+Ee])>>>yt:0);Er+=Dt}return!0}return!1}return X.timeInterval=function(I){return arguments.length?(Y=I??1/0,X):Y},X.words=function(I){return arguments.length?(N=I,X):N},X.size=function(I){return arguments.length?(v=[+I[0],+I[1]],X):v},X.font=function(I){return arguments.length?(_=b(I),X):_},X.fontStyle=function(I){return arguments.length?(x=b(I),X):x},X.fontWeight=function(I){return arguments.length?(A=b(I),X):A},X.rotate=function(I){return arguments.length?(k=b(I),X):k},X.text=function(I){return arguments.length?(g=b(I),X):g},X.spiral=function(I){return arguments.length?(F=n[I]||I,X):F},X.fontSize=function(I){return arguments.length?(E=b(I),X):E},X.padding=function(I){return arguments.length?(M=b(I),X):M},X.random=function(I){return arguments.length?(G=I,X):G},X.on=function(){var I=nt.on.apply(nt,arguments);return I===nt?X:I},X};function s(v){return v.text}function a(){return"serif"}function o(){return"normal"}function l(v){return Math.sqrt(v.value)}function c(){return(~~(random()*6)-3)*30}function u(){return 1}function h(v,g,_,E){if(!g.sprite){var x=v.context,A=v.ratio;x.clearRect(0,0,(r<<5)/A,i/A);var k=0,M=0,F=0,N=_.length;for(--E;++E<N;){g=_[E],x.save(),x.font=g.style+" "+g.weight+" "+~~((g.size+1)/A)+"px "+g.font;const V=x.measureText(g.text),L=-Math.floor(V.width/2);let ft=(V.width+1)*A,ut=g.size<<1;if(g.rotate){var Y=Math.sin(g.rotate*e),nt=Math.cos(g.rotate*e),K=ft*nt,G=ft*Y,X=ut*nt,lt=ut*Y;ft=Math.max(Math.abs(K+lt),Math.abs(K-lt))+31>>5<<5,ut=~~Math.max(Math.abs(G+X),Math.abs(G-X))}else ft=ft+31>>5<<5;if(ut>F&&(F=ut),k+ft>=r<<5&&(k=0,M+=F,F=0),M+ut>=i)break;x.translate((k+(ft>>1))/A,(M+(ut>>1))/A),g.rotate&&x.rotate(g.rotate*e),x.fillText(g.text,L,0),g.padding&&(x.lineWidth=2*g.padding,x.strokeText(g.text,L,0)),x.restore(),g.width=ft,g.height=ut,g.xoff=k,g.yoff=M,g.x1=ft>>1,g.y1=ut>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,k+=ft}for(var rt=x.getImageData(0,0,(r<<5)/A,i/A).data,D=[];--E>=0;)if(g=_[E],!!g.hasText){for(var I=g.width,q=I>>5,dt=g.y1-g.y0,st=0;st<dt*q;st++)D[st]=0;if(k=g.xoff,k==null)return;M=g.yoff;for(var j=0,et=-1,ct=0;ct<dt;ct++){for(var st=0;st<I;st++){var B=q*ct+(st>>5),R=rt[(M+ct)*(r<<5)+(k+st)<<2]?1<<31-st%32:0;D[B]|=R,j|=R}j?et=ct:(g.y0++,dt--,ct--,M++)}g.y1=g.y0+et,g.sprite=D.slice(0,(g.y1-g.y0)*q)}}}function d(v,g,_){_>>=5;for(var E=v.sprite,x=v.width>>5,A=v.x-(x<<4),k=A&127,M=32-k,F=v.y1-v.y0,N=(v.y+v.y0)*_+(A>>5),Y,nt=0;nt<F;nt++){Y=0;for(var K=0;K<=x;K++)if((Y<<M|(K<x?(Y=E[nt*x+K])>>>k:0))&g[N+K])return!0;N+=_}return!1}function f(v,g){var _=v[0],E=v[1];g.x+g.x0<_.x&&(_.x=g.x+g.x0),g.y+g.y0<_.y&&(_.y=g.y+g.y0),g.x+g.x1>E.x&&(E.x=g.x+g.x1),g.y+g.y1>E.y&&(E.y=g.y+g.y1)}function p(v,g){return v.x+v.x1>g[0].x&&v.x+v.x0<g[1].x&&v.y+v.y1>g[0].y&&v.y+v.y0<g[1].y}function T(v){var g=v[0]/v[1];return function(_){return[g*(_*=.1)*Math.cos(_),_*Math.sin(_)]}}function m(v){var g=4,_=g*v[0]/v[1],E=0,x=0;return function(A){var k=A<0?-1:1;switch(Math.sqrt(1+4*k*A)-k&3){case 0:E+=_;break;case 1:x+=g;break;case 2:E-=_;break;default:x-=g;break}return[E,x]}}function y(v){for(var g=[],_=-1;++_<v;)g[_]=0;return g}function w(){return document.createElement("canvas")}function b(v){return typeof v=="function"?v:function(){return v}}return La}fk();function Vp(t){var e=t==null?0:t.length;return e?Ld(t):[]}function pk(t){return Sd(xd(t,void 0,Vp),t+"")}function gk(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function mk(t,e){return e.length<2?t:Mo(t,gk(e,0,-1))}function vk(t,e){return e=Ps(e,t),t=mk(t,e),t==null||delete t[vi(tf(e))]}function yk(t){return Rd(t)?void 0:t}var _k=1,bk=2,wk=4,Tk=pk(function(t,e){var n={};if(t==null)return n;var r=!1;e=wd(e,function(s){return s=Ps(s,t),r||(r=s.length>1),s}),wr(t,Fd(t),n),r&&(n=qr(n,_k|bk|wk,yk));for(var i=e.length;i--;)vk(n,e[i]);return n});function nh(t){return Math.log(t)}function rh(t){return Math.exp(t)}function Ek(t){return-Math.log(-t)}function Sk(t){return-Math.exp(-t)}function Ok(t){return isFinite(t)?+("1e"+t):t<0?0:t}function xk(t){return t===10?Ok:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Mk(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ih(t){return(e,n)=>-t(-e,n)}function kk(t){const e=t(nh,rh),n=e.domain;let r=10,i,s;function a(){return i=Mk(r),s=xk(r),n()[0]<0?(i=ih(i),s=ih(s),t(Ek,Sk)):t(nh,rh),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let d=i(c),f=i(u),p,T;const m=o==null?10:+o;let y=[];if(!(r%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(p=1;p<r;++p)if(T=d<0?p/s(-d):p*s(d),!(T<c)){if(T>u)break;y.push(T)}}else for(;d<=f;++d)for(p=r-1;p>=1;--p)if(T=d>0?p/s(-d):p*s(d),!(T<c)){if(T>u)break;y.push(T)}y.length*2<m&&(y=ns(c,u,m))}else y=ns(d,f,Math.min(f-d,m)).map(s);return h?y.reverse():y},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ci(l)).precision==null&&(l.trim=!0),l=jo(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(Yf(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function zp(){const t=kk(Lf()).domain([1,10]);return t.copy=()=>Wo(t,zp()).base(t.base()),bi.apply(t,arguments),t}function ws(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Xs(t){this._context=t}Xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ws(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ws(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ak(t){return new Xs(t)}function jp(t){this._context=t}jp.prototype={areaStart:mn,areaEnd:mn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ws(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ck(t){return new jp(t)}function Gp(t){this._context=t}Gp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ws(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $k(t){return new Gp(t)}function Wp(t,e){this._basis=new Xs(t),this._beta=e}Wp.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(r+l*s),this._beta*e[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Dk=function t(e){function n(r){return e===1?new Xs(r):new Wp(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Ts(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function cl(t,e){this._context=t,this._k=(1-e)/6}cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ts(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Lk=function t(e){function n(r){return new cl(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ul(t,e){this._context=t,this._k=(1-e)/6}ul.prototype={areaStart:mn,areaEnd:mn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ik=function t(e){function n(r){return new ul(r,e)}return n.tension=function(r){return t(+r)},n}(0);function hl(t,e){this._context=t,this._k=(1-e)/6}hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ts(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Rk=function t(e){function n(r){return new hl(r,e)}return n.tension=function(r){return t(+r)},n}(0);function dl(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Zt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Zt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function Yp(t,e){this._context=t,this._alpha=e}Yp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:dl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Pk=function t(e){function n(r){return e?new Yp(r,e):new cl(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function qp(t,e){this._context=t,this._alpha=e}qp.prototype={areaStart:mn,areaEnd:mn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:dl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Nk=function t(e){function n(r){return e?new qp(r,e):new ul(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Xp(t,e){this._context=t,this._alpha=e}Xp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dl(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Bk=function t(e){function n(r){return e?new Xp(r,e):new hl(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function sh(t){return t<0?-1:1}function ah(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(sh(s)+sh(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function oh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ia(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function Es(t){this._context=t}Es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ia(this,this._t0,oh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ia(this,oh(this,n=ah(this,t,e)),n);break;default:Ia(this,this._t0,n=ah(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Zp(t){this._context=new Kp(t)}(Zp.prototype=Object.create(Es.prototype)).point=function(t,e){Es.prototype.point.call(this,e,t)};function Kp(t){this._context=t}Kp.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Uk(t){return new Es(t)}function Hk(t){return new Zp(t)}function Qp(t){this._context=t}Qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=lh(t),i=lh(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lh(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Fk(t){return new Qp(t)}function Zs(t,e){this._context=t,this._t=e}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Vk(t){return new Zs(t,.5)}function zk(t){return new Zs(t,0)}function jk(t){return new Zs(t,1)}class Gk extends an{zoomIn(e,n,r){let i,s,a;const o=r||Xc;e&&(i=e.x,s=e.y,a=2);const{width:l,height:c}=W.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(o.duration).ease(o.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${a}) translate(${-i},${-s})`),this.services.events.dispatchEvent($.CanvasZoom.CANVAS_ZOOM_IN,{element:z(e)})}zoomOut(e,n){const r=n||Xc;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent($.CanvasZoom.CANVAS_ZOOM_OUT)}}class Wk extends an{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class Yk extends an{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const s=URL.createObjectURL(new Blob([e],{type:i}));r.href=s,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class qk extends an{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener($.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(S(Qc,n,"duration")||Qc.default.duration)}getPendingTransitions(){return this.pendingTransitions}}function Xr(t,e){const n=+Lt(t)-+Lt(e);return n<0?-1:n>0?1:n}function Xk(t,e,n){const[r,i]=In(void 0,t,e);return r.getFullYear()-i.getFullYear()}function Zk(t,e,n){const[r,i]=In(void 0,t,e),s=Xr(r,i),a=Math.abs(Xk(r,i));r.setFullYear(1584),i.setFullYear(1584);const o=Xr(r,i)===-s,l=s*(a-+o);return l===0?0:l}function fl(t,e,n){const r=Lt(t,void 0);if(isNaN(e))return _e(t,NaN);if(!e)return r;const i=r.getDate(),s=_e(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const a=s.getDate();return i>=a?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function Jp(t,e,n){return fl(t,e*12)}function Kk(t,e,n){return Jp(t,-e)}function Qk(t,e,n){const[r,i]=In(void 0,t,e),s=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return s*12+a}function Jk(t,e){const n=Lt(t,void 0);return n.setHours(23,59,59,999),n}function tA(t,e){const n=Lt(t,void 0),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function eA(t,e){const n=Lt(t,void 0);return+Jk(n)==+tA(n)}function nA(t,e,n){const[r,i,s]=In(void 0,t,t,e),a=Xr(i,s),o=Math.abs(Qk(i,s));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*o);let l=Xr(i,s)===-a;eA(r)&&o===1&&Xr(r,s)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function rA(t,e,n){return fl(t,-e)}function iA(t,e,n){const[r,i]=In(void 0,t,e),s=ch(r,i),a=Math.abs(Hf(r,i));r.setDate(r.getDate()-s*a);const o=+(ch(r,i)===-s),l=s*(a-o);return l===0?0:l}function ch(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function tg(t,e,n){const r=Lt(t,void 0);return isNaN(e)?_e(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function sA(t,e,n){return tg(t,-e)}function pl(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function aA(t,e,n){const[r,i]=In(void 0,t,e),s=(+r-+i)/vd;return pl(void 0)(s)}function eg(t,e,n){return _e(t,+Lt(t)+e)}function ng(t,e,n){return eg(t,e*vd)}function oA(t,e,n){return ng(t,-e)}function rg(t,e){return+Lt(t)-+Lt(e)}function uh(t,e,n){const r=rg(t,e)/md;return pl(void 0)(r)}function go(t,e,n){const r=Lt(t,void 0);return r.setTime(r.getTime()+e*md),r}function hh(t,e,n){return go(t,-e)}function dh(t,e,n){const r=rg(t,e)/1e3;return pl(void 0)(r)}function mo(t,e,n){return eg(t,e*1e3)}function fh(t,e,n){return mo(t,-e)}class lA extends an{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=S(n,"axes",this.secondaryDomainAxisPosition),s=e[r];if(i!=null&&i.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,s=S(r,"axes",this.secondaryRangeAxisPosition);let a;if(e!==null?a=e[i]:n&&n.length>0&&(a=n[0]),s!=null&&s.correspondingDatasets&&s.correspondingDatasets.includes(a))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return S(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===H.BOTTOM||e===H.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(H).map(e=>H[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===H.LEFT||this.rangeAxisPosition===H.RIGHT)&&(this.domainAxisPosition===H.BOTTOM||this.domainAxisPosition===H.TOP)?this.orientation=ee.VERTICAL:this.orientation=ee.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const s=this.model.getOptions(),a=S(s,"axes");((e=a[H.LEFT])!=null&&e.correspondingDatasets&&a[H.RIGHT]||(n=a[H.RIGHT])!=null&&n.correspondingDatasets&&a[H.LEFT]||(r=a[H.TOP])!=null&&r.correspondingDatasets&&a[H.BOTTOM]||(i=a[H.BOTTOM])!=null&&i.correspondingDatasets&&a[H.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=S(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===ot.LINEAR||this.scaleTypes[e]===ot.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[H.BOTTOM,H.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[H.LEFT,H.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const s=this.model.getOptions(),a=S(s,"axes")[r],{mapsTo:o}=a,l=S(i,o)!==null?i[o]:i;let c;switch(n){case ot.LABELS:c=e(l)+e.step()/2;break;case ot.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],s=this.model.getOptions(),a=S(s,"axes")[r],{mapsTo:o}=a,l=e[o]!==void 0?e[o]:e;return[i(S(e,n.upperBoundMapsTo)!==null?e[n.upperBoundMapsTo]:l),i(S(e,n.lowerBoundMapsTo)!==null?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return S(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return S(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=S(r,"axes",e);if(i.scaleType===ot.TIME){const s=S(r,"timeScale","addSpaceOnEdges");return cA(n,s)}else return uA(n,hn.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=S(e,"axes"),r=this.isDualAxes();return S(n,H.LEFT)===null&&S(n,H.RIGHT)!==null||S(n,H.RIGHT,"main")===!0||r&&S(n,H.LEFT,"correspondingDatasets")?{primary:H.RIGHT,secondary:H.LEFT}:{primary:H.LEFT,secondary:H.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=S(e,"axes"),r=this.isDualAxes();return S(n,H.BOTTOM)===null&&S(n,H.TOP)!==null||S(n,H.TOP,"main")===!0||r&&S(n,H.BOTTOM,"correspondingDatasets")?{primary:H.TOP,secondary:H.BOTTOM}:{primary:H.BOTTOM,secondary:H.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=S(r,"axes",e.primary),s=S(r,"axes",n.primary),a=i.scaleType||ot.LINEAR,o=s.scaleType||ot.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(o===ot.LABELS||o===ot.TIME)&&a===ot.LABELS||a===ot.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=S(n,"axes",e),i=S(n,"bounds"),{includeZero:s}=r,a=S(r,"scaleType")||ot.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:y}=this.model.getBinConfigurations();return[0,j_(y,w=>w.length)]}else if(r.limitDomainToBins){const{bins:y}=this.model.getBinConfigurations(),w=this.model.getStackKeys({bins:y});return[w[0].split(":")[0],w[w.length-1].split(":")[1]]}const o=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:h}=r,{reference:d,compareTo:f}=hn.ratio;if(r.domain)return a===ot.LABELS?r.domain:(a===ot.TIME&&(r.domain=r.domain.map(y=>y.getTime===void 0?new Date(y):y)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&a===ot.LABELS)return si(o.map(y=>y[c]));let p,T;const m=this.model.getDataGroupNames();if(a===ot.LABELS_RATIO)return o.map(y=>`${y[d]}/${y[f]}`);if(a===ot.TIME)T=o.map(y=>+new Date(y[c]));else if(i&&n.axes)T=[],o.forEach(y=>{T.push(y[c]),y[i.upperBoundMapsTo]&&T.push(y[i.upperBoundMapsTo]),y[i.lowerBoundMapsTo]&&T.push(y[i.lowerBoundMapsTo])});else if(r.stacked===!0&&m&&e===this.getRangeAxisPosition()){const{groupMapsTo:y}=n.data,w=this.model.getDataValuesGroupedByKeys({groups:m}),b=o.filter(g=>!m.includes(g[y])),v=[];w.forEach(g=>{const{..._}=g;let E=0,x=0;Object.values(Tk(_,"sharedStackKey")).forEach(A=>{isNaN(A)||(A<0?x+=A:E+=A)}),v.push([x,E])}),T=[...Vp(v),...b.map(g=>g[c])]}else T=[],o.forEach(y=>{const w=y[c];Array.isArray(w)&&w.length===2?(T.push(w[0]),T.push(w[1])):(l&&T.push(Math.max(y[c],y[l])),T.push(w))});return a!==ot.TIME&&a!==ot.LOG&&s&&T.push(0),h&&h.length>0&&h.forEach(y=>{const w=S(y,"value");w!==null&&T.push(w)}),p=ar(T),p=this.extendsDomain(e,p),p}createScale(e){const n=this.model.getOptions(),r=S(n,"axes",e);if(!r)return null;const i=S(r,"scaleType")||ot.LINEAR;this.scaleTypes[e]=i;let s;return i===ot.TIME?s=ep():i===ot.LOG?s=zp().base(r.base||10):i===ot.LABELS||i===ot.LABELS_RATIO?s=Xo():s=hs(),s.domain(this.getScaleDomain(e)),s}getDomainLowerBound(e){let n,r=0;return this.getOrientation()===ee.VERTICAL?n=this.getMainYScale().domain():n=this.getMainXScale().domain(),S(this.model.getOptions(),"axes",e,"includeZero")===!1&&n[0]>0&&n[1]>0&&(r=n[0]),r}getHighestDomainThreshold(){const e=S(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),s=r.sort((a,o)=>o.value-a.value)[0];return this.getScaleTypeByPosition(n)===ot.TIME&&(typeof s.value=="string"||s.value.getTime===void 0)&&(s.value=new Date(s.value)),{threshold:s,scaleValue:i(s.value)}}getHighestRangeThreshold(){const e=S(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),s=r.sort((a,o)=>o.value-a.value)[0];return{threshold:s,scaleValue:i(s.value)}}}function cA(t,e){const n=new Date(t[0]),r=new Date(t[1]);return Zk(r,n)>1?[Kk(n,e),Jp(r,e)]:nA(r,n)>1?[rA(n,e),fl(r,e)]:iA(r,n)>1?[sA(n,e),tg(r,e)]:aA(r,n)>1?[oA(n,e),ng(r,e)]:uh(r,n)>30?[hh(n,e*30),go(r,e*30)]:uh(r,n)>1?[hh(n,e),go(r,e)]:dh(r,n)>15?[fh(n,e*15),mo(r,e*15)]:dh(r,n)>1?[fh(n,e),mo(r,e)]:[n,r]}function uA([t,e],n,r){const i=(e-t)*n,s=e<=0&&e+i>0?0:e+i;let a=t>=0&&t-i<0?0:t-i;if(r===ot.LOG&&a<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");a=t}return[a,s]}class hA extends an{constructor(){super(...arguments),this.curveTypes={curveLinear:el,curveLinearClosed:yx,curveBasis:Ak,curveBasisClosed:Ck,curveBasisOpen:$k,curveBundle:Dk,curveCardinal:Lk,curveCardinalClosed:Ik,curveCardinalOpen:Rk,curveCatmullRom:Pk,curveCatmullRomClosed:Nk,curveCatmullRomOpen:Bk,curveMonotoneX:Uk,curveMonotoneY:Hk,curveNatural:Fk,curveStep:Vk,curveStepAfter:jk,curveStepBefore:zk}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?e=n:e=n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}}class dA extends an{isZoomBarEnabled(){if(!this.services.cartesianScales||!S(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=S(this.model.getOptions(),"axes",e,"scaleType");return e===H.BOTTOM&&n===ot.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),s=r.getDomainIdentifier(),a=S(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(a)&&a.length===2)return a;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,ar(n,o=>o[s]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&((r=this.services.events)==null||r.dispatchEvent($.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return S(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),s=Object.assign({stacked:!1},n),a=S(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&a&&i){const o=s.stacked?"sharedStackKey":(r=this.services.cartesianScales)==null?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[o])>=i[0]&&new Date(c[o])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=ue.handleWidth,s=(n=this.services.cartesianScales)==null?void 0:n.getMainXScale().copy();s.domain(this.getDefaultZoomBarDomain());const a=s(r[0]),o=s(r[1]);if(o-a<i+1)return;const l=s.range(),c=o-a,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let h=a+u,d=o-u;h>=d&&(h=a+c/2-i/2,d=o-c/2+i/2);const f=[s.invert(h),s.invert(d)];(r[0].valueOf()!==f[0].valueOf()||r[1].valueOf()!==f[1].valueOf())&&this.handleDomainChange(f)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),s=r(n[1]),a=r.range(),o=(a[1]-a[0])/2*(e/2),l=Math.max(i-o,a[0]),c=Math.min(s+o,a[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;const r=e[1].valueOf()-e[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),s=S(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<s}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(e&&n&&e[0].valueOf()===n[0].valueOf()&&e[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(e){return S(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return S(this.model.getOptions(),"zoomBar",e,"locked")}}class fA{constructor(e,n){this.components=[],this.services={canvasZoom:Gk,domUtils:W,events:Wk,files:Yk,gradientUtils:di,transitions:qk},this.model=new Wf(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener($.Model.UPDATE,r=>{const i=!!S(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener($.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(s=>s));Promise.all(r).then(()=>this.services.events.dispatchEvent($.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=S(r,"toolbar","enabled"),s={id:"legend",components:[new Ip(this.model,this.services)],growth:Mt.PREFERRED},a=S(r,"canvasZoom","enabled");a&&a===!0&&e.push(new z2(this.model,this.services));const o=!!this.model.getOptions().title,l={id:"title",components:[new Lp(this.model,this.services)],growth:Mt.STRETCH},c={id:"toolbar",components:[new Ap(this.model,this.services)],growth:Mt.PREFERRED},u={id:"header",components:[new ur(this.model,this.services,[l,...i?[c]:[]],{direction:Bt.ROW,alignItems:ks.CENTER})],growth:Mt.PREFERRED},h={id:"graph-frame",components:e,growth:Mt.STRETCH,renderType:S(n,"graphFrameRenderType")||wt.SVG},d=S(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let f=Bt.COLUMN;if(d){const y=S(r,"legend","position");y==="left"?(f=Bt.ROW,r.legend.orientation||(r.legend.orientation=ti.VERTICAL)):y==="right"?(f=Bt.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=ti.VERTICAL)):y==="bottom"&&(f=Bt.COLUMN_REVERSE)}const p={id:"spacer",components:[new bs(this.model,this.services)],growth:Mt.PREFERRED},T={id:"full-frame",components:[new ur(this.model,this.services,[...d?[s]:[],...d?[p]:[],h],{direction:f})],growth:Mt.STRETCH},m=[];if(o||i){m.push(u);const y={id:"spacer",components:[new bs(this.model,this.services,i?{size:15}:void 0)],growth:Mt.PREFERRED};m.push(y)}return m.push(T),[new Pp(this.model,this.services),new Dp(this.model,this.services),new ur(this.model,this.services,m,{direction:Bt.COLUMN})]}}class pA extends fA{constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:lA,curves:hA,zoom:dA}),this.model=new NS(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=S(r,"zoomBar",H.TOP,"enabled"),s=S(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const a=this.services.cartesianScales.getMainXAxisPosition(),o=S(r,"axes",a,"scaleType"),l=i&&a===H.BOTTOM&&o===ot.TIME,c=this.services.zoom.isZoomBarLocked(H.TOP),u=!!this.model.getOptions().title,h={id:"title",components:[new Lp(this.model,this.services)],growth:Mt.STRETCH},d={id:"toolbar",components:[new Ap(this.model,this.services)],growth:Mt.PREFERRED},f={id:"header",components:[new ur(this.model,this.services,[h,...s?[d]:[]],{direction:Bt.ROW,alignItems:ks.CENTER})],growth:Mt.PREFERRED},p={id:"legend",components:[new Ip(this.model,this.services)],growth:Mt.PREFERRED};l&&!c&&e.push(new Rp(this.model,this.services),new j2(this.model,this.services)),e.push(new W2(this.model,this.services)),e.push(new Y2(this.model,this.services));const T={id:"graph-frame",components:e,growth:Mt.STRETCH,renderType:wt.SVG},m=S(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let y=Bt.COLUMN;if(m){const _=S(this.model.getOptions(),"legend","position");_===Wr.LEFT?(y=Bt.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=ti.VERTICAL)):_===Wr.RIGHT?(y=Bt.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=ti.VERTICAL)):_===Wr.BOTTOM&&(y=Bt.COLUMN_REVERSE)}const w={id:"spacer",components:[new bs(this.model,this.services)],growth:Mt.PREFERRED},b={id:"full-frame",components:[new ur(this.model,this.services,[...m?[p]:[],...m?[w]:[],T],{direction:y})],growth:Mt.STRETCH},v={id:"zoom-bar",components:[new G2(this.model,this.services)],growth:Mt.PREFERRED,renderType:wt.SVG},g=[];if(u||s){g.push(f);const _={id:"spacer",components:[new bs(this.model,this.services,s?{size:15}:void 0)],growth:Mt.PREFERRED};g.push(_)}return l&&g.push(v),g.push(b),[new q2(this.model,this.services),new Dp(this.model,this.services),new ur(this.model,this.services,g,{direction:Bt.COLUMN})]}}cn.LINE+"",cn.SCATTER+"",cn.AREA+"",cn.STACKED_AREA+"",cn.SIMPLE_BAR+"",cn.GROUPED_BAR+"",cn.STACKED_BAR+"";class gA extends pA{constructor(e,n){super(e,n),this.model.setOptions(GE(zE.simpleBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new ek(this.model,this.services),new Z2(this.model,this.services),new Hp(this.model,this.services),new Up(this.model,this.services),new nk(this.model,this.services,{skeleton:Qn.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}function mA(t){let e,n=[{id:t[1]},{class:ph},t[2]],r={};for(let i=0;i<n.length;i+=1)r=hr(r,n[i]);return{c(){e=P("div"),$l(e,r)},m(i,s){J(i,e,s),t[7](e)},p(i,[s]){$l(e,r=Ph(n,[s&2&&{id:i[1]},{class:ph},s&4&&i[2]]))},i:mt,o:mt,d(i){i&&Q(e),t[7](null)}}}const ph="cds--chart-holder";function vA(t,e,n){const r=["data","options","Chart","chart","ref","id"];let i=Zi(e,r),{data:s=[]}=e,{options:a={}}=e,{Chart:o}=e,{chart:l}=e,{ref:c}=e,{id:u=`chart-${Math.random().toString(36)}`}=e;const h=Ms();xs(()=>{try{n(3,l=new o(c,{data:s,options:a})),h("load")}catch(f){console.error("Failed to initialize chart:",f)}}),Tg(()=>{if(l)try{l.model.setData(s),l.model.setOptions(a),h("update",{data:s,options:a})}catch(f){console.error("Failed to update chart:",f)}}),Eg(()=>{l&&(h("destroy"),l.components.forEach(f=>f.destroy()),l.model.set({destroyed:!0},{skipUpdate:!0}),n(3,l=void 0))});function d(f){dn[f?"unshift":"push"](()=>{c=f,n(0,c)})}return t.$$set=f=>{e=hr(hr({},e),Dh(f)),n(2,i=Zi(e,r)),"data"in f&&n(4,s=f.data),"options"in f&&n(5,a=f.options),"Chart"in f&&n(6,o=f.Chart),"chart"in f&&n(3,l=f.chart),"ref"in f&&n(0,c=f.ref),"id"in f&&n(1,u=f.id)},[c,u,i,l,s,a,o,d]}class yA extends Ve{constructor(e){super(),Fe(this,e,vA,mA,He,{data:4,options:5,Chart:6,chart:3,ref:0,id:1})}}function _A(t){let e,n,r,i;const s=[t[4],{Chart:gA},{options:t[2]},{data:t[3]}];function a(c){t[5](c)}function o(c){t[6](c)}let l={};for(let c=0;c<s.length;c+=1)l=hr(l,s[c]);return t[1]!==void 0&&(l.ref=t[1]),t[0]!==void 0&&(l.chart=t[0]),e=new yA({props:l}),dn.push(()=>Ll(e,"ref",a)),dn.push(()=>Ll(e,"chart",o)),e.$on("load",t[7]),e.$on("update",t[8]),e.$on("destroy",t[9]),{c(){Je(e.$$.fragment)},m(c,u){Ne(e,c,u),i=!0},p(c,[u]){const h=u&28?Ph(s,[u&16&&kg(c[4]),s[1],u&4&&{options:c[2]},u&8&&{data:c[3]}]):{};!n&&u&2&&(n=!0,h.ref=c[1],Dl(()=>n=!1)),!r&&u&1&&(r=!0,h.chart=c[0],Dl(()=>r=!1)),e.$set(h)},i(c){i||(At(e.$$.fragment,c),i=!0)},o(c){Nt(e.$$.fragment,c),i=!1},d(c){Be(e,c)}}}function bA(t,e,n){const r=["options","data","chart","ref"];let i=Zi(e,r),{options:s}=e,{data:a}=e,{chart:o=void 0}=e,{ref:l=void 0}=e;function c(p){l=p,n(1,l)}function u(p){o=p,n(0,o)}function h(p){xn.call(this,t,p)}function d(p){xn.call(this,t,p)}function f(p){xn.call(this,t,p)}return t.$$set=p=>{e=hr(hr({},e),Dh(p)),n(4,i=Zi(e,r)),"options"in p&&n(2,s=p.options),"data"in p&&n(3,a=p.data),"chart"in p&&n(0,o=p.chart),"ref"in p&&n(1,l=p.ref)},[o,l,s,a,i,c,u,h,d,f]}class wA extends Ve{constructor(e){super(),Fe(this,e,bA,_A,He,{options:2,data:3,chart:0,ref:1})}}function gh(t,e,n){const r=t.slice();return r[7]=e[n],r}function mh(t,e,n){const r=t.slice();return r[7]=e[n],r}function TA(t){let e,n,r,i,s,a,o=[],l=new Map,c,u,h,d=[],f=new Map,p;e=new wA({props:{data:t[1],options:t[4]}});let T=Kt(t[1]);const m=b=>b[7].group;for(let b=0;b<T.length;b+=1){let v=mh(t,T,b),g=m(v);l.set(g,o[b]=vh(g,v))}let y=Kt(t[1]);const w=b=>b[7].group;for(let b=0;b<y.length;b+=1){let v=gh(t,y,b),g=w(v);f.set(g,d[b]=yh(g,v))}return{c(){Je(e.$$.fragment),n=at(),r=P("div"),i=P("table"),s=P("thead"),a=P("tr");for(let b=0;b<o.length;b+=1)o[b].c();c=at(),u=P("tbody"),h=P("tr");for(let b=0;b<d.length;b+=1)d[b].c();U(i,"class","svelte-muurla"),U(r,"class","balance-table-container svelte-muurla")},m(b,v){Ne(e,b,v),J(b,n,v),J(b,r,v),C(r,i),C(i,s),C(s,a);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(a,null);C(i,c),C(i,u),C(u,h);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(h,null);p=!0},p(b,v){const g={};v&2&&(g.data=b[1]),e.$set(g),v&2&&(T=Kt(b[1]),o=gn(o,v,m,1,b,T,l,a,pn,vh,null,mh)),v&2&&(y=Kt(b[1]),d=gn(d,v,w,1,b,y,f,h,pn,yh,null,gh))},i(b){p||(At(e.$$.fragment,b),p=!0)},o(b){Nt(e.$$.fragment,b),p=!1},d(b){b&&(Q(n),Q(r)),Be(e,b);for(let v=0;v<o.length;v+=1)o[v].d();for(let v=0;v<d.length;v+=1)d[v].d()}}}function EA(t){let e;return{c(){e=P("p"),e.textContent="No participants in this trip to display balances for."},m(n,r){J(n,e,r)},p:mt,i:mt,o:mt,d(n){n&&Q(e)}}}function SA(t){let e;return{c(){e=P("p"),e.textContent="No balance data to display for this trip, or all balances are zero."},m(n,r){J(n,e,r)},p:mt,i:mt,o:mt,d(n){n&&Q(e)}}}function OA(t){let e,n,r;return{c(){e=P("p"),n=ht("Error loading chart: "),r=ht(t[3]),U(e,"class","error-message svelte-muurla")},m(i,s){J(i,e,s),C(e,n),C(e,r)},p(i,s){s&8&&Ot(r,i[3])},i:mt,o:mt,d(i){i&&Q(e)}}}function xA(t){let e;return{c(){e=P("p"),e.textContent="Loading chart data..."},m(n,r){J(n,e,r)},p:mt,i:mt,o:mt,d(n){n&&Q(e)}}}function vh(t,e){let n,r=e[7].group+"",i;return{key:t,first:null,c(){n=P("th"),i=ht(r),U(n,"class","svelte-muurla"),this.first=n},m(s,a){J(s,n,a),C(n,i)},p(s,a){e=s,a&2&&r!==(r=e[7].group+"")&&Ot(i,r)},d(s){s&&Q(n)}}}function yh(t,e){let n,r,i=e[7].value.toFixed(2)+"",s,a;return{key:t,first:null,c(){n=P("td"),r=ht("$"),s=ht(i),a=at(),U(n,"class","svelte-muurla"),un(n,"positive-balance",e[7].value>0),un(n,"negative-balance",e[7].value<0),this.first=n},m(o,l){J(o,n,l),C(n,r),C(n,s),C(n,a)},p(o,l){e=o,l&2&&i!==(i=e[7].value.toFixed(2)+"")&&Ot(s,i),l&2&&un(n,"positive-balance",e[7].value>0),l&2&&un(n,"negative-balance",e[7].value<0)},d(o){o&&Q(n)}}}function MA(t){let e,n,r,i;const s=[xA,OA,SA,EA,TA],a=[];function o(l,c){return l[2]?0:l[3]?1:l[1].length===0&&l[0].length>0?2:l[0].length===0?3:4}return n=o(t),r=a[n]=s[n](t),{c(){e=P("div"),r.c(),U(e,"class","status-chart-container svelte-muurla")},m(l,c){J(l,e,c),a[n].m(e,null),i=!0},p(l,[c]){let u=n;n=o(l),n===u?a[n].p(l,c):(Qr(),Nt(a[u],1,1,()=>{a[u]=null}),Jr(),r=a[n],r?r.p(l,c):(r=a[n]=s[n](l),r.c()),At(r,1),r.m(e,null))},i(l){i||(At(r),i=!0)},o(l){Nt(r),i=!1},d(l){l&&Q(e),a[n].d()}}}function kA(t,e,n){let{tripId:r}=e,{participants:i=[]}=e,s=[],a={title:null,axes:{left:{title:null,mapsTo:"value",includeZero:!0,visible:!0},right:{title:null,mapsTo:"value",includeZero:!0,visible:!0},bottom:{title:null,mapsTo:"group",scaleType:"labels"}},height:"400px",width:"100%",theme:vo.WHITE,grid:{x:{enabled:!1},y:{enabled:!0,alignedWithAxisTicks:!0}},legend:{enabled:!1,additionalItems:[{name:"test",type:"line"}]},toolbar:{enabled:!1},getFillColor:(u,h,d)=>{const f=d?d.value:void 0;if(console.log(`getFillColor called - Group: ${h}, Extracted Value: ${f}`),typeof f=="number"){if(f>0)return"#4CAF50";if(f<0)return"#f44336"}return"#cccccc"}},o=!0,l=null;async function c(){try{const u=await fetch(`/api/v1/payback/trips/${r}/balances`);if(!u.ok){const d=await u.json().catch(()=>({message:"Unknown error"}));throw new Error(`HTTP error! status: ${u.status} - ${d.error||d.message}`)}const h=await u.json();if(!Array.isArray(h))throw new Error("Balance data is not in the expected array format.");n(1,s=h.map(d=>({group:d.participant_name,value:d.net_balance/100})))}catch(u){console.error("Error fetching or processing balances:",u),n(3,l=`Failed to load balances: ${u.message}`),n(1,s=[])}finally{n(2,o=!1)}}return t.$$set=u=>{"tripId"in u&&n(5,r=u.tripId),"participants"in u&&n(0,i=u.participants)},t.$$.update=()=>{t.$$.dirty&32&&r&&c()},[i,s,o,l,a,r,c]}class AA extends Ve{constructor(e){super(),Fe(this,e,kA,MA,He,{tripId:5,participants:0,fetchBalances:6})}get fetchBalances(){return this.$$.ctx[6]}}function _h(t,e,n){const r=t.slice();return r[34]=e[n],r}function bh(t,e,n){const r=t.slice();return r[37]=e[n],r}function wh(t,e){let n,r=e[37].name+"",i,s;return{key:t,first:null,c(){n=P("option"),i=ht(r),n.__value=s=e[37].id,Gt(n,n.__value),this.first=n},m(a,o){J(a,n,o),C(n,i)},p(a,o){e=a,o[0]&1&&r!==(r=e[37].name+"")&&Ot(i,r),o[0]&1&&s!==(s=e[37].id)&&(n.__value=s,Gt(n,n.__value))},d(a){a&&Q(n)}}}function Th(t){let e,n,r;return{c(){e=P("p"),n=ht("Could not load trips: "),r=ht(t[3]),U(e,"class","error-message")},m(i,s){J(i,e,s),C(e,n),C(e,r)},p(i,s){s[0]&8&&Ot(r,i[3])},d(i){i&&Q(e)}}}function Eh(t){let e,n,r,i,s,a,o,l,c,u,h,d,f,p,T,m,y,w,b,v,g,_,E,x,A,k,M,F,N,Y,nt=t[13]&&Sh(t),K=t[11]&&xh(t),G=t[4].length===0&&t[1]&&Mh(),X={tripId:t[1],participants:t[4]};w=new AA({props:X}),t[25](w);let lt={tripId:t[1],participants:t[4],showTriggerButton:!1};v=new Zg({props:lt}),t[26](v),v.$on("purchaseAdded",t[15]);let rt=t[14]&&kh(t);return{c(){e=P("div"),n=P("div"),r=P("h3"),i=ht(t[10]),s=ht(" Participants"),a=at(),o=P("span"),o.textContent="⯆",l=at(),nt&&nt.c(),c=at(),K&&K.c(),u=at(),h=P("div"),d=P("button"),f=ht("+ Purchase"),T=at(),G&&G.c(),m=at(),y=P("div"),Je(w.$$.fragment),b=at(),Je(v.$$.fragment),g=at(),_=P("div"),E=P("div"),x=P("h3"),x.textContent="Purchase Log",A=at(),k=P("span"),k.textContent="⯆",M=at(),rt&&rt.c(),U(r,"class","svelte-rdffmm"),U(o,"class","arrow svelte-rdffmm"),un(o,"expanded",t[13]),U(n,"class","collapsible-header svelte-rdffmm"),U(e,"class","collapsible-participants-container svelte-rdffmm"),U(d,"class","global-add-purchase-button svelte-rdffmm"),d.disabled=p=!t[1]||t[4].length===0,U(h,"class","add-purchase-action-bar svelte-rdffmm"),U(y,"class","status-chart-wrapper svelte-rdffmm"),U(x,"class","chart-header svelte-rdffmm"),U(k,"class","arrow svelte-rdffmm"),un(k,"expanded",t[14]),U(E,"class","collapsible-header svelte-rdffmm"),U(_,"class","purchase-entry-container svelte-rdffmm")},m(D,I){J(D,e,I),C(e,n),C(n,r),C(r,i),C(r,s),C(n,a),C(n,o),C(e,l),nt&&nt.m(e,null),J(D,c,I),K&&K.m(D,I),J(D,u,I),J(D,h,I),C(h,d),C(d,f),C(h,T),G&&G.m(h,null),J(D,m,I),J(D,y,I),Ne(w,y,null),J(D,b,I),Ne(v,D,I),J(D,g,I),J(D,_,I),C(_,E),C(E,x),C(E,A),C(E,k),C(_,M),rt&&rt.m(_,null),F=!0,N||(Y=[bt(n,"click",t[23]),bt(d,"click",t[24]),bt(E,"click",t[27])],N=!0)},p(D,I){(!F||I[0]&1024)&&Ot(i,D[10]),(!F||I[0]&8192)&&un(o,"expanded",D[13]),D[13]?nt?nt.p(D,I):(nt=Sh(D),nt.c(),nt.m(e,null)):nt&&(nt.d(1),nt=null),D[11]?K?(K.p(D,I),I[0]&2048&&At(K,1)):(K=xh(D),K.c(),At(K,1),K.m(u.parentNode,u)):K&&(Qr(),Nt(K,1,1,()=>{K=null}),Jr()),(!F||I[0]&19&&p!==(p=!D[1]||D[4].length===0))&&(d.disabled=p),D[4].length===0&&D[1]?G||(G=Mh(),G.c(),G.m(h,null)):G&&(G.d(1),G=null);const q={};I[0]&2&&(q.tripId=D[1]),I[0]&16&&(q.participants=D[4]),w.$set(q);const dt={};I[0]&2&&(dt.tripId=D[1]),I[0]&16&&(dt.participants=D[4]),v.$set(dt),(!F||I[0]&16384)&&un(k,"expanded",D[14]),D[14]?rt?(rt.p(D,I),I[0]&16384&&At(rt,1)):(rt=kh(D),rt.c(),At(rt,1),rt.m(_,null)):rt&&(Qr(),Nt(rt,1,1,()=>{rt=null}),Jr())},i(D){F||(At(K),At(w.$$.fragment,D),At(v.$$.fragment,D),At(rt),F=!0)},o(D){Nt(K),Nt(w.$$.fragment,D),Nt(v.$$.fragment,D),Nt(rt),F=!1},d(D){D&&(Q(e),Q(c),Q(u),Q(h),Q(m),Q(y),Q(b),Q(g),Q(_)),nt&&nt.d(),K&&K.d(D),G&&G.d(),t[25](null),Be(w),t[26](null),Be(v,D),rt&&rt.d(),N=!1,pe(Y)}}}function Sh(t){let e,n,r,i=t[11]?"Done":"Edit",s,a,o;function l(h,d){return h[5]?LA:h[6]?DA:h[4].length>0?$A:CA}let c=l(t),u=c(t);return{c(){e=P("div"),u.c(),n=at(),r=P("button"),s=ht(i),U(e,"class","collapsible-content svelte-rdffmm")},m(h,d){J(h,e,d),u.m(e,null),C(e,n),C(e,r),C(r,s),a||(o=bt(r,"click",t[17]),a=!0)},p(h,d){c===(c=l(h))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(e,n))),d[0]&2048&&i!==(i=h[11]?"Done":"Edit")&&Ot(s,i)},d(h){h&&Q(e),u.d(),a=!1,o()}}}function CA(t){let e;return{c(){e=P("p"),e.textContent="No participants currently assigned to this trip."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function $A(t){let e,n=[],r=new Map,i=Kt(t[4]);const s=a=>a[34].id;for(let a=0;a<i.length;a+=1){let o=_h(t,i,a),l=s(o);r.set(l,n[a]=Oh(l,o))}return{c(){e=P("ul");for(let a=0;a<n.length;a+=1)n[a].c();U(e,"class","assigned-participants-list svelte-rdffmm")},m(a,o){J(a,e,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(a,o){o[0]&16&&(i=Kt(a[4]),n=gn(n,o,s,1,a,i,r,e,pn,Oh,null,_h))},d(a){a&&Q(e);for(let o=0;o<n.length;o+=1)n[o].d()}}}function DA(t){let e,n,r;return{c(){e=P("p"),n=ht("Could not load participants: "),r=ht(t[6]),U(e,"class","error-message")},m(i,s){J(i,e,s),C(e,n),C(e,r)},p(i,s){s[0]&64&&Ot(r,i[6])},d(i){i&&Q(e)}}}function LA(t){let e;return{c(){e=P("p"),e.textContent="Loading participants..."},m(n,r){J(n,e,r)},p:mt,d(n){n&&Q(e)}}}function Oh(t,e){let n,r=e[34].name+"",i,s,a=e[34].id+"",o,l;return{key:t,first:null,c(){n=P("li"),i=ht(r),s=ht(" (ID: "),o=ht(a),l=ht(")"),U(n,"class","svelte-rdffmm"),this.first=n},m(c,u){J(c,n,u),C(n,i),C(n,s),C(n,o),C(n,l)},p(c,u){e=c,u[0]&16&&r!==(r=e[34].name+"")&&Ot(i,r),u[0]&16&&a!==(a=e[34].id+"")&&Ot(o,a)},d(c){c&&Q(n)}}}function xh(t){let e,n,r,i,s,a,o,l;return s=new Vg({props:{tripId:t[1],tripName:t[10]}}),s.$on("participantAdded",t[17]),{c(){e=P("div"),n=P("div"),r=P("button"),r.textContent="×",i=at(),Je(s.$$.fragment),U(r,"class","modal-close-button svelte-rdffmm"),U(n,"class","modal-content svelte-rdffmm"),U(e,"class","modal-overlay svelte-rdffmm")},m(c,u){J(c,e,u),C(e,n),C(n,r),C(n,i),Ne(s,n,null),a=!0,o||(l=[bt(r,"click",t[17]),bt(n,"click",Ki(t[19])),bt(n,"keypress",Ki(t[20])),bt(e,"click",t[17]),bt(e,"keypress",t[17])],o=!0)},p(c,u){const h={};u[0]&2&&(h.tripId=c[1]),u[0]&1024&&(h.tripName=c[10]),s.$set(h)},i(c){a||(At(s.$$.fragment,c),a=!0)},o(c){Nt(s.$$.fragment,c),a=!1},d(c){c&&Q(e),Be(s),o=!1,pe(l)}}}function Mh(t){let e;return{c(){e=P("p"),e.textContent="Add participants to this trip to enable purchases.",U(e,"class","small-note svelte-rdffmm")},m(n,r){J(n,e,r)},d(n){n&&Q(e)}}}function kh(t){let e,n,r,i={tripId:t[1]};return n=new rm({props:i}),t[28](n),{c(){e=P("div"),Je(n.$$.fragment),U(e,"class","collapsible-content svelte-rdffmm")},m(s,a){J(s,e,a),Ne(n,e,null),r=!0},p(s,a){const o={};a[0]&2&&(o.tripId=s[1]),n.$set(o)},i(s){r||(At(n.$$.fragment,s),r=!0)},o(s){Nt(n.$$.fragment,s),r=!1},d(s){s&&Q(e),t[28](null),Be(n)}}}function Ah(t){let e,n,r,i,s,a,o,l;return s=new Gg({}),s.$on("tripAdded",t[16]),s.$on("close",t[30]),{c(){e=P("div"),n=P("div"),r=P("button"),r.textContent="×",i=at(),Je(s.$$.fragment),U(r,"class","modal-close-button svelte-rdffmm"),U(n,"class","modal-content svelte-rdffmm"),U(e,"class","modal-overlay svelte-rdffmm")},m(c,u){J(c,e,u),C(e,n),C(n,r),C(n,i),Ne(s,n,null),a=!0,o||(l=[bt(r,"click",t[29]),bt(n,"click",Ki(t[18])),bt(e,"click",t[31])],o=!0)},p:mt,i(c){a||(At(s.$$.fragment,c),a=!0)},o(c){Nt(s.$$.fragment,c),a=!1},d(c){c&&Q(e),Be(s),o=!1,pe(l)}}}function IA(t){let e,n,r,i,s,a,o=t[2]?"Loading trips...":t[3]?"Error loading":t[0].length===0?"No trips available":"-- Select Trip --",l,c=[],u=new Map,h,d,f,p,T,m,y,w,b,v,g=Kt(t[0]);const _=k=>k[37].id;for(let k=0;k<g.length;k+=1){let M=bh(t,g,k),F=_(M);u.set(F,c[k]=wh(F,M))}let E=t[3]&&Th(t),x=t[1]&&Eh(t),A=t[12]&&Ah(t);return{c(){e=P("div"),n=P("label"),n.textContent="Trip:",r=at(),i=P("select"),s=P("option"),s.textContent="-- Select --",a=P("option"),l=ht(o);for(let k=0;k<c.length;k+=1)c[k].c();d=at(),f=P("button"),f.textContent="+",p=at(),E&&E.c(),T=at(),x&&x.c(),m=at(),A&&A.c(),y=Ss(),U(n,"for","trip-selector"),U(n,"class","svelte-rdffmm"),s.__value="",Gt(s,s.__value),s.disabled=!0,s.selected=!0,a.__value="",Gt(a,a.__value),a.disabled=!0,a.selected=!0,U(i,"id","trip-selector"),i.disabled=h=t[2]||t[0].length===0||t[3],U(i,"class","svelte-rdffmm"),t[1]===void 0&&Kr(()=>t[21].call(i)),U(f,"class","add-trip-button svelte-rdffmm"),U(e,"class","events-select-container svelte-rdffmm")},m(k,M){J(k,e,M),C(e,n),C(e,r),C(e,i),C(i,s),C(i,a),C(a,l);for(let F=0;F<c.length;F+=1)c[F]&&c[F].m(i,null);Qi(i,t[1],!0),C(e,d),C(e,f),C(e,p),E&&E.m(e,null),J(k,T,M),x&&x.m(k,M),J(k,m,M),A&&A.m(k,M),J(k,y,M),w=!0,b||(v=[bt(i,"change",t[21]),bt(f,"click",t[22])],b=!0)},p(k,M){(!w||M[0]&13)&&o!==(o=k[2]?"Loading trips...":k[3]?"Error loading":k[0].length===0?"No trips available":"-- Select Trip --")&&Ot(l,o),M[0]&1&&(g=Kt(k[0]),c=gn(c,M,_,1,k,g,u,i,pn,wh,null,bh)),(!w||M[0]&13&&h!==(h=k[2]||k[0].length===0||k[3]))&&(i.disabled=h),M[0]&3&&Qi(i,k[1]),k[3]?E?E.p(k,M):(E=Th(k),E.c(),E.m(e,null)):E&&(E.d(1),E=null),k[1]?x?(x.p(k,M),M[0]&2&&At(x,1)):(x=Eh(k),x.c(),At(x,1),x.m(m.parentNode,m)):x&&(Qr(),Nt(x,1,1,()=>{x=null}),Jr()),k[12]?A?(A.p(k,M),M[0]&4096&&At(A,1)):(A=Ah(k),A.c(),At(A,1),A.m(y.parentNode,y)):A&&(Qr(),Nt(A,1,1,()=>{A=null}),Jr())},i(k){w||(At(x),At(A),w=!0)},o(k){Nt(x),Nt(A),w=!1},d(k){k&&(Q(e),Q(T),Q(m),Q(y));for(let M=0;M<c.length;M+=1)c[M].d();E&&E.d(),x&&x.d(k),A&&A.d(k),b=!1,pe(v)}}}function RA(t,e,n){let r=[],i="",s=!0,a=null,o=[],l=!1,c=null,u,h,d,f="",p=!1,T=!1,m=!1,y=!1;xs(async()=>{w()});async function w(){n(2,s=!0),n(3,a=null);try{const D=await fetch("/api/v1/payback/trips");if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);n(0,r=await D.json()||[])}catch(D){console.error("Failed to fetch trips:",D),n(3,a=D.message),n(0,r=[])}finally{n(2,s=!1)}}function b(){u&&u.fetchPurchases(),d&&d.fetchBalances()}function v(){n(12,T=!1),w()}async function g(D){if(D){n(5,l=!0),n(6,c=null),n(4,o=[]);try{const I=await fetch(`/api/v1/payback/trips/${D}/participants`);if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);n(4,o=await I.json()),Array.isArray(o)||(console.warn("Participants data is not an array:",o),n(4,o=[]))}catch(I){console.error(`Failed to fetch participants for trip ${D}:`,I),n(6,c=I.message)}finally{n(5,l=!1)}}}function _(){n(11,p=!p),!p&&i&&g(i)}function E(D){xn.call(this,t,D)}function x(D){xn.call(this,t,D)}function A(D){xn.call(this,t,D)}function k(){i=Ih(this),n(1,i),n(0,r)}const M=()=>n(12,T=!0),F=()=>n(13,m=!m),N=()=>h==null?void 0:h.openModal();function Y(D){dn[D?"unshift":"push"](()=>{d=D,n(9,d)})}function nt(D){dn[D?"unshift":"push"](()=>{h=D,n(8,h)})}const K=()=>n(14,y=!y);function G(D){dn[D?"unshift":"push"](()=>{u=D,n(7,u)})}const X=()=>n(12,T=!1),lt=()=>n(12,T=!1),rt=()=>n(12,T=!1);return t.$$.update=()=>{if(t.$$.dirty[0]&3)if(i){g(i);const D=r.find(I=>I.id==i);D?n(10,f=D.name):n(10,f="")}else n(4,o=[]),n(6,c=null),n(5,l=!1)},[r,i,s,a,o,l,c,u,h,d,f,p,T,m,y,b,v,_,E,x,A,k,M,F,N,Y,nt,K,G,X,lt,rt]}class PA extends Ve{constructor(e){super(),Fe(this,e,RA,IA,He,{},null,[-1,-1])}}function NA(t){let e,n,r,i,s,a,o,l;return e=new Lg({}),r=new PA({}),{c(){Je(e.$$.fragment),n=at(),Je(r.$$.fragment),i=at(),s=P("main"),s.innerHTML="",a=at(),o=P("div"),o.innerHTML=""},m(c,u){Ne(e,c,u),J(c,n,u),Ne(r,c,u),J(c,i,u),J(c,s,u),J(c,a,u),J(c,o,u),l=!0},p:mt,i(c){l||(At(e.$$.fragment,c),At(r.$$.fragment,c),l=!0)},o(c){Nt(e.$$.fragment,c),Nt(r.$$.fragment,c),l=!1},d(c){c&&(Q(n),Q(i),Q(s),Q(a),Q(o)),Be(e,c),Be(r,c)}}}function BA(t,e,n){let{name:r}=e;return t.$$set=i=>{"name"in i&&n(0,r=i.name)},[r]}class UA extends Ve{constructor(e){super(),Fe(this,e,BA,NA,He,{name:0})}}new UA({target:document.body,props:{name:"world"}})});export default HA();
